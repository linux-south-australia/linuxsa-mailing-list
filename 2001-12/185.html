<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: chvt as normal user" -->
<!-- FromName="" -->
<!-- FromEmail="davidn@rebel.net.au" -->
<!-- ToName="'mark dickeson'" -->
<!-- ToEmail="markd@sa.apana.org.au" -->
<!-- Date="Mon, 10 Dec 2001 02:14:48 +1030 (CST)" -->
<!-- Id="Pine.LNX.4.33.0112100036050.939-100000@localhost.localdomain" -->
<!-- Reference="Pine.LNX.4.21.0112081135220.9343-100000@marvin.PlanetX" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: chvt as normal user</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: &lt;<I><A HREF="mailto:davidn@rebel.net.au">davidn@rebel.net.au</A></I>&gt;
  To  : mark dickeson &lt;<I><A HREF="mailto:markd@sa.apana.org.au">markd@sa.apana.org.au</A></I>&gt;
  Date: Mon, 10 Dec 2001 02:14:48 +1030 (CST)
</PRE>
<H1>Re: chvt as normal user</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
mark dickeson &lt;<A HREF="mailto:markd@sa.apana.org.au">markd@sa.apana.org.au</A>&gt; wrote:
&gt; Why, as a normal user, can I switch terminals with chvt until I reach
&gt; X-Windows (term 7), and then it becomes impossible to switch back? If I
&gt; try this as root I can switch to any term.

Interesting question with an interesting answer.  The error message
that you get, "chvt: VT_ACTIVATE: Operation not permitted", does give
a good hint.

The simple answer is that you have to run chvt from a console, or be root.
An xterm window is not a console.

A more detailed explanation is that chvt issues a VT_ACTIVATE ioctl
on a virtual terminal device, which you must own for it to succeed.
If you don't own the device you'll get that exact error.  In addition,
if the device is not calling process's controlling terminal, or if the
caller is not root, you will also get that exact same message.


-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
