<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="cant enable dma on pioneer dvd drive?" -->
<!-- FromName="'Anthony Symons'" -->
<!-- FromEmail="ant@sa.pracom.com.au" -->
<!-- ToName="" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="28 Nov 2002 08:45:38 +1030" -->
<!-- Id="1038435338.13248.13.camel@ant.internal" -->
<!-- Reference="" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: cant enable dma on pioneer dvd drive?</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Anthony Symons &lt;<I><A HREF="mailto:ant@sa.pracom.com.au">ant@sa.pracom.com.au</A></I>&gt;
  To  : &lt;<I><A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A></I>&gt;
  Date: 28 Nov 2002 08:45:38 +1030
</PRE>
<H1>cant enable dma on pioneer dvd drive?</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
This is a strange one. My Pioneer DVD used to run with DMA no troubled.
I noticed however that now it wont. It lost the ability some time
recently. It could have been when I replaced the motherboard, or when I
installed redhat 8.0.

The bios claims it can do dma, linux says the bios said it can do dma,
but when I get a shell, dma is disabled, and I cant turn it back on. The
other 3 ide devices (HDDs) in the system are running DMA no worries.
Could it be because I have an ata 100 HDD on the same chain as the DVD
which is ATA 33? Im sure It used to work with my last configuration on 
my old motherboard with a 33 and a 66mhz sharing a chain, and it worked
OK though.

See below for kernel output.

Any ideas on the cause? Or anything to try? DVD is on HDB.

kernel messages:

Linux version 2.4.18-14 (<A HREF="mailto:bhcompile@stripples.devel.redhat.com">bhcompile@stripples.devel.redhat.com</A>) (gcc
version 3.2 20020903 (Red Hat Linux 8.0 3.2-7)) #1 Wed Sep 4 13:35:50
EDT 2002
BIOS-provided physical RAM map:
 BIOS-e820: 0000000000000000 - 000000000009fc00 (usable)
 BIOS-e820: 000000000009fc00 - 00000000000a0000 (reserved)
 BIOS-e820: 00000000000f0000 - 0000000000100000 (reserved)
 BIOS-e820: 0000000000100000 - 0000000017ff0000 (usable)
 BIOS-e820: 0000000017ff0000 - 0000000017ff8000 (ACPI data)
 BIOS-e820: 0000000017ff8000 - 0000000018000000 (ACPI NVS)
 BIOS-e820: 00000000fec00000 - 00000000fec01000 (reserved)
 BIOS-e820: 00000000fee00000 - 00000000fee01000 (reserved)
 BIOS-e820: 00000000fff80000 - 0000000100000000 (reserved)
0MB HIGHMEM available.
383MB LOWMEM available.
On node 0 totalpages: 98288
zone(0): 4096 pages.
zone(1): 94192 pages.
zone(2): 0 pages.
Kernel command line: ro root=LABEL=/1
Initializing CPU#0
Detected 1108.065 MHz processor.
Speakup v-1.00 CVS: Tue Jun 11 14:22:53 EDT 2002 : initialized
Console: colour VGA+ 80x25
Calibrating delay loop... 2199.78 BogoMIPS
Memory: 382028k/393152k available (1326k kernel code, 8560k reserved,
999k data, 212k init, 0k highmem)
Dentry cache hash table entries: 65536 (order: 7, 524288 bytes)
Inode cache hash table entries: 32768 (order: 6, 262144 bytes)
Mount cache hash table entries: 8192 (order: 4, 65536 bytes)
ramfs: mounted with options: &lt;defaults&gt;
ramfs: max_pages=48025 max_file_pages=0 max_inodes=0 max_dentries=48025
Buffer cache hash table entries: 32768 (order: 5, 131072 bytes)
Page-cache hash table entries: 131072 (order: 7, 524288 bytes)
CPU: Before vendor init, caps: 0383fbff 00000000 00000000, vendor = 0
CPU: L1 I cache: 16K, L1 D cache: 16K
CPU: L2 cache: 256K
CPU: After vendor init, caps: 0383fbff 00000000 00000000 00000000
Intel machine check architecture supported.
Intel machine check reporting enabled on CPU#0.
CPU:     After generic, caps: 0383fbff 00000000 00000000 00000000
CPU:             Common caps: 0383fbff 00000000 00000000 00000000
CPU: Intel(R) Celeron(TM) CPU                1100MHz stepping 01
Enabling fast FPU save and restore... done.
Enabling unmasked SIMD FPU exception support... done.
Checking 'hlt' instruction... OK.
POSIX conformance testing by UNIFIX
mtrr: v1.40 (20010327) Richard Gooch (<A HREF="mailto:rgooch@atnf.csiro.au">rgooch@atnf.csiro.au</A>)
mtrr: detected mtrr type: Intel
PCI: PCI BIOS revision 2.10 entry at 0xfdb51, last bus=1
PCI: Using configuration type 1
PCI: Probing PCI hardware
Unknown bridge resource 0: assuming transparent
PCI: Using IRQ router VIA [1106/0686] at 00:07.0
isapnp: Scanning for PnP cards...
isapnp: No Plug & Play device found
speakup:  initialized device: /dev/synth, node (MAJOR 10, MINOR 25)
Linux NET4.0 for Linux 2.4
Based upon Swansea University Computer Society NET3.039
Initializing RT netlink socket
apm: BIOS version 1.2 Flags 0x03 (Driver version 1.16)
Starting kswapd
VFS: Diskquotas version dquot_6.5.0 initialized
pty: 2048 Unix98 ptys configured
Serial driver version 5.05c (2001-07-08) with MANY_PORTS MULTIPORT
SHARE_IRQ SERIAL_PCI ISAPNP enabled
ttyS0 at 0x03f8 (irq = 4) is a 16550A
ttyS1 at 0x02f8 (irq = 3) is a 16550A
Real Time Clock Driver v1.10e
opro<A HREF="file:">file:</A> mapping APIC.
opro<A HREF="file:">file:</A> APIC was already enabled
oprofile 0.2 loaded, major 254
block: 736 slots per queue, batch=184
Uniform Multi-Platform E-IDE driver Revision: 6.31
ide: Assuming 33MHz system bus speed for PIO modes; override with
idebus=xx
VP_IDE: IDE controller on PCI bus 00 dev 39
VP_IDE: chipset revision 6
VP_IDE: not 100% native mode: will probe irqs later
ide: Assuming 33MHz system bus speed for PIO modes; override with
idebus=xx
VP_IDE: VIA vt82c686b (rev 40) IDE UDMA100 controller on pci00:07.1
    ide0: BM-DMA at 0xff00-0xff07, BIOS settings: hda:DMA, hdb:DMA
    ide1: BM-DMA at 0xff08-0xff0f, BIOS settings: hdc:DMA, hdd:DMA
hda: WDC WD1000BB-00CAA1, ATA DISK drive
hdb: Pioneer DVD-ROM ATAPIModel DVD-115 0127, ATAPI CD/DVD-ROM drive
hdc: ST317242A, ATA DISK drive
hdd: ST330630A, ATA DISK drive
ide0 at 0x1f0-0x1f7,0x3f6 on irq 14
ide1 at 0x170-0x177,0x376 on irq 15
hda: 195371568 sectors (100030 MB) w/2048KiB Cache, CHS=12161/255/63,
UDMA(100)
hdc: 33683328 sectors (17246 MB) w/512KiB Cache, CHS=33416/16/63,
UDMA(33)
hdd: 59777640 sectors (30606 MB) w/2048KiB Cache, CHS=59303/16/63,
UDMA(66)
ide-floppy driver 0.99.newide
Partition check:
 hda: hda1 hda2 hda3 hda4 &lt; hda5 &gt;
 hdc: [PTBL] [2096/255/63] hdc1
 hdd: hdd1 hdd2 hdd4
Floppy drive(s): fd0 is 1.44M
FDC 0 is a post-1991 82077
NET4: Frame Diverter 0.46
RAMDISK driver initialized: 16 RAM disks of 4096K size 1024 blocksize
ide-floppy driver 0.99.newide
md: md driver 0.90.0 MAX_MD_DEVS=256, MD_SB_DISKS=27
md: Autodetecting RAID arrays.
md: autorun ...
md: ... autorun DONE.
NET4: Linux TCP/IP 1.0 for NET4.0
IP Protocols: ICMP, UDP, TCP, IGMP
IP: routing cache hash table of 4096 buckets, 32Kbytes
TCP: Hash tables configured (established 32768 bind 65536)
Linux IP multicast router 0.06 plus PIM-SM
NET4: Unix domain sockets 1.0/SMP for Linux NET4.0.
RAMDISK: Compressed image found at block 0
Freeing initrd memory: 237k freed
VFS: Mounted root (ext2 filesystem).
SCSI subsystem driver Revision: 1.00
kmod: failed to exec /sbin/modprobe -s -k scsi_hostadapter, errno = 2
PCI: Found IRQ 11 for device 00:0e.0
scsi0 : AdvanSys SCSI 3.3G: PCI Ultra: IO 0xDC00-0xDC0F, IRQ 0xB
  Vendor: MATSHITA  Model: CD-ROM CR-508     Rev: XS03
  Type:   CD-ROM                             ANSI SCSI revision: 02
  Vendor: MATSHITA  Model: CD-R   CW-7503    Rev: 1.09
  Type:   CD-ROM                             ANSI SCSI revision: 02
Journalled Block Device driver loaded
kjournald starting.  Commit interval 5 seconds
EXT3-fs: mounted filesystem with ordered data mode.
Freeing unused kernel memory: 212k freed
usb.c: registered new driver usbdevfs
usb.c: registered new driver hub
usb-uhci.c: $Revision: 1.275 $ time 13:44:31 Sep  4 2002
usb-uhci.c: High bandwidth mode enabled
PCI: Found IRQ 5 for device 00:07.2
usb-uhci.c: USB UHCI at I/O 0xcc00, IRQ 5
usb-uhci.c: Detected 2 ports
usb.c: new USB bus registered, assigned bus number 1
hub.c: USB hub found
hub.c: 2 ports detected
usb-uhci.c: v1.275:USB Universal Host Controller Interface driver
usb.c: registered new driver hiddev
usb.c: registered new driver hid
hid-core.c: v1.8.1 Andreas Gal, Vojtech Pavlik &lt;<A HREF="mailto:vojtech@suse.cz">vojtech@suse.cz</A>&gt;
hid-core.c: USB HID support drivers
mice: PS/2 mouse device common for all mice
EXT3 FS 2.4-0.9.18, 14 May 2002 on ide0(3,5), internal journal
Adding Swap: 522104k swap-space (priority -1)
kjournald starting.  Commit interval 5 seconds
EXT3 FS 2.4-0.9.18, 14 May 2002 on ide0(3,2), internal journal
EXT3-fs: mounted filesystem with ordered data mode.
parport0: PC-style at 0x378 [PCSPP,TRISTATE,EPP]
parport_pc: Via 686A parallel port: io=0x378
ohci1394: pci_module_init failed
ip_tables: (C) 2000-2002 Netfilter core team
8139too Fast Ethernet driver 0.9.25
PCI: Found IRQ 10 for device 00:10.0
PCI: Sharing IRQ 10 with 00:07.5
divert: allocating divert_blk for eth0
eth0: RealTek RTL8139 Fast Ethernet at 0xd88bae00, 00:00:21:d5:aa:29,
IRQ 10
eth0:  Identified 8139 chip type 'RTL-8139A'
eth0: Setting 100mbps full-duplex based on auto-negotiated partner
ability 45e1.
nvidia: loading NVIDIA Linux x86 NVdriver Kernel Module  1.0-3123  Tue
Aug 27 15:56:48 PDT 2002
Linux agpgart interface v0.99 (c) Jeff Hartmann
agpgart: Maximum main memory to use for agp memory: 321M
agpgart: Detected Via Apollo Pro chipset
agpgart: AGP aperture is 64M @ 0xe0000000
NVRM: AGPGART: VIA Apollo Pro chipset
NVRM: AGPGART: aperture: 64M @ 0xe0000000
NVRM: AGPGART: aperture mapped from 0xe0000000 to 0xd9ad5000
NVRM: AGPGART: mode 4x
NVRM: AGPGART: allocated 16 pages
Via 686a audio driver 1.9.1
PCI: Found IRQ 10 for device 00:07.5
PCI: Sharing IRQ 10 with 00:10.0
ac97_codec: AC97 Audio codec, id: 0x5649:0x4161 (Unknown)
via82cxxx: board #1 at 0xD800, IRQ 10
Assertion failed! buffer !=
NULL,via82cxxx_audio.c,via_dsp_write,line=2308
ide-floppy driver 0.99.newide
hdb: ATAPI 40X DVD-ROM drive, 512kB Cache
Uniform CD-ROM driver Revision: 3.12
Attached scsi CD-ROM sr0 at scsi0, channel 0, id 0, lun 0
Attached scsi CD-ROM sr1 at scsi0, channel 0, id 1, lun 0
sr0: scsi-1 drive
sr1: scsi3-mmc drive: 8x/20x writer cd/rw xa/form2 cdda tray
cdrom: This disc doesn't have any tracks I recognize!
NVRM: AGPGART: allocated 258 pages
NVRM: AGPGART: freed 258 pages
NVRM: AGPGART: allocated 258 pages
NVRM: AGPGART: allocated 256 pages
NVRM: AGPGART: allocated 2304 pages
NVRM: AGPGART: freed 2304 pages
NVRM: AGPGART: freed 256 pages
NVRM: AGPGART: freed 258 pages

hdparm /dev/hdb:

 HDIO_GET_MULTCOUNT failed: Invalid argument
 HDIO_GETGEO failed: Invalid argument

/dev/hdb:
 IO_support   =  1 (32-bit)
 unmaskirq    =  1 (on)
 using_dma    =  0 (off)
 keepsettings =  0 (off)
 readonly     =  1 (on)
 readahead    =  8 (on)

hdparm -d 1 /dev/hdb:

 HDIO_SET_DMA failed: Operation not permitted

/dev/hdb:
 setting using_dma to 1 (on)
 using_dma    =  0 (off)
-- 
Systems Administrator       
Pracom Ltd.             
+61 8 82029074 -=- +61 402 100 671 
<A HREF="mailto:anthony.symons@sa.pracom.com.au">anthony.symons@sa.pracom.com.au</A>

PRIVILEGED - PRIVATE AND CONFIDENTIAL
This electronic mail is solely for the use of the addressee and may
contain information which is confidential or privileged.
If you receive this electronic mail in error, please delete it from
your system immediately and notify the sender by electronic mail or
using any of the above contact details.

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A> IRC: #linuxsa on irc.openprojects.net
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
