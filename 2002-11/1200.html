<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="RE: SAMBA as PDC" -->
<!-- FromName="'Richard Sharpe'" -->
<!-- FromEmail="rsharpe@richardsharpe.com" -->
<!-- ToName="'Ralf Brandt'" -->
<!-- ToEmail="rbrandt@bionomics.com.au" -->
<!-- Date="Wed, 27 Nov 2002 21:51:04 -0800 (PST)" -->
<!-- Id="Pine.LNX.4.33.0211272149570.6360-100000@ns.aus.com" -->
<!-- Reference="44945D836D68F54B8F2217880FC65A2517FFEE@server.bionomics.com.au" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: RE: SAMBA as PDC</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Richard Sharpe &lt;<I><A HREF="mailto:rsharpe@richardsharpe.com">rsharpe@richardsharpe.com</A></I>&gt;
  To  : Ralf Brandt &lt;<I><A HREF="mailto:rbrandt@bionomics.com.au">rbrandt@bionomics.com.au</A></I>&gt;
  Date: Wed, 27 Nov 2002 21:51:04 -0800 (PST)
</PRE>
<H1>RE: SAMBA as PDC</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
On Thu, 28 Nov 2002, Ralf Brandt wrote:

&gt; It's in the file.

So it is. I didn't see that the first time around.

I have seen this problem before. What is the client? Is it WinXP?

If so, you need to disable Sign&Seal on the client. With Sign&Seal enabled 
on the client, it can join the domain, but fails during logon.
 
&gt; Ralf
&gt; 
&gt; -----Original Message-----
&gt; From: Richard Sharpe [mailto:<A HREF="mailto:rsharpe@richardsharpe.com">rsharpe@richardsharpe.com</A>]
&gt; Sent: Thursday, 28 November 2002 3:15 PM
&gt; To: Ralf Brandt
&gt; Cc: <A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A>
&gt; Subject: Re: SAMBA as PDC
&gt; 
&gt; 
&gt; On Thu, 28 Nov 2002, Ralf Brandt wrote:
&gt; 
&gt; &gt;  Hi,
&gt; &gt; please see my smb.conf.
&gt; &gt; this configuration works fin when win clients log-on using the workgroup configuration. I've generated for the clients trust machine accounts to join the samba service as domain machines. The joining the successful, but I can't logon to the domain when the client has rebooted. The message is:
&gt; &gt; the domain is not available or the machine account does not exist.
&gt; &gt; Has somebody an idea what is causing the trouble.
&gt; 
&gt; You need: encrypt passwords = yes, or something to that effect.
&gt;  
&gt; &gt; Thanks Ralf
&gt; &gt; 
&gt; &gt; smb.conf:
&gt; &gt; [global]  
&gt; &gt;  netbios name = SMBServer
&gt; &gt;  workgroup = BRANDTHOME
&gt; &gt;  comment = Linux Server
&gt; &gt;  volume = Suse 8.1  
&gt; &gt;  server string = Samba Server von Willy
&gt; &gt;  log file = /var/log/samba/log.%m 
&gt; &gt;  lock directory = /var/lock/samba  
&gt; &gt;  locking = yes  
&gt; &gt;  strict locking = no  
&gt; &gt;  share modes = yes  
&gt; &gt;  security = user  
&gt; &gt;  os level = 65  
&gt; &gt;  domain master = yes  
&gt; &gt;  local master = yes  
&gt; &gt;  prefered master = yes  
&gt; &gt;  domain logons = yes  
&gt; &gt;  socket options = TCP_NODELAY IPTOS_LOWDELAY SO_SNDBUF=8192 SO_RCVBUF=8192 
&gt; &gt;  unix password sync = Yes 
&gt; &gt;  passwd program = /usr/bin/passwd %u 
&gt; &gt;  passwd chat = *New*UNIX*password* %n\n *ReType*new*UNIX*password* %n\n *passwd:*all*authentication*tokens*updated*successfully* 
&gt; &gt;  encrypt passwords = yes 
&gt; &gt;  smb passwd file = /etc/smbpasswd 
&gt; &gt;  max log size = 50 
&gt; &gt;  wins support = yes 
&gt; &gt;  wins proxy = yes 
&gt; &gt;  dns proxy = yes 
&gt; &gt; 
&gt; &gt; # Un-comment the following and create the netlogon directory for Domain Logons 
&gt; &gt; [netlogon] 
&gt; &gt;  comment = Network Logon Service 
&gt; &gt;  path = /home/netlogon 
&gt; &gt;  guest ok = yes 
&gt; &gt;  writable = no 
&gt; &gt;  share modes = no 
&gt; &gt;  write list = domain_admin 
&gt; &gt;  read only = yes  
&gt; &gt;  browseable = yes ; say NO if you want to hide the NETLOGON share
&gt; &gt; # force user = root 
&gt; &gt; # force group = samba 
&gt; &gt; 
&gt; &gt; # Un-comment the following to provide a specific roving profile share 
&gt; &gt; # the default is to use the user's home directory 
&gt; &gt; [Profiles] 
&gt; &gt;  path = /%G/%U/.profile 
&gt; &gt;  browseable = no 
&gt; &gt;  guest ok = yes 
&gt; &gt; #logon script = %m.bat ; per workstation (machine)  
&gt; &gt; #logon script = logon.bat  
&gt; &gt; #logon script = %U.bat  
&gt; &gt; preserve case = yes  
&gt; &gt; short case preserve = yes  
&gt; &gt; case sensitive = no  
&gt; &gt; #printing = BSD or SYSV or AIX, etc..  
&gt; &gt; #printing = bsd  
&gt; &gt; #printcap name = /etc/printcap  
&gt; &gt; #load printers = yes  
&gt; &gt; #print command = /usr/bin/lpr -r -P %p %s  
&gt; &gt; [netlogon]  
&gt; &gt;  comment = Samba Network Logon Service  
&gt; &gt;  path = /home/netlogon  
&gt; &gt;  case sensitive = no  
&gt; &gt;  guest ok = yes  
&gt; &gt;  locking = no  
&gt; &gt;  read only = yes  
&gt; &gt;  browseable = no; say NO if you want to hide the NETLOGON share  
&gt; &gt; #admin users = @wheel  
&gt; &gt;  create mode = 0755  
&gt; &gt; [home]  
&gt; &gt;  comment = Home Directories  
&gt; &gt;  path = /home/%U
&gt; &gt;  browseable = no  
&gt; &gt;  writable = yes  
&gt; &gt;  read only = no  
&gt; &gt;  preserve case = yes  
&gt; &gt;  short preserve case = yes  
&gt; &gt;  create mode = 0777 
&gt; &gt; 
&gt; &gt; 
&gt; &gt; [GroupDrive] 
&gt; &gt;  comment = GroupDrive
&gt; &gt;  path = /groupdrive 
&gt; &gt;  public = no 
&gt; &gt;  writable = yes 
&gt; &gt;  printable = no 
&gt; &gt;  create mask = 0777
&gt; &gt;  directory mask = 0775 
&gt; &gt;  force group = users 
&gt; &gt; # force user = patches 
&gt; &gt;  hide dot files = yes 
&gt; &gt; [MultiMedia]
&gt; &gt;  comment = MediaDrive
&gt; &gt;  path = /samba/mediadrive
&gt; &gt;  public = no 
&gt; &gt;  writable = yes 
&gt; &gt;  printable = no 
&gt; &gt;  create mask = 0666 
&gt; &gt;  directory mask = 0775 
&gt; &gt;  force group = users 
&gt; &gt; # force user = patches 
&gt; &gt;  hide dot files = yes
&gt; &gt; 
&gt; &gt; 
&gt; 
&gt; 

-- 
Regards
-----
Richard Sharpe, rsharpe[at]ns.aus.com, rsharpe[at]samba.org, 
sharpe[at]ethereal.com, <A HREF="http://www.richardsharpe.com">http://www.richardsharpe.com</A>

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A> IRC: #linuxsa on irc.openprojects.net
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
