<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: Sound modules" -->
<!-- FromName="'Andrew Lord'" -->
<!-- FromEmail="andrewlord@internode.on.net" -->
<!-- ToName="" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Fri, 25 Jul 2003 12:57:58 +0930" -->
<!-- Id="200307251257.58181.andrewlord@internode.on.net" -->
<!-- Reference="3F206512.1010001@bigbutton.com.au" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: Sound modules</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Andrew Lord &lt;<I><A HREF="mailto:andrewlord@internode.on.net">andrewlord@internode.on.net</A></I>&gt;
  To  : &lt;<I><A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A></I>&gt;
  Date: Fri, 25 Jul 2003 12:57:58 +0930
</PRE>
<H1>Re: Sound modules</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Thanks for your response Conrad,

On Fri, 25 Jul 2003 08:30 am, you wrote:
&gt; Andrew Lord wrote:
&gt; &gt; Hi all,
&gt; &gt;
&gt; &gt; I've been attempting to get sound running after a system - reinstall
&gt; &gt; (Mandrake 9.1).  It's not a really happenning thing at the moment,
&gt; &gt; however.
&gt; &gt;
&gt; &gt; Here's a printout of the various parameters:
&gt; &gt;
&gt; &gt; ### Which driver does the card use by default ?  lspcidrake -v | fgrep
&gt; &gt; AUDIO
&gt; &gt;
&gt; &gt; es1371          : Ensoniq|ES1371 [AudioPCI-97] [MULTIMEDIA_AUDIO]
&gt; &gt; (vendor:1274 device:1371)
&gt; &gt;
&gt; &gt; ### Which driver does it currently use ?   grep sound-slot
&gt; &gt; /etc/modules.conf alias sound-slot-0 es1371
&gt;
&gt; Are you asking whether the sound modules are loaded? ...they aren't.

No, they're not loading automatically.  So I'm wondering if there is something 
that I can enter in a shell to manually load the modules ? Perhaps there's 
more to it than that ?

&gt; Are you compiling the alsa drivers?   

After my reinstall of Mandrake 9.1 and finding that sound didn't work, I 
re-installed alsa-utils, libalsa-data and libalsa2 rpms (rpm -Uvh --force 
$module_name) and the results obtained were exactly the same as described 
elsewhere in this e-mail.

When sound broke on my earlier install of Mandrake 9.1, I removed those rpm 
modules using the Mandrake control centre and then reinstalled them, but this 
had unexpected & fairly wide ranging repercussions on my system (clock went 
haywire among other things) so I just did another install of M'9.1.  

&gt; There are several modules that are
&gt; used by alsa.  I'm not familiar with Mandrake 9.1 and how it sets up
&gt; sound cards (usually it does it for you).  It used to use the module
&gt; supplied with the current kernel (es1371.o) unless it has started
&gt; including the alsa drivers as it is going to be in the 2.6 kernel.  It
&gt; looks like you are expecting the alsa drivers to be present but only the
&gt; kernel module es1371 is available.  Try modprobe es1370 and see what
&gt; happens.

Mmm.  Nor am I familiar with what modules are used in the alsa collection so 
I've visited alsa-project and found that there is one module, 'alsa-driver', 
that is not present on my CD's . . .. must be there (since I *did* have alsa 
working with my previous install) but perhaps one of the CD's is a bit flakey 
and it no longer is retrievable ?  

A couple of questions for anyone who knows  . . . . . .

1.  Is alsa-driver the module that installs drivers such as es1371 or is it 
simply required to operate such drivers ?

2.  Is there some other package responsible for installation of drivers such 
as es1371?

I'll try downloading the .tar.gz files and installing those.

&gt;
&gt; &gt; ### Is the module (driver) loaded or not ?   /sbin/lsmod
&gt; &gt; Module                  Size  Used by    Not tainted
&gt; &gt; ppp_deflate             4408   0 (autoclean)
&gt; &gt; zlib_deflate           21144   0 (autoclean) [ppp_deflate]
&gt; &gt; bsd_comp                5336   0 (autoclean)
&gt; &gt; isofs                  27988   0 (autoclean)
&gt; &gt; zlib_inflate           21156   0 (autoclean) [ppp_deflate isofs]
&gt; &gt; udf                    90464   0 (autoclean)
&gt; &gt; binfmt_misc             7020   1
&gt; &gt; autofs4                11540   2 (autoclean)
&gt; &gt; lp                      8096   0
&gt; &gt; parport_pc             25096   1
&gt; &gt; parport                34176   1 [lp parport_pc]
&gt; &gt; nfsd                   74256   8 (autoclean)
&gt; &gt; ppp_async               9216   1
&gt; &gt; ppp_generic            24060   3 [ppp_deflate bsd_comp ppp_async]
&gt; &gt; slhc                    6564   1 [ppp_generic]
&gt; &gt; af_packet              14952   0 (autoclean)
&gt; &gt; ip_vs                  83192   0 (autoclean)
&gt; &gt; sr_mod                 16920   0 (autoclean)
&gt; &gt; floppy                 55132   2
&gt; &gt; sis900                 15564   1 (autoclean)
&gt; &gt; nls_iso8859-1           3516   2 (autoclean)
&gt; &gt; nls_cp850               4316   2 (autoclean)
&gt; &gt; vfat                   11820   2 (autoclean)
&gt; &gt; fat                    37944   0 (autoclean) [vfat]
&gt; &gt; supermount             15296   4 (autoclean)
&gt; &gt; ide-cd                 33856   1
&gt; &gt; cdrom                  31648   0 [sr_mod ide-cd]
&gt; &gt; ide-scsi               11280   0
&gt; &gt; scsi_mod              103284   2 [sr_mod ide-scsi]
&gt; &gt; usb-ohci               20584   0 (unused)
&gt; &gt; usbcore                72992   1 [usb-ohci]
&gt; &gt; rtc                     8060   0 (autoclean)
&gt; &gt;
&gt; &gt; ### Are the sound services configured to be run on initlevel3 ?
&gt; &gt; /sbin/chkconfig --list sound
&gt; &gt; sound          	0:off	1:off	2:on	3:on	4:on	5:on	6:off
&gt; &gt;
&gt; &gt; ### Are the alsa services configured to be run on initlevel3 ?
&gt; &gt; /sbin/chkconfig --list alsa
&gt; &gt; alsa           	0:off	1:off	2:off	3:off	4:off	5:off	6:off
&gt; &gt;
&gt; &gt; ### Is the sound volume muted or not ?   aumix -q
&gt; &gt; aumix:  error opening mixer
&gt; &gt;
&gt; &gt; ### Which program uses the soundcard ?   /sbin/fuser -v /dev/dsp
&gt; &gt; /dev/dsp: No such file or directory
&gt; &gt;
&gt; &gt; Also, when I run sndconfig 0.68, I get the following:
&gt; &gt;
&gt; &gt; #######################
&gt; &gt; PCI Probe Results
&gt; &gt;
&gt; &gt; A PCI sound card was found in your system.  The details are:
&gt; &gt;
&gt; &gt; 	Model: Ensoniq|ES1371 [AudioPCI-97]
&gt; &gt; #######################
&gt; &gt;
&gt; &gt;  . . . and then . . . . .
&gt; &gt;
&gt; &gt; #######################
&gt; &gt; Sound Card Test
&gt; &gt;
&gt; &gt; A sound sample will now be played to determine if your sound card has
&gt; &gt; been correctly configured.
&gt; &gt;
&gt; &gt; #######################
&gt; &gt;
&gt; &gt;  . . . and then . . . . .
&gt; &gt;
&gt; &gt; #######################
&gt; &gt; The following error occurred running the modprobe program:
&gt; &gt;
&gt; &gt; /lib/modules/2.4.21-0.13mdk/kernel/drivers/sound/es1371.o.gz:
&gt; &gt; init_module: No such device
&gt; &gt; modprobe: insmod
&gt; &gt; /lib/modules/2.4.21-0.13mdk/kernel/drivers/sound/es1371.o.gz failed
&gt; &gt; modpobe: insmod sound-slot-0 failed
&gt; &gt; #######################
&gt; &gt;
&gt; &gt; This is despite es1371.o.gz being "present and accounted for" at the very
&gt; &gt; same directory that sndconfig says it is absent from.
&gt; &gt;
&gt; &gt; How do I go about getting the sound module to load ?
&gt; &gt;
&gt; &gt; Any suggestions as to whether this is the limit of the problem, or
&gt; &gt; whether the above info indicates another problem, would be much
&gt; &gt; appreciated.

Cheers,

Andrew Lord

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A> IRC: #linuxsa on irc.freenode.net
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
