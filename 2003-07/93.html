<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: Wierd /usr/bin/passwd on RH7.3" -->
<!-- FromName="'Ryan Verner'" -->
<!-- FromEmail="xfesty@computeraddictions.com.au" -->
<!-- ToName="'Barney Wrightson','Ryan Verner'" -->
<!-- ToEmail="Barney.Wrightson@dsto.defence.gov.au,xfesty@computeraddictions.com.au" -->
<!-- Date="Wed, 2 Jul 2003 16:06:50 +0930" -->
<!-- Id="20030702063650.M2938@computeraddictions.com.au" -->
<!-- Reference="20030702044313.M76023@computeraddictions.com.au" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: Wierd /usr/bin/passwd on RH7.3</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Ryan Verner &lt;<I><A HREF="mailto:xfesty@computeraddictions.com.au">xfesty@computeraddictions.com.au</A></I>&gt;
  To  : Barney Wrightson &lt;<I><A HREF="mailto:Barney.Wrightson@dsto.defence.gov.au">Barney.Wrightson@dsto.defence.gov.au</A></I>&gt;<BR>        Ryan Verner &lt;<I><A HREF="mailto:xfesty@computeraddictions.com.au">xfesty@computeraddictions.com.au</A></I>&gt;
  Date: Wed, 2 Jul 2003 16:06:50 +0930
</PRE>
<H1>Re: Wierd /usr/bin/passwd on RH7.3</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
&gt; Ryan Verner wrote:
&gt; 
&gt; &gt;$ cat /usr/bin/passwd
&gt; &gt;donga --stdin mdk
&gt; &gt;  
&gt; &gt;
&gt; In fact this looks like my non paranoid suggestion even more now 
&gt; that I think about it. Googling for passwd --stdin came up with a 
&gt; script that uses "passwd --stdin" (and suggests that this is a dumb 
&gt; thing to do), which comments that this allows passwd to take it's 
&gt; password from stdin or a pipe. So at a guess there was a user with a 
&gt; username of mdk an root was trying to change their password to donga 
&gt; (or something like that - I haven't tried to work out a redirect / 
&gt; pipe command that would do this and still be something like a valid 
&gt; way of doing it... ), and buggered it up.

I think you're completely right.

The system has some scripts for "adding users"; essentially some badly hacked together perl 
that runs stuff in system() (adduser, smbpasswd).

Wierdly enough there's absolutely nowhere that sets the password for the unix user; only for the 
samba user.  And there is a user called mdk; the initials of the original guy that configured this 
(only just clicked then; I thought it stood for mandrake).

I'm guessing that the script originally did set the unix password via a passwd redirect/pipe, 
tested this with a user called 'donga', the 
binary got overwritten, and the guy had absolutely no idea why passwd wouldn't work anymore, 
so he left that out of the script.

Cheers, I'll reinstall the passwd rpm now, just didn't know if 'donga' was actually a valid 
program.

R

&gt; Barney


--
Open WebMail Project (<A HREF="http://openwebmail.org">http://openwebmail.org</A>)

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A> IRC: #linuxsa on irc.freenode.net
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
