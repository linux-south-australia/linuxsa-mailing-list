<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Problems with NFS-mounted root" -->
<!-- FromName="'Greg 'groggy' Lehey'" -->
<!-- FromEmail="grog@lemis.com" -->
<!-- ToName="" -->
<!-- ToEmail="debian-au@lists.linux.org.au, LinuxSA <linuxsa@linuxsa.org.au>" -->
<!-- Date="Thu, 17 Jul 2003 13:51:02 +0930" -->
<!-- Id="20030717042102.GZ26875@wantadilla.lemis.com" -->
<!-- Reference="" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Problems with NFS-mounted root</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Greg  &lt;<I><A HREF="mailto:grog@lemis.com">grog@lemis.com</A></I>&gt;
  To  : &lt;<I><A HREF="mailto:debian-au@lists.linux.org.au">debian-au@lists.linux.org.au</A></I>&gt;<BR>        &lt;<I><A HREF="mailto: LinuxSA <linuxsa@linuxsa.org.au>"> LinuxSA <linuxsa@linuxsa.org.au></A></I>&gt;
  Date: Thu, 17 Jul 2003 13:51:02 +0930
</PRE>
<H1>Problems with NFS-mounted root</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
I'm currently trying to set up a diskless Debian machine, and I'm
having difficulties.  Here's where I am at the moment:

1.  Built a new 2.4.21 kernel with NFS root, NFS server, DHCP
    support.  Copied to a server machine along with a complete Debian
    Woody installation.

2.  Set up DHCP, tftp and grub to load the kernel from the server.

3.  The kernel loads and probes, but at the end I get:

     Root-NFS: No NFS server available, giving up.
     VFS: Unable to mount root fs via NFS, trying floppy.

The grub config file looks like this:

    timeout 2

    title Kernel 2.4.21
    root (nd)
    kernel (nd)/tftpboot/diskless/sat-gw/boot/vmlinuz root=/dev/nfs
    nfsroot=192.109.197.82:/tftpboot/diskless/sat-gw ip=dhcp

Ethereal shows that the kernel doesn't even try to access the NFS
server: there's no traffic at all after the kernel finishes loading.
I'm guessing that it has to be either an error in the grub config file
or in the kernel configuration.  Both are derived from a description
at <A HREF="http://bogmog.sourceforge.net/document_show.php3?doc_id">http://bogmog.sourceforge.net/document_show.php3?doc_id</A>=36.

I can't see that the problem lies in the root file system itself
(/etc/fstab, /dev, etc), since we don't get that far.  My best guess
is that the /dev/nfs is not (any more) right.  Can anybody confirm, or
point out the errors of my ways?

Greg
--
Finger <A HREF="mailto:grog@lemis.com">grog@lemis.com</A> for PGP public key
See complete headers for address and phone numbers

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.0 (FreeBSD)

iD8DBQE/FiQuIubykFB6QiMRAo2IAKCWhM/cdEk4VSwGlIVbkamRbmgqxACePwrd
SY5KEVmnpraECmywA4fFr28=
=ZwTh
-----END PGP SIGNATURE-----

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A> IRC: #linuxsa on irc.freenode.net
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
