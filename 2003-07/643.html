<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: Problems with NFS-mounted root" -->
<!-- FromName="'Christopher Yeoh'" -->
<!-- FromEmail="cyeoh@samba.org" -->
<!-- ToName="'Greg 'groggy' Lehey'" -->
<!-- ToEmail="grog@lemis.com" -->
<!-- Date="Thu, 17 Jul 2003 14:41:13 +1000" -->
<!-- Id="16150.10473.803080.914905@gargle.gargle.HOWL" -->
<!-- Reference="20030717042102.GZ26875@wantadilla.lemis.com" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: Problems with NFS-mounted root</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Christopher Yeoh &lt;<I><A HREF="mailto:cyeoh@samba.org">cyeoh@samba.org</A></I>&gt;
  To  : Greg  &lt;<I><A HREF="mailto:grog@lemis.com">grog@lemis.com</A></I>&gt;
  Date: Thu, 17 Jul 2003 14:41:13 +1000
</PRE>
<H1>Re: Problems with NFS-mounted root</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
At 2003/7/17 13:51+0930  Greg 'groggy' Lehey writes:
&gt;     timeout 2
&gt; 
&gt;     title Kernel 2.4.21
&gt;     root (nd)
&gt;     kernel (nd)/tftpboot/diskless/sat-gw/boot/vmlinuz root=/dev/nfs
&gt;     nfsroot=192.109.197.82:/tftpboot/diskless/sat-gw ip=dhcp
&gt; 
&gt; Ethereal shows that the kernel doesn't even try to access the NFS
&gt; server: there's no traffic at all after the kernel finishes loading.
&gt; I'm guessing that it has to be either an error in the grub config file
&gt; or in the kernel configuration.  Both are derived from a description
&gt; at <A HREF="http://bogmog.sourceforge.net/document_show.php3?doc_id">http://bogmog.sourceforge.net/document_show.php3?doc_id</A>=36.

I had the exact same error in setting up an nfsroot box a few months
ago.  I can't remember exactly what I did to fix it (there were a few
issues along the way - firewalling myself off by accident being one of
them :-) but at one stage I gave up using the ip=dhcp (saw some
references to that being broken on certain 2.4.x kernels).

So I have something like this:

kernel (nd)/var/ftpd/vmlinuz-2.4.19-via root=/dev/nfs nfsroot=192.168.1.1:/data/blue_root ip=192.168.1.11:192.168.1.1:192.168.1.1:255.255.255.0:blue:eth0:off vga=0x318

If I remember correctly it dhcp's again after loading the kernel and
that bit wasn't working. Of course I could be misremembering but
it might be worth trying.

btw - if anyone has had problems with netbooting VIA mini-itx boxes
I'd be interested in hearing about it. I have a problem where if I
netboot I get memory problems with the machine (even just netbooting
memtest86) but booting the same thing from disk its ok. Kind of
suspect something wrong with PXE boot rom, but don't really know.

Chris
-- 
<A HREF="mailto:cyeoh@samba.org">cyeoh@samba.org</A>

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A> IRC: #linuxsa on irc.freenode.net
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
