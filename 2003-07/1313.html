<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Linux drivers" -->
<!-- FromName="'Andy Zivkovic'" -->
<!-- FromEmail="andy@a-z.au.com" -->
<!-- ToName="" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="30 Jul 2003 13:36:06 +1000" -->
<!-- Id="1059536166.3327.94.camel@andy.home.a-z.au.com" -->
<!-- Reference="" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Linux drivers</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Andy Zivkovic &lt;<I><A HREF="mailto:andy@a-z.au.com">andy@a-z.au.com</A></I>&gt;
  To  : &lt;<I><A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A></I>&gt;
  Date: 30 Jul 2003 13:36:06 +1000
</PRE>
<H1>Linux drivers</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Sorry about not specifying which driver or for what device in the
subject. I like to give useful subjects so people not interested can
delete/skip the email but by looking at the subject, but my question is
more about getting drivers in general than my specific hardware problem.

Anyway, my motherboard (Asus A7N8X Deluxe) has a Silicon Image 3112A
SATA controller. kernel/linux 2.4.20 doesn't contain the driver, and
although version 2.4.21 does (version 1.01 of the driver), it
freezes/locks the computer when I try to use it (straight away if I
enable DMA, and after a short time in PIO mode).

I've spent some time trying to find out more information about getting
it to work under linux and where to get updated drivers. I was hoping
there would be a website somewhere which contains the latest driver to
download, compile and install, but that doesn't seem to be the case. I
was looking at the change logs and the 'diff's on kernel.org and I saw
that 2.4.22-pre9 has a version 1.06 of the driver.

What I'd like to do is download just that driver and compile it as a
module and load it into my 2.4.20 kernel (I use Gentoo, with the
gentoo-sources kernel&patches, which is currently at 2.4.20). My
understanding is that since it's the same major kernel version (2.4) the
interfaces should be the same, so hopefully it should be compatible.
However, I have no idea how to do it.

Here's my questions:
How/where/is it possible to get siimage.c and siimage.h from the latest
kernel without downloading the entire kernel source (I'm on 56k dialup -
don't ask how long it took to get Gentoo up and running). One thing I
could do is look at the diff
(<A HREF="http://www.kernel.org/diff/diffview.cgi?file">http://www.kernel.org/diff/diffview.cgi?file</A>=%2Fpub%2Flinux%2Fkernel%2Fv2.4%2Ftesting%2Fpatch-2.4.22-pre9.bz2;z=1332), copy all the green and black lines and cut out all the diff metadata. It's too easy to make a mistake though.

Also (and more importantly to me), how would I build the driver out of
the usual kernel build environment? Sure I could edit the
makefiles/whatever so I can enable the driver as a mudule in menu
menuconfig, then compile the entire kernel, etc. I'd prefer if I could
do it more like nVidia's nForce drivers though. Just put the driver
source somewhere else then make && make install. That also mean I
wouldn't have to recompile the kernel/all modules every time I want to
try a new siimage driver.

Thanks for your help,
Andy


-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A> IRC: #linuxsa on irc.freenode.net
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
