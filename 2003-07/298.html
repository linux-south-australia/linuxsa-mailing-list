<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: ADSL Shaper" -->
<!-- FromName="'Ryan Verner'" -->
<!-- FromEmail="xfesty@computeraddictions.com.au" -->
<!-- ToName="'Matthew Moyle-Croft'" -->
<!-- ToEmail="mmc@mmc.com.au" -->
<!-- Date="Tue, 8 Jul 2003 22:47:34 +0930" -->
<!-- Id="20030708131734.M8165@computeraddictions.com.au" -->
<!-- Reference="20030708123546.M75220@computeraddictions.com.au" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: ADSL Shaper</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Ryan Verner &lt;<I><A HREF="mailto:xfesty@computeraddictions.com.au">xfesty@computeraddictions.com.au</A></I>&gt;
  To  : Matthew Moyle-Croft &lt;<I><A HREF="mailto:mmc@mmc.com.au">mmc@mmc.com.au</A></I>&gt;
  Date: Tue, 8 Jul 2003 22:47:34 +0930
</PRE>
<H1>Re: ADSL Shaper</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
&gt; &gt; Few questions:
&gt; &gt; 
&gt; &gt; &gt; iptables -t mangle -A POSTROUTING -s 192.207.120.0/255.255.255.128 -j MARK
&gt; &gt; --set-mark 0x5
&gt; 
&gt; &gt; 192.207.120/25 is your internal lan?
&gt; 
&gt; Just thought about it.  Have to go check when ipfilter does nat 
&gt; 
&gt; (before/after routing) as this will affect what statements to put in 
&gt; this when you're doing nat (ie. do you put 10/8 or your real public 
&gt; address?).

Hmm.  Playing with this now; I can't get much to happen; the main goal is to
keep my ssh session nice and perky even if I'm downloading via http/ftp.

Downloading files by both ftp/http both make ssh laggy as hell (5-6 seconds
before any text pops up), and playing around with minimising values in those
scripts (i.e. downstream/upstream quartered), it doesn't affect the download
speed, as it should (as far as I can see).

iptables and tc certainly show the rules there.

(I share a house with other people...  they like downloading lots, and lots,
and lots.  Trying to do work stuff via ssh is virtually impossible :( - hence
why I want to packet shape, and was partially my drive to get DSL in the first
place).

I've got all the QoS stuff compiled as modules (2.4.21, compiled today), and
I'm using the latest iproute from Debian Stable.

As you say; I'm not routing, I'm doing MASQ, and the modem is a Billion
"router" in modem mode; i.e. eth1 on my Linux box does the pppoe
authentication, and gets the actual address.

So things are somewhat different.

Any clues (I'll keep playing...)?

R

&gt; Maybe better to mark based on the incoming interface (-i eth0 for 
&gt; example)
&gt; -- 
&gt; Matthew
&gt; --
&gt; <A HREF="mailto:Matthew@Moyle-Croft.com">Matthew@Moyle-Croft.com</A>    | <A HREF="mailto:mmc@mmc.com.au">mmc@mmc.com.au</A>        |   
&gt;  <A HREF="mailto:mmc@206gti.net">mmc@206gti.net</A> <A HREF="http://www.Moyle-Croft.com">http://www.Moyle-Croft.com</A> | <A HREF="http://www.mmc.com.au">http://www.mmc.com.au</A> | 
&gt; <A HREF="http://206gti.net">http://206gti.net</A>


--
Open WebMail Project (<A HREF="http://openwebmail.org">http://openwebmail.org</A>)

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A> IRC: #linuxsa on irc.freenode.net
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
