<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: Getting hyperthreading to work" -->
<!-- FromName="'Evan Bourlotos'" -->
<!-- FromEmail="evan@cs.adelaide.edu.au" -->
<!-- ToName="'SCHUBERT, Paul'" -->
<!-- ToEmail="paul.schubert@baesystems.com" -->
<!-- Date="Wed, 14 Jan 2004 14:09:18 +1030" -->
<!-- Id="006c01c3da4f$fd331200$0c01010a@CACLT12" -->
<!-- Reference="DB7A11EAA82C984BA0CFBA1469E0A45501FAF0C4@sbw2ex1.au.baesystems.com" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: Getting hyperthreading to work</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Evan Bourlotos &lt;<I><A HREF="mailto:evan@cs.adelaide.edu.au">evan@cs.adelaide.edu.au</A></I>&gt;
  To  : SCHUBERT, Paul &lt;<I><A HREF="mailto:paul.schubert@baesystems.com">paul.schubert@baesystems.com</A></I>&gt;
  Date: Wed, 14 Jan 2004 14:09:18 +1030
</PRE>
<H1>Re: Getting hyperthreading to work</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Paul
I have a 2.4c HT enabled and it shows up as multiple cpus in both win2k and
rh9.x
There are a few issues with what you have raised.

&gt; I have a 3GHz P4 800 MHz FSB processor running on a processorboard that
only
&gt; supports a 400/533 MHz FSB (IEI Rocky-4784EVG PICMG card with 845E
chipset).

&gt; The system seems to work fine although the CPU clock speed reported by the
&gt; BIOS when it boots is only 1.5 GHz (at 400MHz FSB presumably because of
the
&gt; slower FSB) and it doesn't allow the multiplier to be changed.

ok Here you will not be running @ 3.0 ghz because
of the CPU multiplier and FSB values.
viz 3.0 = 15 * 200 mhz fsb (quad pumped to 800 mhz)
so 15* 533/4 = 2.0 ghz
and 15 * 400/4 = 1.5 ghz

Also I assume you HT enabled board was designed for 3.0 ghz 533 fsb based
CPUS these were the only non 800 ones to support HT

&gt; I am evaluating it for use in an CPU intensive multithreaded application,
so
&gt; I am interested in getting it to work with hyperthreading.
&gt;
&gt; I am using a 2.4.20 kernel that I have built for the P4 with SMP support
and
&gt; ACPI support (all other options default).

Mine works fine and grub comes up with the ability to boot in SMP  mode.

&gt; With hyperthreading enabled in the BIOS, when I type /proc/cpuinfo it only
&gt; displays info for a single processor.  And there is no speed improvement
&gt; over that with hyperthreading disabled via the BIOS or without SMP.
&gt; This suggests that it is not actually utilizing the Hyperthreading
capability.
&gt; Any ideas as to how to get it to recognise the hyperthreading processor as
&gt; two processors?
Ok A simple solution is to install win2k or Xp to prove the fact your board
is support HT
or install the latest version of RH without chaning things around it auto
detected everyting on mine

&gt; Note that the performance is a bit less than what you would expect from a
&gt; single P111 running at the same speed so I'm confident that hyperthreading
&gt; is not just quietly doing it's stuff and not telling us about it.

Sounds like it but dont forget you're only running at 2 ghz

&gt; We saw the expected 30% performance improvement when we increased the FSB
to
&gt; 533 MHz but that also sped up the PCI clock.

yes you should have the ability to lock the AGP /PCI buss to 66/33 otherwise
as you go up so does the speed and you get problems.
I would advise an 865/875 (800 fsb) based board and then you'll see how good
the chip is.

 &gt; Has anyone else had similar problems getting hyperthreading to work?
Anyone
&gt; had success with similar Single board computers.
&gt; Any suggestions that might throw some light are welcome.

My Configuration is
an ABIT IS7 865 board and a P4 2.4c (c = 800 mhz b = 533 and a = 400)  with
DDR etc.

BTW HT is wonderful as I realise how good it is every time I burn a CD and
compile

+------------------------------------------------------------------------+
| Evan Bourlotos              Email: <A HREF="mailto:evan@cs.adelaide.edu.au">evan@cs.adelaide.edu.au</A>             |
| BSc, MCS                    WWW:   <A HREF="http://www.cs.adelaide.edu.au/~evan">http://www.cs.adelaide.edu.au/~evan</A> |
| University of Adelaide      Phone: +61 8 8234 5522 (Work)              |
| South Australia 5005        Fax:   +61 8 8234 5530 (Work Fax)          |
+------------------------------------------------------------------------+

&gt; Paul Schubert
&gt; Team Leader Special Projects
&gt; BAE SYSTEMS
&gt; OTHR Systems Program Office (Jindalee Support Contract)
&gt; Bldg 40 Labs area DSTO
&gt; PO Box 1068
&gt; Salisbury SA 5108
&gt; Phone +61 8 8480 8207
&gt; Facsimile +61 8 8480 8887
&gt; e-mail: <A HREF="mailto:paul.schubert@baesystems.com">paul.schubert@baesystems.com</A> &lt;mailto:<A HREF="mailto:paul.schubert@baesystems.com">paul.schubert@baesystems.com</A>&gt;
&gt;
&gt;
&gt;
&gt; -- 
&gt; LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A> IRC: #linuxsa on irc.freenode.net
&gt; To unsubscribe from the LinuxSA list:
&gt;   mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject
&gt;

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A> IRC: #linuxsa on irc.freenode.net
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
