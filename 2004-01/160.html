<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Multiply Ethernet links, default gateways and IP spoof protection" -->
<!-- FromName="'Mike O'Connor'" -->
<!-- FromEmail="mike@pineview.net" -->
<!-- ToName="'LinuxSA'" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Mon, 5 Jan 2004 11:26:36 +1030" -->
<!-- Id="000d01c3d326$c4f2a480$1ef621cb@themaster" -->
<!-- Reference="" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Multiply Ethernet links, default gateways and IP spoof protection</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Mike O &lt;<I><A HREF="mailto:mike@pineview.net">mike@pineview.net</A></I>&gt;
  To  : LinuxSA &lt;<I><A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A></I>&gt;
  Date: Mon, 5 Jan 2004 11:26:36 +1030
</PRE>
<H1>Multiply Ethernet links, default gateways and IP spoof protection</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Hi All

I have a box at a local large ISP in Adelaide which I maintain, this machine
was installed some time back with just enough ip address for host and
gateway(/30).
It now has about 400 domains hosted and is the primary DNS for these.

As a part of an upgrade I used the Linux vserver patches to allow the
running of multiply server on this hardware. This would allow me to develop
a new set of server with out affecting the current one which is in a bad
way.
Problem is that vservers need a different ip address per vserver, so I
needed more ip address's

It turned out that we could only get ip address via a new Ethernet cable.
(This is just how it is)

Some information change to hide the identity of all other than me. :)

Net1: 192.168.1.0/30:
    Host: 192.168.1.1
    Gateway: 192.168.1.2

Net2: 172.29.1.0/29:
    Host: 172.29.1.1-5
    Gateway: 172.29.1.6


Now here is the problem:

If a packet comes in on Net1 to 192.168.1.1 and the gateway is set to net2
the packets will not get to the requester.
The problem comes down to one of two things
1. Linux sends its packets out with the ip address of the closest gateway in
this case net2 even if the service is bound to the net1 interface.
2. The packet gets block because the ISP has packet spoofing enable.

At this time I have not been able to working which of the following is the
problem.

Any ideas would be of great help

Mike


-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A> IRC: #linuxsa on irc.freenode.net
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
