<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Getting hyperthreading to work" -->
<!-- FromName="'SCHUBERT, Paul'" -->
<!-- FromEmail="paul.schubert@baesystems.com" -->
<!-- ToName="'linuxsa@linuxsa.org.au'" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Wed, 14 Jan 2004 13:44:58 +1030" -->
<!-- Id="DB7A11EAA82C984BA0CFBA1469E0A45501FAF0C4@sbw2ex1.au.baesystems.com" -->
<!-- Reference="" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Getting hyperthreading to work</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: SCHUBERT, Paul &lt;<I><A HREF="mailto:paul.schubert@baesystems.com">paul.schubert@baesystems.com</A></I>&gt;
  To  : linuxsa@linuxsa.org.au &lt;<I><A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A></I>&gt;
  Date: Wed, 14 Jan 2004 13:44:58 +1030
</PRE>
<H1>Getting hyperthreading to work</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
I have a 3GHz P4 800 MHz FSB processor running on a processorboard that only
supports a 400/533 MHz FSB (IEI Rocky-4784EVG PICMG card with 845E chipset).
The system seems to work fine although the CPU clock speed reported by the
BIOS when it boots is only 1.5 GHz (at 400MHz FSB presumably because of the
slower FSB) and it doesn't allow the multiplier to be changed.

I am evaluating it for use in an CPU intensive multithreaded application, so
I am interested in getting it to work with hyperthreading.

I am using a 2.4.20 kernel that I have built for the P4 with SMP support and
ACPI support (all other options default).

With hyperthreading enabled in the BIOS, when I type /proc/cpuinfo it only
displays info for a single processor.  And there is no speed improvement
over that with hyperthreading disabled via the BIOS or without SMP.   This
suggests that it is not actually utilizing the Hyperthreading capability.
Any ideas as to how to get it to recognise the hyperthreading processor as
two processors?

Note that the performance is a bit less than what you would expect from a
single P111 running at the same speed so I'm confident that hyperthreading
is not just quietly doing it's stuff and not telling us about it.  

We saw the expected 30% performance improvement when we increased the FSB to
533 MHz but that also sped up the PCI clock.  

Has anyone else had similar problems getting hyperthreading to work?  Anyone
had success with similar Single board computers.   
Any suggestions that might throw some light are welcome.



Paul Schubert
Team Leader Special Projects
BAE SYSTEMS
OTHR Systems Program Office (Jindalee Support Contract)
Bldg 40 Labs area DSTO
PO Box 1068
Salisbury SA 5108
Phone +61 8 8480 8207
Facsimile +61 8 8480 8887
e-mail: <A HREF="mailto:paul.schubert@baesystems.com">paul.schubert@baesystems.com</A> &lt;mailto:<A HREF="mailto:paul.schubert@baesystems.com">paul.schubert@baesystems.com</A>&gt; 



-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A> IRC: #linuxsa on irc.freenode.net
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
