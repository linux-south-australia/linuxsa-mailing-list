<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: UPS" -->
<!-- FromName="Steve Sloan" -->
<!-- FromEmail="steve@lansol.com.au" -->
<!-- ToName="" -->
<!-- ToEmail="branko@senet.com.au" -->
<!-- Date="Mon, 14 Jun 1999 17:04:37 +0930" -->
<!-- Id="003d01beb638$5b9ad490$0501a8c0@stephen" -->
<!-- Reference="" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: UPS</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Steve Sloan &lt;<I><A HREF="mailto:steve@lansol.com.au">steve@lansol.com.au</A></I>&gt;
  To  : <A HREF="mailto:branko@senet.com.au">branko@senet.com.au</A>
  Date: Mon, 14 Jun 1999 17:04:37 +0930
</PRE>
<H1>Re: UPS</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Thanks for the help Branko but I finally fix it. It turned out to be
hardware problem, the two on board serial ports pasted all the DOS loop back
tests etc. but when I fitted another serial port into a spare ISA slot the
whole thing started to work properly. I think there might be some loading
problem as there are pullup resistors in the sola card which must have been
too much for the on board serail ports. Anyway Sola (re Best Power USA)
turned out to be quite helpfull in giving me informantion on how the UPS and
the Checkups software that comes with the UPS has the source code for Linux
also.

Steve
-----Original Message-----
From: <A HREF="mailto:branko@senet.com.au">branko@senet.com.au</A> &lt;<A HREF="mailto:branko@senet.com.au">branko@senet.com.au</A>&gt;
To: <A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A> &lt;<A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A>&gt;
Date: Saturday, 12 June 1999 21:12
Subject: Re: UPS


&gt;Steve Sloan wrote:
&gt;
&gt;&gt;I am trying to get a shutdown UPS cable going on a RH6 box using a Sola
310
&gt;&gt;UPS. Sola have been quite helpful and reassured me that I have the correct
&gt;&gt;cable and the correct software (Sola provides a Checkups program that
&gt;&gt;monitors the UPS via the serial port). The basic command to test the UPS
is
&gt;&gt;
&gt;&gt;checkups /dev/ttyS0
&gt;&gt;
&gt;&gt;This returns with a message that the cable is not attached. Sola advised
me
&gt;&gt;to check if getty is grabbing the port and to make sure the port is setup
&gt;&gt;for a modem. As far as I can tell getty isn't using any serial ports as
&gt;&gt;there are no entries in the /etc/inittab file and as for setting the port
&gt;&gt;for a modem, I have no idea.
&gt;
&gt;Steve,
&gt;
&gt;I don't have any experience with UPS software but I think I can point
&gt;you in the right direction to get the serial port working.
&gt;
&gt;It appears that Sola have asked you to set up the port /dev/ttyS0 for
&gt;use with a modem, meaning that flow control should be managed in hardware.
&gt;Apparently, the default setting for serial ports is XON/XOFF but the UPS
&gt;application expects RTS/CTS handshaking, when it doesn't get it, it
&gt;assumes that the CTS/RTS lines are not connected and wrongly complains
&gt;about the cable being detached.
&gt;
&gt;Your friends in setting serial ports are stty or setserial - take a
&gt;look at the man pages.  Briefly, use "stty -a &lt; /dev/ttyS0" or
&gt;"setserial -a /dev/ttyS0" to examine the settings.  BTW, ttyS0 is
&gt;COM1 right?  Next set handshaking to RTS/CTS.  If you were mucking
&gt;around with a modem, you could use a comms program such as minicom
&gt;or cu to talk with the device hence prove that the settings are right
&gt;- look in your UPS manual to see if it can be interrogated using plain
&gt;text.
&gt;
&gt;Finally, you will want to make the above changes permanent.  On my
&gt;Debian system I did this for my PPP link by editing the file
&gt;/etc/rc.boot/0setserial.  It could just as easily be put in the same
&gt;place from which the ups software is started eg /etc/inittab or the
&gt;applicable /etc/rc* file on your system.
&gt;
&gt;Hope this helps,
&gt;--
&gt;Branko Bratkovic
&gt;<A HREF="mailto:branko@senet.com.au">branko@senet.com.au</A>
&gt;
&gt;--
&gt;Check out the LinuxSA web pages at <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>
&gt;To unsubscribe from the LinuxSA list:
&gt;  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject
&gt;

-- 
Check out the LinuxSA web pages at <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
