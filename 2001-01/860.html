<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Squid Questions" -->
<!-- FromName="'David Lloyd'" -->
<!-- FromEmail="lloy0076@rebel.net.au" -->
<!-- ToName="" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Fri, 19 Jan 2001 09:28:04 +1030" -->
<!-- Id="3A6774FC.BC250B83@rebel.net.au" -->
<!-- Reference="" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Squid Questions</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: David Lloyd &lt;<I><A HREF="mailto:lloy0076@rebel.net.au">lloy0076@rebel.net.au</A></I>&gt;
  To  : &lt;<I><A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A></I>&gt;
  Date: Fri, 19 Jan 2001 09:28:04 +1030
</PRE>
<H1>Squid Questions</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Hi There!

I am working on a system that:

* has a single IDE drive
* Pentium 233MHZ
* 64Mb of memory
* 64Mb of swap
* RedHat 5.2

Note that it is likely to be updated to 6.2. It is already running Squid
2.2.6 from memory.

This system shows some peculiarities:

* Squid hijacks 90% (or more) of the memory
 - I've tried mempools on and off
 - I've tried mempool_limit (some arbitrary number)
 - I've reduced/changed the cache_mem size

Is it normal for squid to use that much memory? Having looked at the
server with only one person using it, the hard disk seems to thrash.
I've hazarded a guess that it's swapping out as well as talking to the
Squid cache.

* Squid fails to allocate memory
 - /var/log/messages contains messages such as:
   xmalloc...failed to allocate 4096kbytes
   terminated child process
   sent sigsegv

These probably appear when the server is busy. I'm told they never used
to appear (some six months ago) and that the server has gotten
inexplicably slow. I've taken down any unnecessary resource users but it
is said this server ran faster under its current setup.

How much memory does squid allocate?

* cache directory
 - cache directories range from 00 to (or some such number)
 - under these directories are further directories with similar
hexadecimal names
 - cache data only appears in 00/00

I would have expected that Squid would have distributed its cache data
more efficiently. There are some 20 or more directories, yet it looks as
though it's storing all data in one. Is this normal? Abnormal?

I acknowledge you probably need more information than this; please
e-mail for things I may have left out.

DL

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
