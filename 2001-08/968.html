<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Socket Worries" -->
<!-- FromName="'Davis, Harvey'" -->
<!-- FromEmail="Harvey.Davis@dsto.defence.gov.au" -->
<!-- ToName="'linuxsa@linuxsa.org.au'" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Mon, 27 Aug 2001 17:26:50 +0930" -->
<!-- Id="DB0C881A51F5D311999F0090274DD43702E56F7C@salex003.dsto.defence.gov.au" -->
<!-- Reference="" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Socket Worries</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Davis, Harvey &lt;<I><A HREF="mailto:Harvey.Davis@dsto.defence.gov.au">Harvey.Davis@dsto.defence.gov.au</A></I>&gt;
  To  : linuxsa@linuxsa.org.au &lt;<I><A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A></I>&gt;
  Date: Mon, 27 Aug 2001 17:26:50 +0930
</PRE>
<H1>Socket Worries</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Hello

I have a non-blocking socket that I am trying a connect on.
Unfortunately I have the socket failing to connect and then mysteriously
succeeding
even though there is no one listening on the other end (yes I have varied my
port numbers
in case some process happened to be listening on the one I was connecting
too). 
Having read the man page on non-blocking sockets and EINPROGRESS
and EALREADY error codes being returned and what to do about them. I have
coded up a select in a while loop that that polls until the connect call has
completed (when it returns EINPROGRESS or EALREADY via errno). Once
the connect has completed I use getsockopt to determine if it was
successfull.
Initially when the connect fails, it returns an EINPROGRESS via errno. My
code
then loops around in a while loop polling select until the connect call has
completed.
Once completed getsockopt returns ECONNREFUSED (as you would expect).

What happens then is I return to the top of my initial loop and try to
connect again. The
funny thing is that this connect call succeeds!!! (returns 0) even though no
one is
listening on the socket. I cant figure out why this is happening

ANy help would be appreciated

Thanks
Harvey


-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
