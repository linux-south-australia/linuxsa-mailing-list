<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: Blocking Code Red ingress to your ISP network" -->
<!-- FromName="'Toby Corkindale'" -->
<!-- FromEmail="tjcorkin@sa.pracom.com.au" -->
<!-- ToName="" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Fri, 10 Aug 2001 21:12:00 +0930 (CST)" -->
<!-- Id="Pine.LNX.4.33.0108102059001.1632-100000@localhost.localdomain" -->
<!-- Reference="20010810205256.A14436@dog.topology.org" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: Blocking Code Red ingress to your ISP network</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Toby Corkindale &lt;<I><A HREF="mailto:tjcorkin@sa.pracom.com.au">tjcorkin@sa.pracom.com.au</A></I>&gt;
  To  : &lt;<I><A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A></I>&gt;
  Date: Fri, 10 Aug 2001 21:12:00 +0930 (CST)
</PRE>
<H1>Re: Blocking Code Red ingress to your ISP network</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
As you say, its not hard.
In fact, I've already done something exactly like it.
We have a broadband connection, with the 3gb cap. Since its shared by
several housemates, we need to make sure we don't step on each others'
share.

Using iptables, perl, and cron, this has been achieved. We have a squid
proxy cache, too, and a supplementary dialup.

Once a user reaches their limit, for that time period, they are redirected
to use the modem dialup, and they can only retrieve cache hits from the proxy.
(Cache hits are not included in the total)

In your case, received data == cost, so the same methods apply.
Once cost limit is reached, performance is degraded. Once upper limit is
reached, performance is totally disconnected.

It's a bit of work with man pages and a couple of pages of perl.. Didn't
take too long for this $0/hr brain to figure out, so you shouldn't have a
problem ;)


A totally alternative solution is to just get a box hosted in the US, where
you don't have any of these stupid bandwidth problems.. then you will be
able to get a flat-rate for an unlimited-quantity.


So, there are two viable solutions available to you. Most probably more,
too. Instead of complaining about problems, implement solutions!

Speaking of which, i'm heaing off to get some beer! Have a good weekend! ;)

-Toby

On Fri, 10 Aug 2001, Alan Kennington wrote:

&gt; On Fri, Aug 10, 2001 at 08:26:55PM +0930, Simon Hackett wrote:
&gt; &gt;
&gt; &gt; Be careful what you wish for. I might just do it :)
&gt; &gt;
&gt;
&gt;
&gt; Simon,
&gt;
&gt; Not that I want to make a big thread out of this.
&gt; (We've already had a big heap of long threads this
&gt; year on ADSL.)
&gt; But...  I'll just mention a fine point about budget shapers
&gt; which I amy not have mentioned before.
&gt; The basic algorithm should be:
&gt;
&gt; 1.	If the budget meets my algebraic formula
&gt; 	for max costs over 1hr, 1day, 1 month etc.,
&gt; 	then let the link rip at maximum speed.
&gt; 2.	If any of the "clauses" of my formula
&gt; 	is exceeded, then drop the link down to
&gt; 	33 kbits/sec using a standard token bucket.
&gt;
&gt; This would be trivial (in principle) to implement on a
&gt; simple linux router.
&gt;
&gt; It's still amazing to me that no one does it.
&gt; But as with all of my inventions and innovations,
&gt; I'm a voice in the wilderness until a bunch of US
&gt; companies implement them - and then _they_ get the
&gt; fame and fortune.
&gt;
&gt; Cheers again,
&gt; Alan Kennington.
&gt;

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
