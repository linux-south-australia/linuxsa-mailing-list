<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: Linux 2.4 Nat & Netmeeting" -->
<!-- FromName="'Toby Corkindale'" -->
<!-- FromEmail="tjcorkin@sa.pracom.com.au" -->
<!-- ToName="'Jeremy Ervine'" -->
<!-- ToEmail="omegasys@adam.com.au" -->
<!-- Date="Mon, 20 Aug 2001 10:55:03 +0930 (CST)" -->
<!-- Id="Pine.LNX.4.33.0108201029480.8823-100000@localhost.localdomain" -->
<!-- Reference="000001c127be$525d4bc0$3d01a8c0@corpse.ath.cx" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: Linux 2.4 Nat & Netmeeting</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Toby Corkindale &lt;<I><A HREF="mailto:tjcorkin@sa.pracom.com.au">tjcorkin@sa.pracom.com.au</A></I>&gt;
  To  : Jeremy Ervine &lt;<I><A HREF="mailto:omegasys@adam.com.au">omegasys@adam.com.au</A></I>&gt;
  Date: Mon, 20 Aug 2001 10:55:03 +0930 (CST)
</PRE>
<H1>Re: Linux 2.4 Nat & Netmeeting</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
I don't use netmeeting, but i do use assorted apps on internal boxes which
have similar problems.

The main problem is that your internal machine is masqueraded to the outside
world with the IP of the gateway. Incoming connections to that gateway will
fail to connect, since it isn't expecting them..

Two solutions
1) Get real IPs and disable masquerading. I wouldn't do this, since it is
often expensive, and then you have to worry about security on your internal
boxes more than before.. (although you should anyway, right?...)

2) Get a socks server on the gateway, and tell netmeeting (or other apps) to
use it. Supposedly this is the "right" solution, but the only time i've
tried it, it didn't work for me. Maybe i just wasn't using it right.. who
knows, it was ages ago anyway.

Ok, i lied, there are 3 solutions:

3) Setup iptables to forward a range of ports back to your internal
machines, and on each one configure all your apps to listen for incoming
connections on that range.
I use this method, and it works just fine ;)

Firstly, configure ipv4 to allocate its own sockets from, say, 32000 to
60000.. (this is outbound stuff i believe)
Then, setup ranges of, say, 100 or 1000 ports per internal machine, to be
port-forwarded and masqueraded back to each internal machine.
ie. ports 64001 to 64100 to 10.0.0.2, and 64101 to 64200 to 10.0.0.3, etc...


-Toby

On Sat, 18 Aug 2001, Jeremy Ervine wrote:

&gt; Hi Everyone,
&gt;
&gt; I've just setup a Linux box with a 2.4 kernel doing NAT with net filter,
&gt; and I'm having difficulties with Netmeeting. I can make a call from
&gt; computers on the network, the people who I am making calls to can see
&gt; our images and receive our video, however we cannot see them or receive
&gt; their audio. Other features such as file / application sharing works
&gt; okay, or whiteboard features, however we cannot receive video or sound.
&gt;
&gt; Does anyone have an experience with H323, and can recommend a fix for my
&gt; problem, as well as a system so calls can be made to computers on the
&gt; internal network running netmeeting from external computers.
&gt;
&gt; I have had a look at the phone patch software, www.equival.com.au and it
&gt; appears it does what I want, however it appears to work under 2.4 !
&gt;
&gt; Any help much appreciated.
&gt;
&gt; Jeremy Ervine
&gt;
&gt;

-- 
 Toby Corkindale
 UNIX Developer, Core Tech R&D
 Technology SA, Pracom Ltd
 288 Glen Osmond Road
 Fullarton,	5063
 South Australia
 Tel: +61 8 8202 9075
 Fax: +61 8 8202 9001
 mailto:<A HREF="mailto:Toby.Corkindale@sa.pracom.com.au">Toby.Corkindale@sa.pracom.com.au</A>
 <A HREF="http://www.sa.pracom.com.au/">http://www.sa.pracom.com.au/</A>

                  PRIVILEGED - PRIVATE AND CONFIDENTIAL

   Privileged/Confidential Information may be contained in this message.
   If you are not the addressee indicated in this message, you may not
   copy or deliver this message to anyone.  In such case, you should
   destroy this message and notify the sender by reply email. Opinions,
   conclusions and other information in this message that do not relate
   to the official business of this organisation shall be understood as
   neither given nor endorsed by it.




-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
