<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="zombie shared memory segments??!" -->
<!-- FromName="Alan Kennington" -->
<!-- FromEmail="akenning@dog.topology.org" -->
<!-- ToName="LinuxSA" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Tue, 9 May 2000 06:55:37 +091800" -->
<!-- Id="20000509065537.A30989@dog.topology.org" -->
<!-- Reference="" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: zombie shared memory segments??!</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Alan Kennington &lt;<I><A HREF="mailto:akenning@dog.topology.org">akenning@dog.topology.org</A></I>&gt;
  To  : LinuxSA &lt;<I><A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A></I>&gt;
  Date: Tue, 9 May 2000 06:55:37 +091800
</PRE>
<H1>zombie shared memory segments??!</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
linux/System V IPC experts:

Sorry to harp on about this rather technical topic
(i.e. programming), but....

It's starting to look to me as though when you create a segment
of shared memory in linux, if for any reason you don't get around
to marking the memory as to-be-deleted when the program exits,
then the memory will never be recovered (especially if you don't
know what key was used).

This seems to mean that any program which uses shared memory 
(and "top" indicates that essentially _every_ program does
use shared memory) may, if it exits strangely, cause memory
to be irretrievably lost.

This also means that any ordinary user can just run programs
which gobble up shared memory until it's all gone, thereby
hanging the system.

I can hardly believe that linux (and System V generally)
has been designed with this major vulnerability.

There seems to be no way to makr shared memory to be re-cycled
when no process is using it, without also making the memory
unusable by further process that do want to use it.

My questions:

1.	Is the situation really so chaotic and clumsy
	as it seems to me?

2.	Is there a way of writing software in such a way
	that there is no real likelihood of memory wastage?

It seems to me that shared memory is a bit like the /tmp
file directory. But there at least, there is a trick to
guarantee that files are removed when processes exit,
by deleting them while in use (a clever trick).
In the case of shared memory, the same trick makes
the memory unusable by further processes, which is not
what you want in an Apache server.

Cheers,
Alan Kennington.

===================================================
PS. On the subject of the worm/virus "iloveyou",
what I'd like to know is why people (e.g. reporters)
do not immediately point the finger at Microsoft.
If an engineering company built planes so that a
15-year-old could detach the wings during flight,
or built bridges so that a 15-year-old could make the
whole bridge collapse, then the company would be
sued for negligeance. But if a software company charges
1 trillion dollars for software which is used for
mission-critical applications world-wide, the existence
of a simple mechanism for 15-year-olds to cause
multi-billion-dollar damage is blamed on the kid.
I hope that all you technical experts will be rubbing it in
to less expert people in your neighbourhood
that professionally written software should not 
cause multi-billion dollar damage every time a kid
does a bit of recreational programming on the week-ends.

A lot of commentators have been saying that these viruses
are caused by the Internet, or are an unfortunate by-product
of the communications made possible by Microsoft.
(Yes I did hear this on the radio!) Some people think
that the Internet was created by Microsoft apparently.

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
