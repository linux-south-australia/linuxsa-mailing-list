<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: CUPS & Samba weirdness" -->
<!-- FromName="Glen Turner" -->
<!-- FromEmail="glen.turner@aarnet.edu.au" -->
<!-- ToName="" -->
<!-- ToEmail="philhutton@bigfoot.com" -->
<!-- Date="Wed, 24 May 2000 12:41:03 +0930" -->
<!-- Id="392B4847.226B380E@aarnet.edu.au" -->
<!-- Reference="20000523233039.B1464@odin.fdns.net" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: CUPS & Samba weirdness</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Glen Turner &lt;<I><A HREF="mailto:glen.turner@aarnet.edu.au">glen.turner@aarnet.edu.au</A></I>&gt;
  To  : <A HREF="mailto:philhutton@bigfoot.com">philhutton@bigfoot.com</A>
  Date: Wed, 24 May 2000 12:41:03 +0930
</PRE>
<H1>Re: CUPS & Samba weirdness</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Phil Hutton wrote:
&gt; 
&gt; That works fairly well, except for one problem.  CUPS gets the number of pages
&gt; in the document from the %%Pages: line in the postscript.  And Windows NT seems
&gt; to have a habit of setting the pagecount to 1.  Intermittently.  And some of the
&gt; users (may) have worked out that they can print to a postscript file, change the
&gt; %%Pages line from 75 to 1 and use lpr to print the file, getting charged for
&gt; only 1 page.

See the solution I hacked out with years ago in Public Line Printer
(I've forgotten the abbreviation).

Essentially, PostScript is duplex (you can send to the printer, but it
can also send to you). And the printer has a non-subvertable
page counter in NVRAM.  So you can read that counter before and
after printing the job.

All this is done in the printing daemon, where printer-dependent
gumpth belongs (your current method doesn't stop an application
that directly uses the LPD protocol rather than calling lpr).

Now you are not relying on a document adhering to the Document
Structuring Conventions.  Nor do you have to do PostScript
interpretation and read the number of times "showpage" is called
before printing the job.  I've seen printing systems that do
both, and neither is pretty.

-- 
 Glen Turner                                 Network Engineer
 (08) 8303 3936      Australian Academic and Research Network
 <A HREF="mailto:glen.turner@aarnet.edu.au">glen.turner@aarnet.edu.au</A>          <A HREF="http://www.aarnet.edu.au/">http://www.aarnet.edu.au/</A>
--
 Earth is a single point of failure

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
