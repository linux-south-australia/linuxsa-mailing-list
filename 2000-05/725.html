<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: Squid and accountability" -->
<!-- FromName="Andrew Speer" -->
<!-- FromEmail="andrew.speer@isolutions.com.au" -->
<!-- ToName="Sam Silvester <sam@quadlink.pineview.net>, LinuxSA Mailing List" -->
<!-- ToEmail="sam@quadlink.pineview.net" -->
<!-- Date="Thu, 25 May 2000 20:56:39 +0930" -->
<!-- Id="" -->
<!-- Reference="Pine.LNX.4.10.10005242244210.9533-100000@phydeaux.quadlink.pineview.net" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: Squid and accountability</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Andrew Speer &lt;<I><A HREF="mailto:andrew.speer@isolutions.com.au">andrew.speer@isolutions.com.au</A></I>&gt;
  To  : Sam Silvester &lt;sam@quadlink.pineview.net&gt;, LinuxSA Mailing List &lt;<I><A HREF="mailto:sam@quadlink.pineview.net">sam@quadlink.pineview.net</A></I>&gt;
  Date: Thu, 25 May 2000 20:56:39 +0930
</PRE>
<H1>Re: Squid and accountability</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
----- Original Message -----
From: Sam Silvester &lt;<A HREF="mailto:sam@quadlink.pineview.net">sam@quadlink.pineview.net</A>&gt;
To: LinuxSA Mailing List &lt;<A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A>&gt;
Sent: Wednesday, May 24, 2000 10:48 PM
Subject: Squid and accountability


&gt; Hi all,
&gt;
&gt; I am looking for a way to track the web usage of the users on my network.
&gt; Ideally I want something that asks for a username/password before allowing
&gt; access. I don't really want to limit anything as yet, I just want to be
&gt; able to find out which users are churning through the bandwidth.
&gt;
&gt; Can this be done through Squid or do I need to add another program?
&gt;

Squid has the inbuilt ability to authenticate users, but uses a "helper"
program to do the actual work. Once authenticated each request is logged
with time, URL and user ident etc.

It is possible to get the helper program to authenticate through PAM, or it
can just use and NCSA type password file.

You can then use Squid Log Analyser programs to suck in those logs and do
various reports. There are several popular programs that can be found at:

<A HREF="http://www.squid-cache.org/Scripts/">http://www.squid-cache.org/Scripts/</A>

including one called "sqmgrlog" that generates per-user reports when used
with an authenticating proxy. It is quite good, but relatively inflexible.

It looks through the log file, then generates heaps of static HTML files
giving the usage per user, per domain, per date etc over the duration of
that particular log file. They are "drill down", but only to a certain
extent.

There are several others mentioned on the above site, but a superficial
examination showed that most are not really user accounting oriented. Please
let me know if you find a better tool than "sqmgrlog".

I ended up writing my own dynamic log analysis tool that reads the squid
proxy into a SQL database, then uses varous queries to get summary data,
top "x" users and domains for the month/day etc, and allows you to drill
down right down to the raw log entries, eg User "Bob Smith" -&gt; Date
"2000/04/02" -&gt; Domain -&gt;"yahoo.com" shows all the requests made to
yahoo.com by that user on that day.

This works for me, but may be overkill for you. It also has disadvantages in
that the log file database can grow quite large, quite quickly. I discard
detail after a while and keep the summary info, but it still needs quite a
powerful machine.

Regards,


Andrew Speer


-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
