<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="RedHat6.x,PPP,delayedping,buzzingmodem,disconnections" -->
<!-- FromName="Jordan" -->
<!-- FromEmail="linuxsa@madaz.com" -->
<!-- ToName="LinuxSA" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Mon, 8 May 2000 12:53:51 +0930" -->
<!-- Id="004701bfb89c$d5568790$2700a8c0@jordan" -->
<!-- Reference="" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: RedHat6.x,PPP,delayedping,buzzingmodem,disconnections</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Jordan &lt;<I><A HREF="mailto:linuxsa@madaz.com">linuxsa@madaz.com</A></I>&gt;
  To  : LinuxSA &lt;<I><A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A></I>&gt;
  Date: Mon, 8 May 2000 12:53:51 +0930
</PRE>
<H1>RedHat6.x,PPP,delayedping,buzzingmodem,disconnections</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Help!

brief:  weird ping time problems, disconnections and painfully slow browsing
on RedHat 6.1/6.2 box.

We had a RedHat 5.2 internet server running smoothly on a P133 some time ago
(running squid, fetch/sendmail - nothing fancy) and decided to upgrade to
6.1 so we could use ipchains.  Since then we have had odd connection
problems which we have now been struggling for a couple of months to
resolve - crappy ping times to our own DNS, painful web browsing (most of
the time) strange clicking sounds coming from the modem (only from Netcomm
Roadsters and only when data is being transferred)... Several disconnections
per day... We're almost at the point now of going back to 5.2 and making do
without ipchains.  I will try to provide some useful info:

Old system:
RedHat 5.2
P133, PCI m/b with 16550A uarts
Squid, fetchmail, sendmail
Worked fine.

Ran 6.1 upgrade
Upgraded h'ware to 200MMX, Epox AGP m/b
Squid, fetchmail, sendmail, ipchains
Worked, except:  Browsing was painfully slow.
ping times to our Camtech DNS (yielded similar result direct from our server
or through workstation/ipchains)

64 bytes from goliath.camtech.net.au (203.5.73.2): icmp_seq=29 ttl=251
time=130.
2 ms
64 bytes from goliath.camtech.net.au (203.5.73.2): icmp_seq=30 ttl=251
time=140.
1 ms
64 bytes from goliath.camtech.net.au (203.5.73.2): icmp_seq=31 ttl=251
time=290.
0 ms
64 bytes from goliath.camtech.net.au (203.5.73.2): icmp_seq=32 ttl=251
time=170.
0 ms
64 bytes from goliath.camtech.net.au (203.5.73.2): icmp_seq=33 ttl=251
time=170.
0 ms
64 bytes from goliath.camtech.net.au (203.5.73.2): icmp_seq=34 ttl=251
time=140.
0 ms
64 bytes from goliath.camtech.net.au (203.5.73.2): icmp_seq=35 ttl=251
time=170.
0 ms
64 bytes from goliath.camtech.net.au (203.5.73.2): icmp_seq=36 ttl=251
time=150.
1 ms
64 bytes from goliath.camtech.net.au (203.5.73.2): icmp_seq=37 ttl=251
time=150.
0 ms
64 bytes from goliath.camtech.net.au (203.5.73.2): icmp_seq=38 ttl=251
time=150.
0 ms

At this point, the pings would stop and after about 9 seconds (funnily
enough) the following would flood in.

64 bytes from goliath.camtech.net.au (203.5.73.2): icmp_seq=39 ttl=251
time=9191
.0 ms
64 bytes from goliath.camtech.net.au (203.5.73.2): icmp_seq=40 ttl=251
time=8350
.8 ms
64 bytes from goliath.camtech.net.au (203.5.73.2): icmp_seq=41 ttl=251
time=7500
.8 ms
64 bytes from goliath.camtech.net.au (203.5.73.2): icmp_seq=42 ttl=251
time=6660
.8 ms
64 bytes from goliath.camtech.net.au (203.5.73.2): icmp_seq=43 ttl=251
time=5830
.7 ms
64 bytes from goliath.camtech.net.au (203.5.73.2): icmp_seq=44 ttl=251
time=4981
.1 ms
64 bytes from goliath.camtech.net.au (203.5.73.2): icmp_seq=45 ttl=251
time=4141
.0 ms
64 bytes from goliath.camtech.net.au (203.5.73.2): icmp_seq=46 ttl=251
time=3310
.8 ms
64 bytes from goliath.camtech.net.au (203.5.73.2): icmp_seq=47 ttl=251
time=2460
.7 ms
64 bytes from goliath.camtech.net.au (203.5.73.2): icmp_seq=48 ttl=251
time=1620
.9 ms
64 bytes from goliath.camtech.net.au (203.5.73.2): icmp_seq=49 ttl=251
time=780.
8 ms
64 bytes from goliath.camtech.net.au (203.5.73.2): icmp_seq=50 ttl=251
time=150.
2 ms
64 bytes from goliath.camtech.net.au (203.5.73.2): icmp_seq=51 ttl=251
time=150.
1 ms
64 bytes from goliath.camtech.net.au (203.5.73.2): icmp_seq=52 ttl=251
time=140.
2 ms
64 bytes from goliath.camtech.net.au (203.5.73.2): icmp_seq=53 ttl=251
time=140.
2 ms
64 bytes from goliath.camtech.net.au (203.5.73.2): icmp_seq=54 ttl=251
time=150.
1 ms
64 bytes from goliath.camtech.net.au (203.5.73.2): icmp_seq=55 ttl=251
time=140.
2 ms
64 bytes from goliath.camtech.net.au (203.5.73.2): icmp_seq=56 ttl=251
time=150.
1 ms
64 bytes from goliath.camtech.net.au (203.5.73.2): icmp_seq=57 ttl=251
time=140.
1 ms
64 bytes from goliath.camtech.net.au (203.5.73.2): icmp_seq=58 ttl=251
time=150.
1 ms

--- 203.5.73.2 ping statistics ---
60 packets transmitted, 59 packets received, 1% packet loss
round-trip min/avg/max = 130.2/1062.5/9191.0 ms

Since then:
We have tried putting the older hardware (which was working) back with the
new redhat installation.  Same problems.
We have done fresh installations of RedHat 6.1 and RedHat 6.2.  Same
problems.
We have tried a different phone line.  Same problems.
We have checked the serial HOWTO and tried polling irq0 as suggested.  Same
problems
We have swapped the modem.  We have tried a modem of a different brand (2
Netcomm Roadster II 56k ext and 1 Discovery 56k ext.).  Same problems.
I have scoured linux pages and search engines for others with the same
problem.  I am slightly more insane than I was before.


Are these ok?

-- snip
Serial driver version 4.27 with MANY_PORTS MULTIPORT SHARE_IRQ enabled
ttyS00 at 0x03f8 (irq = 4) is a 16550A
ttyS01 at 0x02f8 (irq = 3) is a 16550A
-- snip

Results of dmesg

Linux version 2.2.14-5.0 (<A HREF="mailto:root@porky.devel.redhat.com">root@porky.devel.redhat.com</A>) (gcc version
egcs-2.91.66
 19990314/Linux (egcs-1.1.2 release)) #1 Tue Mar 7 20:53:41 EST 2000
Detected 99657128 Hz processor.
Console: colour VGA+ 80x25
Calibrating delay loop... 39.73 BogoMIPS
Memory: 14348k/16384k available (1084k kernel code, 412k reserved, 476k
data, 64
k init, 0k bigmem)
Dentry hash table entries: 262144 (order 9, 2048k)
Buffer cache hash table entries: 16384 (order 4, 64k)
Page cache hash table entries: 4096 (order 2, 16k)
VFS: Diskquotas version dquot_6.4.0 initialized
CPU: Intel Pentium 75 - 200 stepping 0c
Checking 386/387 coupling... OK, FPU using exception 16 error reporting.
Checking 'hlt' instruction... OK.
Intel Pentium with F0 0F bug - workaround enabled.
POSIX conformance testing by UNIFIX
PCI: PCI BIOS revision 2.10 entry at 0xfb0d0
PCI: Using configuration type 1
PCI: Probing PCI hardware
Linux NET4.0 for Linux 2.2
Based upon Swansea University Computer Society NET3.039
NET4: Unix domain sockets 1.0 for Linux NET4.0.
NET4: Linux TCP/IP 1.0 for NET4.0
IP Protocols: ICMP, UDP, TCP, IGMP
TCP: Hash tables configured (ehash 16384 bhash 16384)
Initializing RT netlink socket
Starting kswapd v 1.5
Detected PS/2 Mouse Port.
Serial driver version 4.27 with MANY_PORTS MULTIPORT SHARE_IRQ enabled
ttyS00 at 0x03f8 (irq = 4) is a 16550A
ttyS01 at 0x02f8 (irq = 3) is a 16550A
pty: 256 Unix98 ptys configured
apm: BIOS version 1.1 Flags 0x07 (Driver version 1.9)
Real Time Clock Driver v1.09
RAM disk driver initialized:  16 RAM disks of 4096K size
PIIX: IDE controller on PCI bus 00 dev 38
PIIX: not 100% native mode: will probe irqs later
PIIX: neither IDE port enabled (BIOS)
PIIX: IDE controller on PCI bus 00 dev 39
PIIX: not 100% native mode: will probe irqs later
    ide0: BM-DMA at 0x3000-0x3007, BIOS settings: hda:pio, hdb:pio
    ide1: BM-DMA at 0x3008-0x300f, BIOS settings: hdc:pio, hdd:pio
hda: Conner Peripherals 850MB - CFS850A, ATA DISK drive
hdd: FX600S, ATAPI CDROM drive
ide0 at 0x1f0-0x1f7,0x3f6 on irq 14
ide1 at 0x170-0x177,0x376 on irq 15
hda: Conner Peripherals 850MB - CFS850A, 812MB w/64kB Cache, CHS=825/32/63
hdd: ATAPI 6X CD-ROM drive, 256kB Cache
Uniform CDROM driver Revision: 2.56
Floppy drive(s): fd0 is 1.44M
FDC 0 is an 8272A
md driver 0.90.0 MAX_MD_DEVS=256, MAX_REAL=12
raid5: measuring checksumming speed
   8regs     :   104.775 MB/sec
   32regs    :    76.962 MB/sec
using fastest function: 8regs (104.775 MB/sec)
scsi : 0 hosts.
scsi : detected total.
md.c: sizeof(mdp_super_t) = 4096
Partition check:
 hda: hda1 hda2 &lt; hda5 &gt;
autodetecting RAID arrays
autorun ...
... autorun DONE.
VFS: Mounted root (ext2 filesystem) readonly.
Freeing unused kernel memory: 64k freed
Adding Swap: 63468k swap-space (priority -1)
ne.c:v1.10 9/23/94 Donald Becker (<A HREF="mailto:becker@cesdis.gsfc.nasa.gov">becker@cesdis.gsfc.nasa.gov</A>)
NE*000 ethercard probe at 0x300: 00 40 c7 0a 7c d2
eth0: NE2000 found at 0x300, using IRQ 5.
CSLIP: code copyright 1989 Regents of the University of California
PPP: version 2.3.7 (demand dialling)
PPP line discipline registered.

Please let me know what other information I should be providing.

ps:  I just shifted the modem and the "ticking sound" stopped.  Still
getting similar ping times.  I don't think this is a problem with the
individual modem, another Roadster did it.  The discovery modem never did.
I have tried diffferent cables, still have dodgy ping times and
disconnections.

My humble thanks in advance,

--
Jordan
<A HREF="mailto:jordan@compunets.com.au">jordan@compunets.com.au</A> (9-5)
<A HREF="mailto:j@madaz.com">j@madaz.com</A> (a/h)
ICQ: 69769063 (9-5)
ICQ: 7322110 (a/h)

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
