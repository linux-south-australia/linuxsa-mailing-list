<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="PAM Winbind" -->
<!-- FromName="'Adam Smith'" -->
<!-- FromEmail="adam.smith@sageautomation.com" -->
<!-- ToName="'LinuxSA'" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Thu, 8 May 2003 13:44:26 +0930" -->
<!-- Id="20030508041426.GA33985@sageautomation.com" -->
<!-- Reference="" -->
<!-- X-Face="$vsV$1FNbZN\JVpjV#&+/!oVW`Kw$j?w_,te\SS}(tKD21c+l$t%\RCS(r$G;XXk]6,(!N:&(N3EV0bY`3):UrgG7'*qsj3l.75IaHV1<`i*{[L\:F*l6fH##C:-p2]xW/R-Z:!bo;5g3GP-{I{}7O>tN}`Xm/=-:8NG?f-r'$Qc3y[aW-7'W_S<`KYU!_;`7K=kuC$-.7J2*kk=~`c@ADp+xhsv(!a@eW-R_5wtx+tC)(]%W+" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: PAM Winbind</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Adam Smith &lt;<I><A HREF="mailto:adam.smith@sageautomation.com">adam.smith@sageautomation.com</A></I>&gt;
  To  : LinuxSA &lt;<I><A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A></I>&gt;
  Date: Thu, 8 May 2003 13:44:26 +0930
</PRE>
<H1>PAM Winbind</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
I'm trying to get a Red Hat 7.3 box to authenticate against an NT4 Domain,
with little success so far.

So far I have:

1)  Configured Samba 2.2.3 (yes, it needs upgrading...)

2)  Joined the system to the domain

3)  Loaded winbindd

4)  Ran 'getent passwd' which returned both the local accounts and the
domain accounts;  the domain accounts being in the format of SAGE\username

5)  Edited /etc/pam.d/login

Now here's the tricky parts.  I've got a better understanding of the way
PAM works now, but still can't get it to work correctly.

Examples for systems are all different when I search on Google, and I'm at
a loss as to what this file should now look like.

---/etc/pam.d/login---
----------------------
auth       required     /lib/security/pam_securetty.so
auth       required     /lib/security/pam_stack.so service=system-auth
auth   	   sufficient   /lib/security/pam_winbind.so
auth       required     /lib/security/pam_nologin.so
account    required     /lib/security/pam_stack.so service=system-auth
password   required     /lib/security/pam_stack.so service=system-auth
session    required     /lib/security/pam_stack.so service=system-auth
session    optional     /lib/security/pam_console.so

----------------------
The line for pam_winbind.so is where I think it is supposed to
exist.  I'm sure this is not correct, otherwise it would be working, right?
:)

5)  I have tried logging in, getting prompted twice for a password and then
denied access.   I don't appear to be getting anything in
/var/log/messages, either.

I got a FreeBSD 5 system running as a Samba server with authentication (but
hadn't tried getting SSH to authenticate yet.)  I figured I was going
fairly well until this little beastie cropped up on me.

What should the login file look like?

-- 
Adam Smith
Information Technology Officer
SAGE Automation Ltd.

<A HREF="mailto:adam.smith@sageautomation.com">adam.smith@sageautomation.com</A>
<A HREF="http://www.sageautomation.com">http://www.sageautomation.com</A>

"Just a friendly wave each morning.."
    - Neighbours

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A> IRC: #linuxsa on irc.freenode.net
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
