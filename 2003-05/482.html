<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: IP identifier field for linux UDP/IP equals zero??!" -->
<!-- FromName="'Alan Kennington'" -->
<!-- FromEmail="ak.linuxsa@topology.org" -->
<!-- ToName="'LinuxSA'" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Thu, 15 May 2003 10:47:24 +0930" -->
<!-- Id="20030515104724.C4065@dog.topology.org" -->
<!-- Reference="003001c31a7a$a790c1c0$020120ac@skink" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: IP identifier field for linux UDP/IP equals zero??!</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Alan Kennington &lt;<I><A HREF="mailto:ak.linuxsa@topology.org">ak.linuxsa@topology.org</A></I>&gt;
  To  : LinuxSA &lt;<I><A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A></I>&gt;
  Date: Thu, 15 May 2003 10:47:24 +0930
</PRE>
<H1>Re: IP identifier field for linux UDP/IP equals zero??!</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
On Thu, May 15, 2003 at 10:10:55AM +0930, Richard Russell wrote:
&gt; &gt; 
&gt; &gt; handshakes. In the linux case, this makes another IETF 
&gt; &gt; protocol work at 50% efficiency because of the zero ID fields.
&gt; 
&gt; That would, be bad, if it were the case. However, I don't think it is
&gt; the case.

Richard,

It _is_ the case.

&gt; &gt; Nope. It isn't "convenient" for my application. It's assumed 
&gt; &gt; by another, more recent RFC.
&gt; 
&gt; which one, and where?

It's RFC 3095. 
<A HREF="http://www.rfc-editor.org/rfc/rfc3095.txt">http://www.rfc-editor.org/rfc/rfc3095.txt</A>
(By the way, I was using the word "application" to mean "use" rather than
"applications software". English is such an ambiguous language.... ) 
IP header compression over 3G networks will work
at 50% efficiency for all linux-originating voice/IP and video/IP
traffic for the lifetime of 3G networks, because RFC 3095 is being
implemented by the vendors for header compression over 3G.

Sooner or later it will come out into the open that the linux OS
has an inefficient interaction with voice and video over 3G (and 2.5G)
networks. Eventually, the linux kernel people will feel the pressure and
they will put back the varying IP ID fields as they no doubt used to be before
some bright spark removed them.  (I'm making assumptions here.)

&gt; So why do you need a unique ID field? If they are set as DF, then you
&gt; can tell which packets are which by the very fact that they aren't
&gt; fragmented. What else are you using the ID field for?

See RFC 3095, page 75.
It's very technical indeed to explain the 50% factor in detail.
But briefly, RFC 3095 reduces the IP/UDP/RTP header on all
voice and video traffic from typically 40 bytes down to 1 or 2 bytes
most of the time. With linux IP/UDP/RTP headers, that will be 3 or 4 bytes
because a constant ID field can't be compressed. 
That's because of a clever compression algorithm which exploits the
fact that the ID field increases by 1 per packet in most OSs.
It just didn't occur to the RFC 3095 standards people that anyone would
use constant ID values. So they didn't cater for that possibility.
Once again, it's technical to exlain...

Dozens or hundreds of implementors and designers from the world's
mobile phone companies designed RFC 3095 on the assumption that
all UDP/IP packets would probably increment their ID fields
by one for each packet.
Obviously they interpreted RFC 791 differently to linux developers.
Even working in cooperation with other IETF groups for a couple of
years, they never came to the same conclusion as the implementors
of the linux UDP/IP stack.
But it's easier to change linux (hopefully before 2.6.0) than
to change an RFC and all of the implementations in mobile phones of
RFC 3095, because all 3G phones are going to implement this RFC.

Cheers,
Alan Kennington.

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A> IRC: #linuxsa on irc.freenode.net
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
