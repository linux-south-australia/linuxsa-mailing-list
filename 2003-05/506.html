<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: IP identifier field for linux UDP/IP equals zero??!" -->
<!-- FromName="'James Leone'" -->
<!-- FromEmail="linuxcpa@netscape.net" -->
<!-- ToName="" -->
<!-- ToEmail="mmc@mmc.com.au" -->
<!-- Date="Wed, 14 May 2003 22:55:32 -0700" -->
<!-- Id="3EC32BD4.7080001@netscape.net" -->
<!-- Reference="Pine.LNX.4.44.0305150912480.14383-100000@tsunami.mmc.com.au" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: IP identifier field for linux UDP/IP equals zero??!</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: James Leone &lt;<I><A HREF="mailto:linuxcpa@netscape.net">linuxcpa@netscape.net</A></I>&gt;
  To  : &lt;<I><A HREF="mailto:mmc@mmc.com.au">mmc@mmc.com.au</A></I>&gt;
  Date: Wed, 14 May 2003 22:55:32 -0700
</PRE>
<H1>Re: IP identifier field for linux UDP/IP equals zero??!</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Hi there,

Well, my goal is to understand the technical aspects of thread in one 
year's time. :-D

James Leone

<A HREF="mailto:mmc@mmc.com.au">mmc@mmc.com.au</A> wrote:

&gt;Alan,
&gt;You're a programmer - You've got the source.
&gt;
&gt;Rewrite it to your hearts content and then submit it to Linus or one of his 
&gt;deputies.
&gt;
&gt;There's no "officialness" about the LK - you should know this already.  
&gt;
&gt;
&gt;  
&gt;
&gt;&gt;RFC 791, pages 8, doesn't seem to agree:
&gt;&gt;    
&gt;&gt;
&gt;
&gt;Selective quoting by you Alan.  Previous paragraph:
&gt;
&gt;
&gt;The internet fragmentation and reassembly procedure needs to be able
&gt;    to break a datagram into an almost arbitrary number of pieces that
&gt;    can be later reassembled.  The receiver of the fragments uses the
&gt;    identification field to ensure that fragments of different datagrams
&gt;    are not mixed.  The fragment offset field tells the receiver the
&gt;    position of a fragment in the original datagram.  The fragment
&gt;    offset and length determine the portion of the original datagram
&gt;    covered by this fragment.  The more-fragments flag indicates (by
&gt;    being reset) the last fragment.  These fields provide sufficient
&gt;    information to reassemble datagrams.
&gt;
&gt;Which says exactly that the id field is for fragments only.
&gt;
&gt;MMC 
&gt;
&gt;
&gt;  
&gt;
&gt;&gt;===========================================
&gt;&gt;The originating protocol module of
&gt;&gt;    an internet datagram sets the identification field to a value that
&gt;&gt;    must be unique for that source-destination pair and protocol for the
&gt;&gt;    time the datagram will be active in the internet system.
&gt;&gt;===========================================
&gt;&gt;
&gt;&gt;Some humans have also informed me in the last hour that in fact
&gt;&gt;the linux implementation does contradict RFC 791.
&gt;&gt;There is no indication that I can find in RFC 791 that an exception
&gt;&gt;to the rule is made for packets with the DF bit set.
&gt;&gt;
&gt;&gt;You're right about the stated purpose of the ID field.
&gt;&gt;However, when someone writes a spec and people implement that spec,
&gt;&gt;then other people who write other specs assuming that everyone will
&gt;&gt;implement the IP protocol according to the spec, it's very inconvenient
&gt;&gt;when someone chooses to break the spec for all machine using
&gt;&gt;a particular operating system, in this case linux.
&gt;&gt;That's what's happened in this case. It's an embarrassment that
&gt;&gt;linux has acted on the assumption that the RFC can be improved upon,
&gt;&gt;in the just the same way that MS-Windows "improves" TCP 3-way handshakes
&gt;&gt;to 1-way handshakes.
&gt;&gt;In the linux case, this makes another IETF protocol work at 50% efficiency
&gt;&gt;because of the zero ID fields.
&gt;&gt;
&gt;&gt;    
&gt;&gt;
&gt;&gt;&gt;While I'm sure it'd be convenient for your application if the standard
&gt;&gt;&gt;required more from the Identification field, it actually doesn't.  It's
&gt;&gt;&gt;possible that some TCP/IP stacks set it on every IP packet, but they're
&gt;&gt;&gt;going above and beyond the requirements of the TCP/IP spec in doing so.
&gt;&gt;&gt;      
&gt;&gt;&gt;
&gt;&gt;Nope. It isn't "convenient" for my application. It's assumed by
&gt;&gt;another, more recent RFC.
&gt;&gt;
&gt;&gt;    
&gt;&gt;
&gt;&gt;&gt; &gt; Does anyone out there happen to know if there is some official
&gt;&gt;&gt; &gt; excuse for why linux doesn't seem to do quite the right thing here?
&gt;&gt;&gt;
&gt;&gt;&gt;You're making assumptions again :-)
&gt;&gt;&gt;      
&gt;&gt;&gt;
&gt;&gt;Everybody makes assumptions. Some assumptions are correct, and some are not.
&gt;&gt;You can't function without assumptions in a complex world.
&gt;&gt;And notice that little word "seems". That's not an assumption, is it.
&gt;&gt;
&gt;&gt;    
&gt;&gt;
&gt;&gt;&gt;Incidentally, you're probably seeing lots of packets with the DF bit set
&gt;&gt;&gt;because the IP stack is attempting to use Path MTU discovery (RFC 1191,
&gt;&gt;&gt;<A HREF="ftp://ftp.rfc-editor.org/in-notes/rfc1191.txt">ftp://ftp.rfc-editor.org/in-notes/rfc1191.txt</A> )
&gt;&gt;&gt;      
&gt;&gt;&gt;
&gt;&gt;Nope. It's because I'm running "ohphone" to generate voice RTP packets,
&gt;&gt;which all use DF.
&gt;&gt;They're coming out every 80 mSec, although I can set it to 20 mSec.
&gt;&gt;This is less than the 
&gt;&gt;"time the datagram will be active in the internet system"
&gt;&gt;for even my 19200 bits/sec null modem in the lab.
&gt;&gt;
&gt;&gt;Cheers,
&gt;&gt;Alan Kennington.
&gt;&gt;
&gt;&gt;
&gt;&gt;    
&gt;&gt;
&gt;
&gt;  
&gt;

-- 
Your favorite stores, helpful shopping tools and great gift ideas. 
Experience the convenience of buying online with <A HREF="mailto:Shop@Netscape">Shop@Netscape</A>! 
<A HREF="http://shopnow.netscape.com/">http://shopnow.netscape.com/</A>


-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A> IRC: #linuxsa on irc.freenode.net
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
