<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: NVidia driver pain" -->
<!-- FromName="'Barney Wrightson'" -->
<!-- FromEmail="barney.wrightson@dsto.defence.gov.au" -->
<!-- ToName="" -->
<!-- ToEmail="davidcr@senet.com.au" -->
<!-- Date="Tue, 20 May 2003 10:03:58 +0930" -->
<!-- Id="3EC977F6.1080708@dsto.defence.gov.au" -->
<!-- Reference="200305191403.49941.davidcr@senet.com.au" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: NVidia driver pain</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Barney Wrightson &lt;<I><A HREF="mailto:barney.wrightson@dsto.defence.gov.au">barney.wrightson@dsto.defence.gov.au</A></I>&gt;
  To  : &lt;<I><A HREF="mailto:davidcr@senet.com.au">davidcr@senet.com.au</A></I>&gt;
  Date: Tue, 20 May 2003 10:03:58 +0930
</PRE>
<H1>Re: NVidia driver pain</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
David Creed wrote:

&gt; -----BEGIN PGP SIGNED MESSAGE-----
&gt; Hash: SHA1
&gt; 
&gt; Hi list, I'm just trying to install Nvidia drivers on Debian/Knoppix Unstable 
&gt; and coming up against problems.
&gt; kernel is standard Debian
&gt; <A HREF="mailto:root@ferret">root@ferret</A>:/usr/src# uname -r
&gt; 2.4.20-1-k7
&gt; 
&gt; I tried to install Nvidia drivers version NVIDIA-Linux-x86-1.0-4349.run
&gt; and found I needed to install source code for 2.4.20, did this, unzipped and 
&gt; untarred it, pointed /usr/src/linux at kernel-source-2.4.20 and re ran the 
&gt; Nvidia installer.
&gt; Next problem was a message saying /usr/src/linux/include/linux/modversions.h 
&gt; didn't exist, I had a look and there was a modsetver.h, so I did 
&gt; ln -s modsetver.h modversions.h
&gt; that seemed to satisfy things until on my next attempt to install I got errors 
&gt; about different versions of compilers used to compile my kernel and being 
&gt; used to compile the Nvidia driver and that I should investigate 
&gt; IGNORE_CC_MISMATCH, so my next move was to
&gt; export IGNORE_CC_MISMATCH=yes
&gt; Now it get's beyond my level of skills and exits with (to me anyway) obsure 
&gt; messages about "conflicting types for `kernel_thread'" which means nothing to 
&gt; me.
&gt; I'm hoping someone can help me with this, as it's bloody frustrating.
&gt; I've attached the /var/log/nvidia-installer.log file for referance.
&gt; 
&gt; Thanks in advance,
&gt; David Creed

David,
	Having gone through this process myself (using vanilla debian 
unstable), I think I can get you though it :) The fixes to your problems 
are these:

1. You need the setup that was used to build your current kernel, so 
what you need to do is "apt-get install kernel-headers-2.4.20-1-k7" 
which will have the config and modversions.h that were used to build 
your current kernel. You don't even need the full source once you do 
this. I think it sticks it in /usr/src/kernel-headers-2.4.20-1-k7 or 
something like that.

2. To fix the CC mismatch you'll need to set the version of CC to the 
same one the kernel used, which I would guess is 2.95, while the default 
installed version is probably 3.2. To do this, before building do 
"export CC=/usr/bin/gcc-2.95" make sure that /usr/bin/gcc-2.95 exists - 
I might have the filename wrong, or it might need to be installed - but 
you get the idea.

If you want to keep things debianised - It might pay to use the packaged 
version of the drivers and follow the README.Debian files in 
/usr/share/doc/&lt;package_name&gt; on how to build them "the debian way". It 
is pretty straightforward once you get used to it.

HTH
Barney

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A> IRC: #linuxsa on irc.freenode.net
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
