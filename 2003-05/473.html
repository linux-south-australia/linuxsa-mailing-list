<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: IP identifier field for linux UDP/IP equals zero??!" -->
<!-- FromName="'Matthew Moyle-Croft'" -->
<!-- FromEmail="mmc@mmc.com.au" -->
<!-- ToName="'Alan Kennington'" -->
<!-- ToEmail="ak.linuxsa@topology.org" -->
<!-- Date="Thu, 15 May 2003 09:29:47 +0930 (CST)" -->
<!-- Id="Pine.LNX.4.44.0305150912480.14383-100000@tsunami.mmc.com.au" -->
<!-- Reference="20030515090325.A3775@dog.topology.org" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: IP identifier field for linux UDP/IP equals zero??!</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Matthew Moyle-Croft &lt;<I><A HREF="mailto:mmc@mmc.com.au">mmc@mmc.com.au</A></I>&gt;
  To  : Alan Kennington &lt;<I><A HREF="mailto:ak.linuxsa@topology.org">ak.linuxsa@topology.org</A></I>&gt;
  Date: Thu, 15 May 2003 09:29:47 +0930 (CST)
</PRE>
<H1>Re: IP identifier field for linux UDP/IP equals zero??!</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Alan,
You're a programmer - You've got the source.

Rewrite it to your hearts content and then submit it to Linus or one of his 
deputies.

There's no "officialness" about the LK - you should know this already.  


&gt; RFC 791, pages 8, doesn't seem to agree:

Selective quoting by you Alan.  Previous paragraph:


The internet fragmentation and reassembly procedure needs to be able
    to break a datagram into an almost arbitrary number of pieces that
    can be later reassembled.  The receiver of the fragments uses the
    identification field to ensure that fragments of different datagrams
    are not mixed.  The fragment offset field tells the receiver the
    position of a fragment in the original datagram.  The fragment
    offset and length determine the portion of the original datagram
    covered by this fragment.  The more-fragments flag indicates (by
    being reset) the last fragment.  These fields provide sufficient
    information to reassemble datagrams.

Which says exactly that the id field is for fragments only.

MMC 


&gt; 
&gt; ===========================================
&gt; The originating protocol module of
&gt;     an internet datagram sets the identification field to a value that
&gt;     must be unique for that source-destination pair and protocol for the
&gt;     time the datagram will be active in the internet system.
&gt; ===========================================
&gt; 
&gt; Some humans have also informed me in the last hour that in fact
&gt; the linux implementation does contradict RFC 791.
&gt; There is no indication that I can find in RFC 791 that an exception
&gt; to the rule is made for packets with the DF bit set.
&gt; 
&gt; You're right about the stated purpose of the ID field.
&gt; However, when someone writes a spec and people implement that spec,
&gt; then other people who write other specs assuming that everyone will
&gt; implement the IP protocol according to the spec, it's very inconvenient
&gt; when someone chooses to break the spec for all machine using
&gt; a particular operating system, in this case linux.
&gt; That's what's happened in this case. It's an embarrassment that
&gt; linux has acted on the assumption that the RFC can be improved upon,
&gt; in the just the same way that MS-Windows "improves" TCP 3-way handshakes
&gt; to 1-way handshakes.
&gt; In the linux case, this makes another IETF protocol work at 50% efficiency
&gt; because of the zero ID fields.
&gt; 
&gt; &gt; While I'm sure it'd be convenient for your application if the standard
&gt; &gt; required more from the Identification field, it actually doesn't.  It's
&gt; &gt; possible that some TCP/IP stacks set it on every IP packet, but they're
&gt; &gt; going above and beyond the requirements of the TCP/IP spec in doing so.
&gt; 
&gt; Nope. It isn't "convenient" for my application. It's assumed by
&gt; another, more recent RFC.
&gt; 
&gt; &gt;  &gt; Does anyone out there happen to know if there is some official
&gt; &gt;  &gt; excuse for why linux doesn't seem to do quite the right thing here?
&gt; &gt; 
&gt; &gt; You're making assumptions again :-)
&gt; 
&gt; Everybody makes assumptions. Some assumptions are correct, and some are not.
&gt; You can't function without assumptions in a complex world.
&gt; And notice that little word "seems". That's not an assumption, is it.
&gt; 
&gt; &gt; Incidentally, you're probably seeing lots of packets with the DF bit set
&gt; &gt; because the IP stack is attempting to use Path MTU discovery (RFC 1191,
&gt; &gt; <A HREF="ftp://ftp.rfc-editor.org/in-notes/rfc1191.txt">ftp://ftp.rfc-editor.org/in-notes/rfc1191.txt</A> )
&gt; 
&gt; Nope. It's because I'm running "ohphone" to generate voice RTP packets,
&gt; which all use DF.
&gt; They're coming out every 80 mSec, although I can set it to 20 mSec.
&gt; This is less than the 
&gt; "time the datagram will be active in the internet system"
&gt; for even my 19200 bits/sec null modem in the lab.
&gt; 
&gt; Cheers,
&gt; Alan Kennington.
&gt; 
&gt; 

-- 
Matthew
--
<A HREF="mailto:Matthew@Moyle-Croft.com">Matthew@Moyle-Croft.com</A>    | <A HREF="mailto:mmc@mmc.com.au">mmc@mmc.com.au</A>        |    <A HREF="mailto:mmc@206gti.net">mmc@206gti.net</A>
<A HREF="http://www.Moyle-Croft.com">http://www.Moyle-Croft.com</A> | <A HREF="http://www.mmc.com.au">http://www.mmc.com.au</A> | <A HREF="http://206gti.net">http://206gti.net</A>

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A> IRC: #linuxsa on irc.freenode.net
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
