<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: Alsamixer" -->
<!-- FromName="'Andrew Lord'" -->
<!-- FromEmail="andrewlord@internode.on.net" -->
<!-- ToName="" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Fri, 23 May 2003 12:07:37 +0930" -->
<!-- Id="200305230926.34389.andrewlord@internode.on.net" -->
<!-- Reference="20030522015924.A25132@dog.topology.org" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: Alsamixer</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Andrew Lord &lt;<I><A HREF="mailto:andrewlord@internode.on.net">andrewlord@internode.on.net</A></I>&gt;
  To  : &lt;<I><A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A></I>&gt;
  Date: Fri, 23 May 2003 12:07:37 +0930
</PRE>
<H1>Re: Alsamixer</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Hi Alan,

On Thu, 22 May 2003 01:59 am, you wrote:
&gt; Those are all the error message which have given me sooooo much pain.
&gt; I hope you won't let it murder you as it has murdered me.
&gt; (I got better though...)

Well thankyou very much for your extensive response.    It is much 
appreciated.  Forgive me for the time taken to reply.  Had a few things pile 
up on me pretty quickly but am starting to wade through them now.  No, I 
haven't let it murder me, but I've come close to murdering the computer.  Not 
really.  I'm fairly patient with things . . . well, usually.
 
I feel a little ashamed to admit it, but rather than persist for god knows how 
long to find the source of the problem, I thought I'd try a complete fresh 
install.  Well, a couple actually.  It would seem that I have circumnavigated 
the problem in this way.

First attempt, I had the onboard sound card activated (in BIOS), as well as 
the PCI sound card.  Installation went fine, as usual and I accepted all 
default drivers for the two sound cards.  Then, at boot, I could access 
alsamixer from the commandline but no sound issued from either sound card.  
Next, I rebooted turned off the on-board sound card in BIOS and then, through 
the Mandrake Control Centre, changed the double drivers to just that for the 
PCI sound card.  Thereafter, alsamixer was unaccessible from the command line 
(although the sound card worked).

Attempt 2.
With onboard sound disabled in BIOS, I did another fresh install.  The correct 
driver was selected by default. 

After bootup, sound card worked.

Alsamixer was completely 'not there' . . . obviously missed it somehow in my 
package selections.

So I then installed the following modules via the Mandrake Control Centre
	libalsa2-devel-0.9.0-0.14rc7mdk
	libalsa2-docs-0.9.0-0.14rc7mdk
	libalsa2-static-devel-0.9.0-0.14rc7mdk
	alsa-utils-0.9.0-0.8rc7mdk
	alsamixergui-0.9.0-0.6rc1_2mdk

Installation went fine after I created the directory /usr/share/apps/kscd/cddb

And alsamixer is a goer!!  Now the excitement of getting other packages to 
work in conjunction with it. Stuff of Adventure!


&gt; On Wed, May 21, 2003 at 01:29:05PM +0930, Andrew Lord wrote:
&gt; &gt; Typing alsamixer at the prompt, I get:
&gt; &gt; 	"alsamixer: function snd_ctl_open failed for default: No such file or
&gt; &gt; directory"
&gt;
&gt; Andrew,
&gt;
&gt; I've had those symptoms more often than not in the past.
&gt; Because of the lack of good, clear documentation on ALSA, I don't know
&gt; why it works now for me. It's more trial and error than anything else.

Looks like the trial and error approach has worked for me too! I agree on the 
documentation too . . . it's not too clear.

&gt; However, one way in which I get those symptoms is to lose the alsa
&gt; kernel modules. When I'm doing kernel development, my alsa
&gt; kernel modules get clobbered by the OSS modules which are in the standard
&gt; kernel. So after each kernel install, I have to reinstall the ALSA kernel
&gt; modules. That's with kernel 2.4.20.
&gt;
&gt; Now with the SuSE 8.1 customised 2.4.19 kernel, SuSE have applied
&gt; a patch (apparently) from the 2.5.x kernels to integrate ALSA modules
&gt; into the kernel tree. In that case, the ALSA modules are there by
&gt; default and take precedence over the OSS kernel modules unless you
&gt; fiddle with the /etc/modules.conf file.
&gt;
&gt; &gt; Typing lsmod, the soundcard driver is identified as es1371.
&gt; &gt;
&gt; &gt; Module                  Size  Used by    Not tainted
&gt; &gt; ppp_deflate             4408   0  (autoclean)
&gt; &gt; zlib_deflate           21144   0  (autoclean) [ppp_deflate]
&gt; &gt; bsd_comp                5336   0  (autoclean)
&gt; &gt; msdos                   7404   0  (autoclean)
&gt; &gt; isofs                  27988   0  (autoclean)
&gt; &gt; zlib_inflate           21156   0  (autoclean) [ppp_deflate isofs]
&gt; &gt; udf                    90464   0  (autoclean)
&gt; &gt; ide-floppy             15580   0  (autoclean)
&gt; &gt; sd_mod                 13100   0  (autoclean) (unused)
&gt; &gt; autofs4                11540   2  (autoclean)
&gt; &gt; lp                      8096   0
&gt; &gt; parport_pc             25096   1
&gt; &gt; parport                34176   1  [lp parport_pc]
&gt; &gt; es1371                 29000   1
&gt; &gt; soundcore               6276   0  [es1371]
&gt; &gt; ac97_codec             12488   0  [es1371]
&gt; &gt; gameport                3316   0  [es1371]
&gt; &gt; nfsd                   74256   8  (autoclean)
&gt; &gt; ppp_async               9216   0
&gt; &gt; ppp_generic            24060   0  [ppp_deflate bsd_comp ppp_async]
&gt; &gt; slhc                    6564   0  [ppp_generic]
&gt; &gt; af_packet              14952   0  (autoclean)
&gt; &gt; ip_vs                  83192   0  (autoclean)
&gt; &gt; sr_mod                 16920   0  (autoclean)
&gt; &gt; floppy                 55132   0
&gt; &gt; sis900                 15564   1  (autoclean)
&gt; &gt; nls_iso8859-1           3516   1  (autoclean)
&gt; &gt; nls_cp850               4316   1  (autoclean)
&gt; &gt; vfat                   11820   1  (autoclean)
&gt; &gt; fat                    37944   0  (autoclean) [msdos vfat]
&gt; &gt; supermount             15296   2  (autoclean)
&gt; &gt; ide-cd                 33856   2
&gt; &gt; cdrom                  31648   0  [sr_mod ide-cd]
&gt; &gt; ide-scsi               11280   0
&gt; &gt; scsi_mod              103284   3  [sd_mod sr_mod ide-scsi]
&gt; &gt; printer                 8448   0
&gt; &gt; usb-ohci               20584   0  (unused)
&gt; &gt; usbcore                72992   1  [printer usb-ohci]
&gt; &gt; rtc                     8060   0  (autoclean)
&gt;
&gt; This listing makes me think that somehow the ALSA modules are not being
&gt; loaded as they should.
&gt; In the directory /lib/modules/2.4.20/kernel/sound/acore, I see this:
&gt;
&gt; =================================================================
&gt; hamster sound/acore&gt; ls -lR
&gt; .:
&gt; total 277
&gt; drwxr-xr-x    2 root     root          112 2003-05-20 07:58 oss
&gt; drwxr-xr-x    4 root     root          376 2003-05-20 07:58 seq
&gt; -rw-------    1 root     root        10626 2003-05-20 07:58 snd-hwdep.o
&gt; -rw-------    1 root     root        10965 2003-05-20 07:58
&gt; snd-page-alloc.o -rw-------    1 root     root       120313 2003-05-20
&gt; 07:58 snd-pcm.o -rw-------    1 root     root        27176 2003-05-20 07:58
&gt; snd-rawmidi.o -rw-------    1 root     root        31423 2003-05-20 07:58
&gt; snd-timer.o -rw-------    1 root     root        69970 2003-05-20 07:58
&gt; snd.o
I have:
drwxr-xr-x    2 root     root         4096 May 23 06:15  [01;34moss [00m/
drwxr-xr-x    4 root     root         4096 May 23 06:15  [01;34mseq [00m/
-rw-r--r--    1 root     root         4458 Mar 15 07:03  [01;31msnd-hwdep.o.gz 
[00m
-rw-r--r--    1 root     root         9482 May 23 08:33  [00msnd-hwdep.o_test 
[00m
-rw-r--r--    1 root     root         4458 Mar 15 07:03  
[01;31msnd-hwdep.o_test.gz [00m
-rw-r--r--    1 root     root        23015 Mar 15 07:03  [01;31msnd.o.gz [00m
-rw-r--r--    1 root     root         4411 Mar 15 07:03  
[01;31msnd-page-alloc.o.gz [00m
-rw-r--r--    1 root     root        39351 Mar 15 07:03  [01;31msnd-pcm.o.gz 
[00m
-rw-r--r--    1 root     root        10564 Mar 15 07:03  
[01;31msnd-rawmidi.o.gz [00m
-rw-r--r--    1 root     root        11487 Mar 15 07:03  [01;31msnd-timer.o.gz 
[00m


&gt; ./oss:
&gt; total 92
&gt; -rw-------    1 root     root        21822 2003-05-20 07:58 snd-mixer-oss.o
&gt; -rw-------    1 root     root        67770 2003-05-20 07:58 snd-pcm-oss.o
I have:
-rw-r--r--    1 root     root         8907 Mar 15 07:03  
[01;31msnd-mixer-oss.o.gz [00m
-rw-r--r--    1 root     root        26136 Mar 15 07:03  
[01;31msnd-pcm-oss.o.gz [00m

&gt; ./seq:
&gt; total 149
&gt; drwxr-xr-x    2 root     root          184 2003-05-20 07:58 instr
&gt; drwxr-xr-x    2 root     root           80 2003-05-20 07:58 oss
&gt; -rw-------    1 root     root         9043 2003-05-20 07:58
&gt; snd-seq-device.o -rw-------    1 root     root         4600 2003-05-20
&gt; 07:58 snd-seq-dummy.o -rw-------    1 root     root        11670 2003-05-20
&gt; 07:58 snd-seq-instr.o -rw-------    1 root     root        10039 2003-05-20
&gt; 07:58 snd-seq-midi-emul.o -rw-------    1 root     root         7730
&gt; 2003-05-20 07:58 snd-seq-midi-event.o -rw-------    1 root     root        
&gt; 9197 2003-05-20 07:58 snd-seq-midi.o -rw-------    1 root     root        
&gt; 8295 2003-05-20 07:58 snd-seq-virmidi.o -rw-------    1 root     root      
&gt;  69831 2003-05-20 07:58 snd-seq.o

I have:
drwxr-xr-x    2 root     root         4096 May 23 06:15  [01;34minstr [00m/
drwxr-xr-x    2 root     root         4096 May 23 06:15  [01;34moss [00m/
-rw-r--r--    1 root     root         3889 Mar 15 07:03  
[01;31msnd-seq-device.o.gz [00m
-rw-r--r--    1 root     root         2139 Mar 15 07:03  
[01;31msnd-seq-dummy.o.gz [00m
-rw-r--r--    1 root     root         4377 Mar 15 07:03  
[01;31msnd-seq-instr.o.gz [00m
-rw-r--r--    1 root     root         4114 Mar 15 07:03  
[01;31msnd-seq-midi-emul.o.gz [00m
-rw-r--r--    1 root     root         2904 Mar 15 07:03  
[01;31msnd-seq-midi-event.o.gz [00m
-rw-r--r--    1 root     root         4028 Mar 15 07:03  
[01;31msnd-seq-midi.o.gz [00m
-rw-r--r--    1 root     root        24666 Mar 15 07:03  [01;31msnd-seq.o.gz 
[00m
-rw-r--r--    1 root     root         3214 Mar 15 07:03  
[01;31msnd-seq-virmidi.o.gz [00m

&gt; ./seq/instr:
&gt; total 32
&gt; -rw-------    1 root     root         4527 2003-05-20 07:58 snd-ainstr-fm.o
&gt; -rw-------    1 root     root         6580 2003-05-20 07:58
&gt; snd-ainstr-gf1.o -rw-------    1 root     root         8172 2003-05-20
&gt; 07:58 snd-ainstr-iw.o -rw-------    1 root     root         4953 2003-05-20
&gt; 07:58 snd-ainstr-simple.o
I have:
-rw-r--r--    1 root     root         2137 Mar 15 07:03  
[01;31msnd-ainstr-fm.o.gz [00m
-rw-r--r--    1 root     root         3337 Mar 15 07:03  
[01;31msnd-ainstr-gf1.o.gz [00m
-rw-r--r--    1 root     root         4217 Mar 15 07:03  
[01;31msnd-ainstr-iw.o.gz [00m
-rw-r--r--    1 root     root         2349 Mar 15 07:03  
[01;31msnd-ainstr-simple.o.gz [00m
&gt;
&gt; ./seq/oss:
&gt; total 48
&gt; -rw-------    1 root     root        46577 2003-05-20 07:58 snd-seq-oss.o
&gt; ===================================================================
I now have those files too.
&gt;
&gt; In the directory /lib/modules/2.4.19-4GB/kernel/sound, I see this:
&gt;
&gt; ===================================================================
&gt; hamster kernel/sound&gt; ls -l
&gt; total 4
&gt; drwxr-xr-x    4 root     root          248 2003-05-02 00:09 core
&gt; drwxr-xr-x    4 root     root          264 2003-05-02 00:09 drivers
&gt; drwxr-xr-x    2 root     root          144 2003-05-02 00:09 i2c
&gt; drwxr-xr-x   11 root     root          496 2003-05-02 00:09 isa
&gt; drwxr-xr-x   12 root     root          800 2003-05-02 00:09 pci
&gt; drwxr-xr-x    3 root     root          104 2003-05-02 00:09 synth
&gt; drwxr-xr-x    2 root     root          112 2003-05-02 00:09 usb
&gt; ===================================================================

I now have those files too.

&gt; It looks like the new integrated ALSA software is now in directory "core"
&gt; instead of "acore" which is the default with the 2.4.x version.
&gt;
&gt; &gt; My /etc/modules.conf file looks like this:
&gt; &gt;
&gt; &gt; alias net-pf-4 ipx
&gt; &gt; alias autofs autofs4
&gt; &gt; probeall scsi_hostadapter ide-scsi
&gt; &gt; alias sound-slot-1 es1371
&gt; &gt; alias eth0 sis900
&gt; &gt; above snd-trident snd-pcm-oss
&gt; &gt; alias sound-slot-0 es1371
&gt; &gt; probeall usb-interface usb-ohci
&gt; &gt; above snd-ens1371 snd-pcm-oss
&gt;
&gt; My /etc/modules.conf file has this:
&gt;
&gt; =====================================================================
&gt; alias char-major-14 off
&gt; alias sound off
&gt; alias midi off
&gt;
&gt; # [...]
&gt;
&gt; options snd-ymfpci enable=1 index=0 rear_switch=0
&gt; options snd cards_limit=1 major=116
&gt; # gZD2.JPC6uvEDNF2:DS-XG PCI Audio Codec
&gt; alias snd-card-0 snd-ymfpci

I can no longer access lsmod it seems.  I'd like to compare what I get now, 
with what I had earlier.  Only the great deity of deities knows why but it 
looks like the host package for lsmod didn't install upon yesterdays 
installation.  .....grrrrr .... grrrr.

Do you know what package lsmod is installed by ?  

&gt; # YaST2: sound system dependent part
&gt; #
&gt; alias sound-slot-0 snd-card-0
&gt; alias sound-service-0-0 snd-mixer-oss
&gt; alias sound-service-0-1 snd-seq-oss
&gt; alias sound-service-0-3 snd-pcm-oss
&gt; alias sound-service-0-8 snd-seq-oss
&gt; alias sound-service-0-11 snd-mixer-oss
&gt; alias sound-service-0-12 snd-pcm-oss
&gt; ====================================================================
&gt;
&gt; I get the impression that the first 3 lines of my quote somehow turn off
&gt; the OSS style of music software whereas the remaining lines are written by
&gt; the configuration tool (YaST2 for SuSE 8.1) in accordance with the hardware
&gt; discovered.
&gt;
&gt; You don't seem to be loading up all those snd-* kernel modules.
&gt; Mine look this when running successfully:
&gt;
&gt; ====================================================================
&gt; snd-pcm-oss            46788   0 (autoclean)
&gt; snd-mixer-oss          14104   1 (autoclean) [snd-pcm-oss]
&gt; snd-ymfpci             52640   1 (autoclean)
&gt; snd-pcm                74368   0 (autoclean) [snd-pcm-oss snd-ymfpci]
&gt; snd-page-alloc          5300   0 (autoclean) [snd-ymfpci snd-pcm]
&gt; snd-opl3-lib            7684   0 (autoclean) [snd-ymfpci]
&gt; snd-hwdep               5728   0 (autoclean) [snd-opl3-lib]
&gt; snd-timer              18952   0 (autoclean) [snd-pcm snd-opl3-lib]
&gt; snd-mpu401-uart         4672   0 (autoclean) [snd-ymfpci]
&gt; snd-rawmidi            16224   0 (autoclean) [snd-mpu401-uart]
&gt; snd-seq-device          4472   0 (autoclean) [snd-opl3-lib snd-rawmidi]
&gt; snd-ac97-codec         38440   0 (autoclean) [snd-ymfpci]
&gt; snd                    39268   0 (autoclean) [snd-pcm-oss snd-mixer-oss
&gt; snd-ymfpci snd-pcm snd-opl3-lib snd-hwdep snd-timer snd-mpu401-uart
&gt; snd-rawmidi snd-seq-device snd-ac97-codec] soundcore               4004   4
&gt; (autoclean) [snd]
&gt; ====================================================================
&gt;
&gt; I've edited out the non-sound modules.
&gt; Somehow your ALSA modules are not getting loaded at all.
&gt; Have you changed your kernel or rebuilt it?
&gt;
&gt; &gt; I have tried pointing alsamixer to the sound card location (1 ???).  Not
&gt; &gt; sure if I've tried this appropriately though, anyway when I type
&gt; &gt; "alsamixer -c 1" at the command line (to select the sound card to use), I
&gt; &gt; get:
&gt; &gt; 	"alsamixer: function snd_ctl_open failed for hw:1: No such file or
&gt; &gt; directory"
&gt; &gt;
&gt; &gt; I'm guessing that the driver that alsamixer points to needs to be
&gt; &gt; updated, but have no idea of what file would need to be changed.  Is this
&gt; &gt; a correct guess, and has anybody had/overcome this difficulty please ?
&gt; &gt;
&gt; &gt; Also when I type arecord -l (to list the available sound cards, I get):
&gt; &gt; 	"arecord: device_list:190: no soundcards found..."
&gt;

Cheers,

Andrew Lord


-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A> IRC: #linuxsa on irc.freenode.net
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
