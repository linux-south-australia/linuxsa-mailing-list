<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: Intermittent network fault" -->
<!-- FromName="'Daryl Tester'" -->
<!-- FromEmail="Daryl.Tester@iocane.com.au" -->
<!-- ToName="'Patrick Ernst'" -->
<!-- ToEmail="patrick@aroaustralia.com" -->
<!-- Date="Fri, 06 Feb 2004 06:14:35 +1030" -->
<!-- Id="40229D23.531C9710@iocane.com.au" -->
<!-- Reference="6.0.0.22.0.20040203000217.01b1c1d8@mail.digitalme.com" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: Intermittent network fault</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Daryl Tester &lt;<I><A HREF="mailto:Daryl.Tester@iocane.com.au">Daryl.Tester@iocane.com.au</A></I>&gt;
  To  : Patrick Ernst &lt;<I><A HREF="mailto:patrick@aroaustralia.com">patrick@aroaustralia.com</A></I>&gt;
  Date: Fri, 06 Feb 2004 06:14:35 +1030
</PRE>
<H1>Re: Intermittent network fault</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Note: I'm not familiar with Shorewall.

Patrick Ernst wrote:

&gt; They couldn't reconfigure my DSL-300 so replaced it. I'm back on line!
&gt; 
&gt; However, I'm still getting drop outs. Connectivity to the server dies.
&gt; Internet access stops, SSH, Samba, HTTP, the lot BUT, not necessarily from
&gt; all PCs on the LAN (3) at once. Occasionally one will stop and another is
&gt; okay. Drop outs are more frequent now (see below) and may sustain for 20 min.

Well, for starters, if you're losing connectivity to services on the server,
you probably won't need to fiddle with your DSL modem (provided that I'm
understanding your network topology correctly).

Check /var/log/messages (or wherever: if they're not kept there, you can
usually backtrack to where they're being stored by pointers within /etc/syslog.conf,
provided it's using syslog - damn variations) for unusual messages (apart
from the packet messages).

If you have console access to the firewall, run "tcpdump -eni &lt;blah&gt; icmp"
(where &lt;blah&gt; is the network name of your internal interface).  The next
time the problem occurs, ping from both working and non-working PCs
and observe (and/or post) the results.

My gut feeling (on scanty-to-none evidence) is that you *may* have another
machine on the network popping up with the same internal IP address as
the firewall's.  Are you using a hub or switch on your internal network?
(a "tcpdump -eni &lt;blah&gt; arp" would be handy here too).

&gt; At 12:30 AM 3/02/2004, Patrick Ernst wrote:

&gt; &gt;I think there might be a firewall issue. Ie all traffic from the loc zone
&gt; &gt;to fw (local zone to firewall in Shorewall speak) seems to stop.

Well, if traffic to Samba and sshd is stopping, I'd expect those services
to be running on an "internal" zone.  But that might be something I don't
grok about Shorewall.


-- 
Regards,
  Daryl Tester,  Software Wrangler and Bit Herder, IOCANE Pty. Ltd.

"Next time, let's screw it up my way first."  -- Jay D. Dyson

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A> IRC: #linuxsa on irc.freenode.net
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
