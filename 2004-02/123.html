<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: Promise PDC20269 (Ultra133 TX2) + Software RAID" -->
<!-- FromName="'Mike O'Connor'" -->
<!-- FromEmail="mike@pineview.net" -->
<!-- ToName="'Ryan Verner'" -->
<!-- ToEmail="xfesty@computeraddictions.com.au" -->
<!-- Date="Tue, 3 Feb 2004 21:48:50 +1030" -->
<!-- Id="006001c3ea47$83eab300$1ef621cb@themaster" -->
<!-- Reference="6FF5C83C-55FA-11D8-AC00-000A95CEEE4E@computeraddictions.com.au" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: Promise PDC20269 (Ultra133 TX2) + Software RAID</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Mike O &lt;<I><A HREF="mailto:mike@pineview.net">mike@pineview.net</A></I>&gt;
  To  : Ryan Verner &lt;<I><A HREF="mailto:xfesty@computeraddictions.com.au">xfesty@computeraddictions.com.au</A></I>&gt;
  Date: Tue, 3 Feb 2004 21:48:50 +1030
</PRE>
<H1>Re: Promise PDC20269 (Ultra133 TX2) + Software RAID</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Hi Ryan

I have the same type of errors with two  msi pt-1000R 1ru rack box's (these
have an onboard tx133 lite chip set), and having tried the promise fasttrax
drive and this causing one of the machines to lock up all the time I found
mention of there being some issue with current 2.4 kernel and the apci (irq
routing) I tried the kernel boot option "apci=off". This fixed the problem
and I now have two box's using software raid.

I would suggest you have a try with this option.

Cheers
  Mike

----- Original Message ----- 
From: "Ryan Verner" &lt;<A HREF="mailto:xfesty@computeraddictions.com.au">xfesty@computeraddictions.com.au</A>&gt;
To: "LinuxSA ML" &lt;<A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A>&gt;
Cc: &lt;<A HREF="mailto:linux-kernel@vger.kernel.org">linux-kernel@vger.kernel.org</A>&gt;
Sent: Tuesday, February 03, 2004 2:08 PM
Subject: Promise PDC20269 (Ultra133 TX2) + Software RAID


Howdy,

I did an upgrade on a system the other day; we went from 2 * 8G drives
in software RAID1, running off the motherboard's IDE chipset, to 2 *
80G drives in software RAID1, running off a Promise Ultra133 TX2 card.

I upgraded the kernel at the same time to 2.4.24 w/ grsec patches.  The
drives are detected fine:

PDC20269: IDE controller at PCI slot 00:0d.0
PCI: Found IRQ 10 for device 00:0d.0
PDC20269: chipset revision 2
PDC20269: not 100% native mode: will probe irqs later
PDC20269: ROM enabled at 0xe5000000
     ide2: BM-DMA at 0xe400-0xe407, BIOS settings: hde:pio, hdf:pio
     ide3: BM-DMA at 0xe408-0xe40f, BIOS settings: hdg:pio, hdh:pio
hde: WDC WD800JB-00ETA0, ATA DISK drive
blk: queue c01a2db8, I/O limit 4095Mb (mask 0xffffffff)
hdg: WDC WD800JB-00ETA0, ATA DISK drive
blk: queue c01a3224, I/O limit 4095Mb (mask 0xffffffff)
ide2 at 0xd400-0xd407,0xd802 on irq 10
ide3 at 0xdc00-0xdc07,0xe002 on irq 10
hde: attached ide-disk driver.
hde: host protected area =&gt; 1
hde: 156301488 sectors (80026 MB) w/8192KiB Cache, CHS=9729/255/63,
UDMA(100)
hdg: attached ide-disk driver.
hdg: host protected area =&gt; 1
hdg: 156301488 sectors (80026 MB) w/8192KiB Cache, CHS=9729/255/63,
UDMA(100)

However, we get these sorts of errors often:

hdg: dma_timer_expiry: dma status == 0x22
hdg: error waiting for DMA
hdg: dma timeout retry: status=0x58 { DriveReady SeekComplete
DataRequest }
hdg: status timeout: status=0xd0 { Busy }
PDC202XX: Secondary channel reset.
hdg: drive not ready for command
ide3: reset: success

And the machine is randomly locking up, and of course, on reboot, the
raid array is rebuilt.  Ouch.  Any clues as to why?  I'm sure the hard
drive hasn't failed as it's brand new; I suspect a chipset
compatibility problem or something.

R

--

Signature space for rent.

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A> IRC: #linuxsa on irc.freenode.net
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A> IRC: #linuxsa on irc.freenode.net
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
