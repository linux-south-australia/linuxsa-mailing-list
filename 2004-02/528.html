<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: Change IP address" -->
<!-- FromName="'Patrick Ernst'" -->
<!-- FromEmail="patrick@aroaustralia.com" -->
<!-- ToName="" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Wed, 11 Feb 2004 17:27:16 +1030 (CST)" -->
<!-- Id="2702.203.38.128.179.1076482636.squirrel@webmail.aroaustralia.com" -->
<!-- Reference="45290.203.38.128.179.1076464499.squirrel@webmail.aroaustralia.com" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: Change IP address</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Patrick Ernst &lt;<I><A HREF="mailto:patrick@aroaustralia.com">patrick@aroaustralia.com</A></I>&gt;
  To  : &lt;<I><A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A></I>&gt;
  Date: Wed, 11 Feb 2004 17:27:16 +1030 (CST)
</PRE>
<H1>Re: Change IP address</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
...snip...
&gt;&gt;gateway machine with 2 nics. Eth0 (onboard) connected to DSL modem. Eth1
&gt;&gt;connected to internal LAN. 192.168.3.1 will be default route (gateway)
&gt;&gt; for
&gt;&gt;all internal PCs.
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt; ok got it, that is basically how i was running my own gateway
&gt;
&gt; Does your modem have good firewall software?
&gt;
&gt; Now i run the modem in half bridge mode which basically sets the eth
&gt; interface connect to the modem to the public ip address (the modem is
&gt; practically invisible). Its half bridged because the modem does all the
&gt; login PPPoA work not the gateway machine. This enables me to use
&gt; iptables for all of the firewall work and any port redirection i want to
&gt; do. It also allows you to run any servers (SSH etc) on the gateway
&gt; without having to redirect / open ports on the modem based firewall
&gt;

I've a DLink DSL-300. Its not got full smarts like a router. My gateway
initiates the PPPoE transaction, so ifconfig shows eth0 192.168.2.1, eth1
192.168.1.1 and ppp0 with the internode provided address. I use iptables
(using Shorewall) which set the internal(loc) zone to eth1 and the
external (net) to ppp0.

&gt; You can probably also run the modem in full bridged mode but you need to
&gt; setup the gateway machine to do all of the logging in PPPoA stuff
&gt;
Yup.

&gt; As to the question of what will break, it depends on what servers you
&gt; have hard coded to listen to an ip address, do you run any servers?
&gt;

I was thinking of basic Linux things I might break. I run Samba, apache
and have made necessary changes to these. I'm thinking the hosts file,
resolv.conf (maybe) other stuff in /etc/rc*.

&gt; you need to make sure that internet traffic is routed from your internal
&gt; network to the modem (and back), not sure how your currently doing this
&gt; and if it will break
&gt;
From the LAN, eth1 on the server is the default route. The server picks up
its default route from DHCP on ppp0.

cheers

Patrick Ernst, Director
ARO Australia Pty Ltd
PO Box 1
Marleston SA 5033
Mob 0404 883 145
Fax (8) 8219 0124

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A> IRC: #linuxsa on irc.freenode.net
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
