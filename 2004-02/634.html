<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: Boosting NFS performance (bottlenecks?)" -->
<!-- FromName="'Ryan Verner'" -->
<!-- FromEmail="xfesty@computeraddictions.com.au" -->
<!-- ToName="'John Edwards'" -->
<!-- ToEmail="isplist@adam.com.au" -->
<!-- Date="Thu, 12 Feb 2004 16:42:33 +1030" -->
<!-- Id="72205711-5D22-11D8-A0F9-000A95CEEE4E@computeraddictions.com.au" -->
<!-- Reference="KKEALCNDCMLKCEEMOEDLEEBICAAA.ws@senet.com.au" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: Boosting NFS performance (bottlenecks?)</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Ryan Verner &lt;<I><A HREF="mailto:xfesty@computeraddictions.com.au">xfesty@computeraddictions.com.au</A></I>&gt;
  To  : John Edwards &lt;<I><A HREF="mailto:isplist@adam.com.au">isplist@adam.com.au</A></I>&gt;
  Date: Thu, 12 Feb 2004 16:42:33 +1030
</PRE>
<H1>Re: Boosting NFS performance (bottlenecks?)</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
On 12/02/2004, at 4:33 PM, John Edwards wrote:
&gt;&gt;&gt; What MTU are you running on each end?
&gt;&gt;
&gt;&gt;
&gt;&gt; 1500.
&gt;
&gt;
&gt; You probably want to set this to 9000 if the driver on each end allows 
&gt; it.

Heh, I've /never/ used a MTU higher than 1500, and didn't know that it 
was supported at all; cool, I'll try and see how it handles it.  
Certainly, I can see how this would help.

&gt;&gt;&gt; What duplex setting on each end of the gigabit link?
&gt;&gt;
&gt;&gt;
&gt;&gt; 1000baseTX full-duplex
&gt;
&gt;
&gt; Is that the setting in the config, or what ifconfig reports?

ifconfig.

&gt;&gt;&gt; Which version of NFS are you mounting the server with?
&gt;&gt;
&gt;&gt;
&gt;&gt; The kernel (2.6.1) is compiled with NFSv2, NFSv3, and NFSv4 support 
&gt;&gt; (w/ NFS over TCP) for both client and server.  I've got the latest 
&gt;&gt; 'nfs-kernel-server' package from Debian Sid installed, which I'd 
&gt;&gt; assume would just enable whatever the server has support for (or are 
&gt;&gt; specific options needed in the exports file?)
&gt;
&gt;
&gt; You really, really, really want to be using NFS over UDP. Really.

It's what I've always done in the past, and it's what it's probably 
doing now anyway, so go figure.  Big problems with NFS over TCP, eh? 
:-)

&gt;&gt; Whatever OS X finder uses as per default.  I could try a manual 
&gt;&gt; mount, I guess, and see if tuning things such as this help at all.
&gt;
&gt;
&gt; Do it. Remember that most default desktop NFS connections are 
&gt; conservative as the server is typically shared amongst numerous 
&gt; clients. Given the dedicated link, you can afford to go with a more 
&gt; selfish tuning.

Indeed.  I just did 'man mount_nfs' under OS X, trying to find such 
options, and the man page is dated 1995, and has bugger all in it.  
Ouch.  :-(  I suspect the documentation is just out of date, though.

R

--

Signature space for rent.

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A> IRC: #linuxsa on irc.freenode.net
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
