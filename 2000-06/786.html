<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: Sendmail filtering" -->
<!-- FromName="Matthew Geddes" -->
<!-- FromEmail="mgeddes@xavier.sa.edu.au" -->
<!-- ToName="" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Mon, 26 Jun 2000 14:46:13 +0930" -->
<!-- Id="3956E71D.5CED5322@xavier.sa.edu.au" -->
<!-- Reference="3956A2A8.50396253@xavier.sa.edu.au" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: Sendmail filtering</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Matthew Geddes &lt;<I><A HREF="mailto:mgeddes@xavier.sa.edu.au">mgeddes@xavier.sa.edu.au</A></I>&gt;
  To  : <A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A>
  Date: Mon, 26 Jun 2000 14:46:13 +0930
</PRE>
<H1>Re: Sendmail filtering</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Daryl Tester wrote:
&gt; 
&gt; Matthew Geddes wrote:
&gt; 
&gt; &gt; A quick non-language specific hack to get a point across. I apologise
&gt; &gt; for any confusion.
&gt; 
&gt; Grep is non-language specific?  :-)

Did you understand the point I was trying to make? Stop being so
podantic. It was a very brief (and most certainly not entirely accurate)
description of what I wanted to do. If I could have made it accurate,
there would really be no need for me to post the message.

&gt; &gt; Well worth it if just for it's LDAP-based routing. ;-)
&gt; 
&gt; Oh, I knew it did _that_ (but then so did 8.9.3 with the right patches).

Still, very nice if you hate playing with aliases files (I do) across
multiple machines and have more than one mail server.

&gt; &gt; I disagree that it is necessary to decode attachments just to find the
&gt; &gt; filename.
&gt; 
&gt; And here, I disagree with your disagreement.  And now we're back to
&gt; square one.
&gt; 
&gt; &gt; I think the text in the message goes something like:
&gt; &gt;
&gt; &gt; Content-type: xxxxxx/xxxx; name="virus.vbs"
&gt; 
&gt; And had I been filtering my mail as per your recommendation, I would
&gt; have just dropped this mail message, because it would have been a
&gt; (false) positive match. 

Agreed. The pattern I would have sendmail match would hopefully be
unique enough to limit this problem somewhat, but either way, I don't
mind.

&gt; Had you decoded the message in a MIME fashion,
&gt; you wouldn't even have "seen" the string "Content-type" unless you
&gt; were examining the contents of the containers.  You would, however,
&gt; have known the MIME type of each container sent to you (unless they
&gt; slip it into a ZIP file, which is a real possibility, apparently).

The text is part of the body of the message (what sendmail thinks is the
message). I realise that zip files are a problem, and I also realise
that they could rename the various attachments. I am not trying to stop
the problem completely, but more trying to slow things down
dramatically. Given that we don't allow software for compression and
decompression on the student workstations, we find that it is at a
minimum.

 
&gt; Firstly, you seem bent out of shape over "decode" - it's not an intensive
&gt; processing unless you wish to extract the octet stream of the contents
&gt; (you're willing to grep an entire file, which is only slightly less
&gt; overhead).  If you decode it correctly, you won't get a false positive
&gt; like the above scenario.  Secondly, that Content-type: line can be split
&gt; over two lines (and frequently is), just like an RFC header.  Your pattern
&gt; matcher will have to take that (and other variations) into account.  Yet
&gt; all this is handled for you already by tools that other people have written.
&gt; None in one hand, a dozen in the other.

As I have mentioned, the use of grep above was only to aid in my
description of what I wanted to do. I agree with the split line thing
and will take it into account.

All I was after was some pointers to places that people know of that
might help. I am not asking the list whether I have their permission or
whether they believe it to be a good idea (thanks go to Martin
Sheppard). I would honestly much rather learn from any problems that I
encounter (of which I am sure there will be many) ;-).

Thanks,

-- 

Matthew Geddes
Network Manager
Xavier College
Gawler, SA

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
