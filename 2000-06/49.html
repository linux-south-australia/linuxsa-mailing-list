<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: System Time" -->
<!-- FromName="MWP" -->
<!-- FromEmail="hirm@chariot.net.au" -->
<!-- ToName="Daryl Tester" -->
<!-- ToEmail="dt@picknowl.com.au" -->
<!-- Date="Thu, 1 Jun 2000 20:33:37 +0930" -->
<!-- Id="003501bfcbb9$0a76a840$0201a8c0@comp" -->
<!-- Reference="F1DCD9B55F1DD311AB8C00508B0AB45EEFD392@snowball.asc.com.au" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: System Time</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: MWP &lt;<I><A HREF="mailto:hirm@chariot.net.au">hirm@chariot.net.au</A></I>&gt;
  To  : Daryl Tester &lt;<I><A HREF="mailto:dt@picknowl.com.au">dt@picknowl.com.au</A></I>&gt;
  Date: Thu, 1 Jun 2000 20:33:37 +0930
</PRE>
<H1>Re: System Time</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
&gt; "Weidner, Paula" wrote:
&gt;
&gt; &gt; Wouldn't this make the RTC wrong not just the System Time in Linux?
&gt;
&gt; [Danger - it's been a while since I've wielded a soldering iron ...
&gt;  The following story may be based purely on fiction]
&gt;
&gt; (Peers into dim dark recesses of brain; finding nothing but cobwebs,
&gt; he proceeds ...)  It depends on which crystal - the RTC is usually
&gt; driven by a 32kHz crystal.  Divide that by 32768 (2^15) gives you
&gt; your "seconds" resolution.  The clock that drives the system time
&gt; comes off of the counter/time chip (8253?), and is driven by a
&gt; different rock.

True for older motherboards.
Most new motherboards (Intel LX and newer) use one crystal (can be any value
due to cool new PLL IC's) to generate all clocks while on.
The second clock crystal on the motherboard supplies the clock while the
machine is turned off.

&gt; Another thing that can cause clock drift on a "slowish" machine is
&gt; some process can lock out the interrupts for longer than a system
&gt; tick (ie, spans two ticks).  From memory, the interrupts for
&gt; each level aren't queued more than once, and as each tick occurs
&gt; every 10 or 100 Hz (gad, I need a brain upgrade), that can cause
&gt; drift as the IRQ tick routine is called once for x ticks.  Actually,
&gt; I can test this ...
&gt;
&gt; [<A HREF="mailto:dt@nipnyep">dt@nipnyep</A> /proc]$ grep timer /proc/interrupts; sleep 1; grep timer
/proc/interrupts
&gt;   0:    6976721          XT-PIC  timer
&gt;   0:    6976822          XT-PIC  timer
&gt;
&gt; Just over 100 ticks for a second.  Cool.  I do need a new brain.
&gt;
&gt; Anyhoo, this may or may not be your problem.  I remember it occuring
&gt; on a machine I had years ago, and was eventually put down to a
&gt; combination of a flaky hard disk and device driver locking the IRQ
&gt; out for extended periods.
&gt;
&gt;
&gt; Regards,
&gt;   Daryl Tester
&gt; &gt;
&gt; &gt;         -----Original Message-----
&gt; &gt;         From:   MWP [SMTP:<A HREF="mailto:hirm@chariot.net.au">hirm@chariot.net.au</A>]
&gt; &gt;         Sent:   Thursday, 1 June 2000 12:46
&gt; &gt;         To:     Weidner, Paula
&gt; &gt;         Cc:     linuxsa
&gt; &gt;         Subject:        Re: System Time
&gt; &gt;
&gt; &gt;         Youll prolly find its the mothboards fault.
&gt; &gt;         Ive come across quite a few motherboards now that have had
faulty
&gt; &gt; clock gen
&gt; &gt;         crystals/ic's.
&gt; &gt;         Unfortunatly theres not much you can do about it either besides
&gt; &gt; replacing
&gt; &gt;         the motherboard.
&gt; &gt;
&gt; &gt;         MWP
&gt; &gt;
&gt;
&gt; --
&gt; LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
&gt; To unsubscribe from the LinuxSA list:
&gt;   mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject
&gt;

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
