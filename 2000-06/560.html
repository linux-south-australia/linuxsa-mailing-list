<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: system write(2) call bounds checking" -->
<!-- FromName="Dan Shearer" -->
<!-- FromEmail="dan@shearer.org" -->
<!-- ToName="" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Mon, 19 Jun 2000 14:50:23 +0930 (CST)" -->
<!-- Id="Pine.LNX.4.10.10006191421510.29281-100000@localhost.localdomain" -->
<!-- Reference="394D61DF.B4E99C38@picknowl.com.au" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: system write(2) call bounds checking</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Dan Shearer &lt;<I><A HREF="mailto:dan@shearer.org">dan@shearer.org</A></I>&gt;
  To  : <A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A>
  Date: Mon, 19 Jun 2000 14:50:23 +0930 (CST)
</PRE>
<H1>Re: system write(2) call bounds checking</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Daryl,

On Mon, 19 Jun 2000, Daryl Tester wrote:

&gt; As Dan Shearer has just pointed out, something unusual is happening in
&gt; the land of Oz.
&gt; 
&gt; Daryl Tester wrote:
&gt; &gt; [<A HREF="mailto:dt@nipnyep">dt@nipnyep</A> dt]$ ./tst
&gt; &gt; write: Operation not permitted
&gt; &gt; 
&gt; &gt; *Hmph* - not what I'd expected.
&gt; 
&gt; If you loop over a range of values of -1 to -31, the errno (implicitly
  :
&gt; 
&gt; Dan, where do we report something like this (after, of course,
&gt; checking out that the latest kernel hasn't already fixed it)?

I think Alan Kennington is right. Do the fix (try ssize_t first, see what
complains, make some sensible decision about large sizes in general, I
haven't thought about it but there is sure to be some important boundary
condition) Mail the patch and an explanation with sample code to Alan Cox
(this isn't worth a kernel posting, in fact the best thing about maybe is
the worked example for linuxsa of how bugs in Linux get fixed :-)

Later on Alan Kennington wrote:

&gt; This all reinforces the view that the linux kernel
&gt; is lucky kludgerama. I.e. the code is not "tight" in the sense
&gt; of checking every function return value and all function arguments
&gt; to ensure no errors.   

I both agree and disagree. Certainly the Linux kernel needs lots of
auditing. The OpenBSD team have shown how to do this, and Linux hasn't had
nearly as much formal review. You'll find Linus and Alan (especially Alan)
talking about the need for auditing all the time. Having people stare at
every line of code trying to imagine the most perposterous things
happening is an extremely good practice.

On the other hand, 
 
  1) Compared to Linux, many (most?) other operating systems are worse. 
     Compare even QNX, which has earned a reputation for high quality. QNX
     programmers are always talking about "wonderful OS, but lots of 
     inconsistencies in the libraries and API behaviour". And Win32
     programming, well many on this list can talk about that. Funny return
     values, mismatched parameter types, inconsistent (and duplicated!) 
     structure definitions...

  2) A good rule-of-thumb measure of how well these small but important things
     are attended to is long-term stability under varied load and many
     different applications. How do you think Linux is going in that 
     department? Good :-)

So I think 'lucky kludgerama' might be true enough in absolute terms
simply due to the lack of an extra ten years or so of thrashing that a
kernel needs, but in relative terms Linux is looking good.

To anyone that understands these sorts of things, Microsoft claiming in
the same breath that "Windows 2000 has 10 million new lines of code" and
"Windows 2000 has been tested and is suitable for mission-critical
deployment" is just nonsense.

Dan

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
