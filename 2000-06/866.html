<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: Odd smbmount issue..." -->
<!-- FromName="Richard Sharpe" -->
<!-- FromEmail="sharpe@ns.aus.com" -->
<!-- ToName="Nick Morrison <nickm@bhwb.nsw.gov.au>, linuxsa" -->
<!-- ToEmail="nickm@bhwb.nsw.gov.au" -->
<!-- Date="Tue, 27 Jun 2000 16:17:40 +0900" -->
<!-- Id="3.0.6.32.20000627161740.0099d4e0@203.16.214.248" -->
<!-- Reference="000901bfdff2$25940300$6a01010a@ito.bhwb.local" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: Odd smbmount issue...</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Richard Sharpe &lt;<I><A HREF="mailto:sharpe@ns.aus.com">sharpe@ns.aus.com</A></I>&gt;
  To  : Nick Morrison &lt;nickm@bhwb.nsw.gov.au&gt;, linuxsa &lt;<I><A HREF="mailto:nickm@bhwb.nsw.gov.au">nickm@bhwb.nsw.gov.au</A></I>&gt;
  Date: Tue, 27 Jun 2000 16:17:40 +0900
</PRE>
<H1>Re: Odd smbmount issue...</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
At 02:12 PM 6/27/00 +0930, Nick Morrison wrote:
&gt;Hello.
&gt;
&gt;I've got a RH6.1 box here.  Samba versions:
&gt;[<A HREF="mailto:root@neptune">root@neptune</A> /root]# rpm -qa | grep samba
&gt;samba-2.0.5a-1
&gt;samba-client-2.0.5a-1

I experienced similar problems, and I think they went away at Samba 2.0.6
or 2.0.7.

Try to upgrade and see what happens.

&gt;Kernel version:
&gt;[<A HREF="mailto:root@neptune">root@neptune</A> /root]# uname -a
&gt;Linux neptune.bhwb.local 2.2.14 #2 SMP Mon Apr 3 20:21:54 CST 2000 i686
&gt;unknown
&gt;
&gt;
&gt;..  when I do this:
&gt;
&gt;[<A HREF="mailto:root@neptune">root@neptune</A> /root]# smbmount //bhwbnt1/fdrive /mnt/nt -U nickm
&gt;etc etc etc
&gt;
&gt;... and have my \\bhwbnt1\fdrive (I did NOT pick the name..) mounted
&gt;on /mnt/nt for a li'l while..  This happens.
&gt;
&gt;[<A HREF="mailto:root@neptune">root@neptune</A> /mnt]# dir
&gt;ls: nt: Input/output error
&gt;total 320
&gt;drwxr-xr-x   5 root     root         1024 May  3 22:22 .
&gt;drwxr-xr-x   6 root     root         1024 May 22 16:37 ..
&gt;drwxr-xr-x   2 root     root         1024 Mar 29 18:05 argus
&gt;drwxr-xr-x   2 root     root         1024 Mar 29 18:05 bhwbnt2
&gt;[<A HREF="mailto:root@neptune">root@neptune</A> /mnt]#
&gt;
&gt;......  nt should be listed as a directory there, under bhwbnt2.
&gt;
&gt;[<A HREF="mailto:root@neptune">root@neptune</A> /mnt]# df
&gt;Filesystem           1k-blocks      Used Available Use% Mounted on
&gt;/dev/hda3               792800    302976    448859  40% /
&gt;/dev/hda1                23300      3439     18658  16% /boot
&gt;/dev/hda7              1173688    709078    403967  64% /home
&gt;/dev/hda5               995115    736606    207103  78% /usr
&gt;/dev/hda6               995115    605089    338620  64% /var
&gt;df: /mnt/nt: Input/output error
&gt;[<A HREF="mailto:root@neptune">root@neptune</A> /mnt]#
&gt;
&gt;... which is odd.
&gt;
&gt;[<A HREF="mailto:root@neptune">root@neptune</A> /mnt]# cd nt
&gt;[<A HREF="mailto:root@neptune">root@neptune</A> nt]# dir
&gt;ls: .: Input/output error
&gt;[<A HREF="mailto:root@neptune">root@neptune</A> nt]# ls -las
&gt;ls: .: Input/output error
&gt;[<A HREF="mailto:root@neptune">root@neptune</A> nt]# cd BHWB                    &lt;-- this dir exists..
&gt;bash2: cd: BHWB: Input/output error
&gt;[<A HREF="mailto:root@neptune">root@neptune</A> nt]# ls -las
&gt;ls: .: Input/output error
&gt;[<A HREF="mailto:root@neptune">root@neptune</A> nt]# cd ..
&gt;[<A HREF="mailto:root@neptune">root@neptune</A> ..]#
&gt;
&gt;*weird*.
&gt;
&gt;[<A HREF="mailto:root@neptune">root@neptune</A> ..]# pwd
&gt;/mnt/nt/..
&gt;
&gt;*weird* :)
&gt;
&gt;Can anyone shed light on this?  Anybody else have the same problem?
&gt;
&gt;I guess I should just upgrade to the latest samba..  Right?  Hmm.
&gt;
&gt;I've had the problem before, a long time ago, on a different box.
&gt;
&gt;
&gt;
&gt;Now THIS is groovy...
&gt;
&gt;[<A HREF="mailto:root@neptune">root@neptune</A> ..]# cd nt
&gt;[<A HREF="mailto:root@neptune">root@neptune</A> nt]# pwd
&gt;/mnt/nt-servers/nt/../nt                    &lt;--  lol :)
&gt;[<A HREF="mailto:root@neptune">root@neptune</A> nt]# dir
&gt;ls: .: Input/output error
&gt;[<A HREF="mailto:root@neptune">root@neptune</A> nt]# strace dir
&gt;execve("/usr/bin/dir", ["dir"], [/* 23 vars */]) = 0
&gt;brk(0)                                  = 0x8054a90
&gt;open("/etc/ld.so.preload", O_RDONLY)    = -1 ENOENT (No such file or
&gt;directory)
&gt;open("/etc/ld.so.cache", O_RDONLY)      = 3
&gt;fstat(3, {st_mode=070411, st_size=0, ...}) = 0
&gt;mmap(0, 19727, PROT_READ, MAP_PRIVATE, 3, 0) = 0x40014000
&gt;close(3)                                = 0
&gt;open("/lib/libc.so.6", O_RDONLY)        = 3
&gt;fstat(3, {st_mode=0, st_size=0, ...})   = 0
&gt;read(3, "\177ELF\1\1\1\0\0\0\0\0\0\0\0\0\3"..., 4096) = 4096
&gt;mmap(0, 974392, PROT_READ|PROT_EXEC, MAP_PRIVATE, 3, 0) = 0x40019000
&gt;mprotect(0x400ff000, 32312, PROT_NONE)  = 0
&gt;mmap(0x400ff000, 20480, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED, 3,
&gt;0xe5000) = 0x400ff000
&gt;mmap(0x40104000, 11832, PROT_READ|PROT_WRITE,
&gt;MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0x40104000
&gt;close(3)                                = 0
&gt;munmap(0x40014000, 19727)               = 0
&gt;personality(PER_LINUX)                  = 0
&gt;getpid()                                = 20987
&gt;brk(0)                                  = 0x8054a90
&gt;brk(0x8054ac8)                          = 0x8054ac8
&gt;brk(0x8055000)                          = 0x8055000
&gt;time(NULL)                              = 962080724
&gt;ioctl(1, TIOCGWINSZ, {ws_row=62, ws_col=142, ws_xpixel=0, ws_ypixel=0}) = 0
&gt;brk(0x8058000)                          = 0x8058000
&gt;open("/dev/null", O_RDONLY|O_NONBLOCK|0x10000) = -1 ENOTDIR (Not a
&gt;directory)
&gt;open(".", O_RDONLY|O_NONBLOCK|0x10000)  = -1 EIO (Input/output error)
&gt;write(2, "dir: ", 5dir: )                    = 5
&gt;write(2, ".", 1.)                        = 1
&gt;write(2, ": Input/output error", 20: Input/output error)    = 20
&gt;write(2, "\n", 1
&gt;)                       = 1
&gt;close(1)                                = 0
&gt;_exit(1)                                = ?
&gt;[<A HREF="mailto:root@neptune">root@neptune</A> nt]#
&gt;
&gt;Yay :)
&gt;
&gt;Hope I've entertained at least some of you...
&gt;
&gt;Any help appreciated :)
&gt;
&gt;Could it have something to do with /dev/nul vs /dev/null ...?
&gt;
&gt;Heh... coffee time.
&gt;
&gt;
&gt;--
&gt;Nick Morrison
&gt;<A HREF="mailto:nickm@bhwb.nsw.gov.au">nickm@bhwb.nsw.gov.au</A>
&gt;
&gt;Information Technology Officer
&gt;Phone:  +61 8 8082 5813
&gt;Fax:    +61 8 8082 5822
&gt;Mobile: +61 4 1486 0844
&gt;
&gt;Broken Hill Water Board
&gt;PO Box 442
&gt;Broken Hill, NSW 2880
&gt;
&gt;-- 
&gt;LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
&gt;To unsubscribe from the LinuxSA list:
&gt;  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject
&gt;
&gt;

Regards
-------
Richard Sharpe, <A HREF="mailto:sharpe@ns.aus.com">sharpe@ns.aus.com</A>
Samba (Team member, www.samba.org), Ethereal (Team member, www.zing.org)
Co-author, SAMS Teach Yourself Samba in 24 Hours
Author: First Australian 5-day, intensive, hands-on Linux SysAdmin course
Author: First Australian 2-day, intensive, hands-on Samba course

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
