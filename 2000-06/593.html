<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: ATM patch for 2.4.0-test1-ac21" -->
<!-- FromName="Alan Kennington" -->
<!-- FromEmail="akenning@dog.topology.org" -->
<!-- ToName="Werner Almesberger" -->
<!-- ToEmail="almesber@lrc.epfl.ch" -->
<!-- Date="Tue, 20 Jun 2000 11:58:23 +0930" -->
<!-- Id="20000620115823.A30505@dog.topology.org" -->
<!-- Reference="200006191705.TAA28865@lrcsun15.epfl.ch" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: ATM patch for 2.4.0-test1-ac21</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Alan Kennington &lt;<I><A HREF="mailto:akenning@dog.topology.org">akenning@dog.topology.org</A></I>&gt;
  To  : Werner Almesberger &lt;<I><A HREF="mailto:almesber@lrc.epfl.ch">almesber@lrc.epfl.ch</A></I>&gt;
  Date: Tue, 20 Jun 2000 11:58:23 +0930
</PRE>
<H1>Re: ATM patch for 2.4.0-test1-ac21</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
On Mon, Jun 19, 2000 at 07:05:57PM +0200, Werner Almesberger wrote:
&gt; 
&gt; there's a new patch for the ATM code in the 2.4.0-test1-ac21 kernel:
&gt; 

I don't see any "ac21" mentioned at the <A HREF="http://www.kernel.org/">http://www.kernel.org/</A> site.
But I assume that whatever the 2.4 kernel is that is there, it must
be the appropriate kernel version?

&gt; It contains the things I've accumulated over the last two months, mainly
&gt; a set of important fixes for the nicstar driver and several minor bug
&gt; fixes, cleanup, and forward compatibility (sk-&gt;sleep initialization). 

Maybe the nicstar changes will fix my system-hang problem.
However, I prefer the _insight_ method of de-bugging, as opposed
to the _genetic_ method.

It seems to me that the system hang I am having with the nicstar
for the Forerunner LE 155 is certainly in the close-handler for
that driver. It seems to only happen when the close() happens very quickly
after the last write(2) of a series of write-calls.
This suggests strongly that the system-hang is triggered by an interaction
between the top half and bottom half of the nicstar driver when the
TX buffer is not yet empty.
This should make it possible to find the bug by the "insight" method.

If the new kernel and assorted bug fixes _do_ remove the observed
very serious bug, then this could be just a timing thing - and when
CPUs get faster again, the issue could arise again.
In other words, a sleeping gene could re-surface in later generations.
I would be happier if the gene could be removed.

As a beginner to linux-ATM, I don't think I can find the bug quickly
in a 3000-line driver. So I am hoping that someone who is more
familiar with the nicstar code can find the bug.
In the meantime, I'll try my best too. Because my latest invention
depends on it.

Cheers,
Alan Kennington.

--------------------------------------------------------------------
    name: Dr. Alan Kennington
  e-mail: <A HREF="mailto:akenning@dog.topology.org">akenning@dog.topology.org</A>
 website: <A HREF="http://topology.org/">http://topology.org/</A>
    city: Adelaide, South Australia
  coords: 34.89744 S, 138.58970 E
 pgp-key: <A HREF="http://topology.org/key_ak2.asc">http://topology.org/key_ak2.asc</A>

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
