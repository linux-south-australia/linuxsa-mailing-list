<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: verb bad file system or sendmail/procmail error!#$@" -->
<!-- FromName="'Alan Kennington'" -->
<!-- FromEmail="akenning@dog.topology.org" -->
<!-- ToName="'Jake Hawkes'" -->
<!-- ToEmail="jake@infinitylimited.net" -->
<!-- Date="Sun, 22 Apr 2001 07:27:08 +0930" -->
<!-- Id="20010422072708.A6747@dog.topology.org" -->
<!-- Reference="3AE1FDD2.E274B9BF@infinitylimited.net" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: verb bad file system or sendmail/procmail error!#$@</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Alan Kennington &lt;<I><A HREF="mailto:akenning@dog.topology.org">akenning@dog.topology.org</A></I>&gt;
  To  : Jake Hawkes &lt;<I><A HREF="mailto:jake@infinitylimited.net">jake@infinitylimited.net</A></I>&gt;
  Date: Sun, 22 Apr 2001 07:27:08 +0930
</PRE>
<H1>Re: verb bad file system or sendmail/procmail error!#$@</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
On Sat, Apr 21, 2001 at 09:38:26PM +0000, Jake Hawkes wrote:
&gt; Alan Kennington wrote:
&gt; &gt; 
&gt; &gt; This is now looking more like a real problem and less like
&gt; &gt; a glitch.
&gt; &gt; Every now and then, a log file (of which I have dozens)
&gt; &gt; on my shiny new SuSE 7.1 (kernel 2.4.0) machine with
&gt; &gt; a ReiserFS file system develops a block of nulls.
&gt; &gt; This is clearly due to some sort of incomplete closing of a file
&gt; &gt; or something.
&gt; &gt; 
&gt; &gt; Here's a sample from my incoming e-mail folder:
&gt; &gt; 
&gt; &gt; ===============================================================
&gt; &gt; 
&gt; &gt; I'm assuming that the basename function you wrote is the
&gt; &gt; same as that provided in /usr/include/^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^&lt;....&gt;
&gt; 
&gt; Isn't this a buffer overflow attempt? I'm sure that I've seen this
&gt; before when trying to do bad things with ftp.


Jake,

I don't think so.
All the buffer overflow attempts I've seen before contain
a long string Intel CPU no-op commands, which are 0x90 or something
like that. These characters which I see are nulls.

The nulls in this case have overwritten the incoming e-mail folder -
not appended to it. And besides, I can't think why procmail (which is
used for local mail delivery in SuSE distributions) would back-track
in the mail folder and overwrite with nulls.

I also see these blocks of nulls occasionally in http log files.

Oddly, in this case the nulls are not block-aligned.
In "od -ah", I get this:

=================================================================
0004740   d  sp   i   n  sp   /   u   s   r   /   i   n   c   l   u   d
        2064 6e69 2f20 7375 2f72 6e69 6c63 6475
0004760   e   / nul nul nul nul nul nul nul nul nul nul nul nul nul nul
        2f65 0000 0000 0000 0000 0000 0000 0000
0005000 nul nul nul nul nul nul nul nul nul nul nul nul nul nul nul nul
        0000 0000 0000 0000 0000 0000 0000 0000
*
0007440 nul nul nul nul nul   F   r   o   m  sp   G   s   t  [...]
        0000 0000 4600 6f72 206d 7347 [...]  
=================================================================

This is clearly not block-aligned.
The total number of nulls seems to be 
07445 - 04762 = 3877 - 2546 = 1331 bytes.

Hmmm. This doesn't look like a file-system sort of thing.
Except that it also occurs in the httpd log files.

The only time I've seen any corruption in incoming mail folders
before is when two processes are trying to modify the folder
at the same time, and that isn't the case here.

Cheers, and thanks,
Alan Kennington.

--------------------------------------------------------------------
    name: Dr. Alan Kennington
  e-mail: <A HREF="mailto:akenning@topology.org">akenning@topology.org</A>
 website: <A HREF="http://topology.org/">http://topology.org/</A>
    city: Adelaide, South Australia
  coords: 34.88051 S, 138.59334 E
timezone: UTC+0930 <A HREF="http://topology.org/timezone.html">http://topology.org/timezone.html</A>
 pgp-key: <A HREF="http://topology.org/key_ak2.asc">http://topology.org/key_ak2.asc</A>

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
