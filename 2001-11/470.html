<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: Routing Question" -->
<!-- FromName="'Ben Kramer'" -->
<!-- FromEmail="ben@webmedia.com.au" -->
<!-- ToName="'Jeremy Ervine'" -->
<!-- ToEmail="omegasys@adam.com.au" -->
<!-- Date="Thu, 15 Nov 2001 22:05:31 +1030" -->
<!-- Id="20011115220531.448b44e6.ben@webmedia.com.au" -->
<!-- Reference="000001c16d9c$7931b0f0$bd01a8c0@binladen" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: Routing Question</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Ben Kramer &lt;<I><A HREF="mailto:ben@webmedia.com.au">ben@webmedia.com.au</A></I>&gt;
  To  : Jeremy Ervine &lt;<I><A HREF="mailto:omegasys@adam.com.au">omegasys@adam.com.au</A></I>&gt;
  Date: Thu, 15 Nov 2001 22:05:31 +1030
</PRE>
<H1>Re: Routing Question</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Hi Jeremy,

we have done the same thing at work. I found the easiest way to acomplish this was to assign all IP addy's to the server that is our gateway and NAT the apropriate IP's to the servers that we wish to be seen on the internet.
I assume that the client machines on your network are using NAT Masquerading and are not using your real IP's.
Here is an example of how to NAT an IP to a machine:

$IPTABLES -t nat -A POSTROUTING -p all -s 10.5.16.4/32 -o $INET_IFACE -j SNAT --to-source 150.101.555.666
$IPTABLES -t nat -A PREROUTING -p all -d 150.101.555.666/32 -i $INET_IFACE -j DNAT --to-destination 10.5.16.4

(I have changed the real IP's to protect the innocent :o)

I hope this stops you from having to spend 3 hours of your evening trying to get this working for a demo the next day, like I had to !!

Cheers,

Ben...

On Thu, 15 Nov 2001 16:42:15 +1030
"Jeremy Ervine" &lt;<A HREF="mailto:omegasys@adam.com.au">omegasys@adam.com.au</A>&gt; wrote:
&gt; Hi Everyone,
&gt; 
&gt; We have just connected an Internode ADSL service for a client, and we
&gt; have 5 IP_s, and we are trying to think of the best possible way to
&gt; assign two of the IP_s to the other two servers we are running.
&gt; 
&gt; Our linux box is a Redhat 7.2 running a 2.4.7 kernel. We are using the
&gt; Iptables NAT module to give Internet access to all the other PC's in the
&gt; organization. In the server rack, we also have a Windows 2000 server,
&gt; and a Windows NT server. We would like to assign each of these servers
&gt; an IP, however we weren't sure if we should setup Static Routes, or can
&gt; it be done dynamically with NAT ?
&gt; 
&gt; Any help appreciated.
&gt; 
&gt; Regards,
&gt; Jeremy Ervine
&gt; 
&gt; -- 
&gt; LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
&gt; To unsubscribe from the LinuxSA list:
&gt;   mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject
&gt; 
&gt; 
&gt; 

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
