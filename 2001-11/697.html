<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: awk syntax: combining 2 files with 'if' statements" -->
<!-- FromName="'Peter Clifford'" -->
<!-- FromEmail="peter.clifford@adelaide.edu.au" -->
<!-- ToName="" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Fri, 23 Nov 2001 11:40:56 +1000" -->
<!-- Id="2780323270.2327027803@adelaide.edu.au" -->
<!-- Reference="" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: awk syntax: combining 2 files with 'if' statements</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Peter Clifford &lt;<I><A HREF="mailto:peter.clifford@adelaide.edu.au">peter.clifford@adelaide.edu.au</A></I>&gt;
  To  : &lt;<I><A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A></I>&gt;
  Date: Fri, 23 Nov 2001 11:40:56 +1000
</PRE>
<H1>Re: awk syntax: combining 2 files with 'if' statements</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
okay, thanks for that Glen :)
will give it a try.

&gt; Peter Clifford wrote:
&gt; &gt; 
&gt; &gt; i want to use awk (since i am quite enjoying learning it) to do a
&gt; &gt; statement which is something like:
&gt; &gt; if filename (from file1) = filename (from file2) AND station name
&gt; &gt; (file1) = station name (file2)
&gt; &gt; then
&gt; &gt; add $3 (file1) to file2 ($11 would do)
&gt; 
&gt; There are two solutions, depending if you want to hold
&gt; the files in main memory or not (which in turn depends
&gt; upon the size of the files).  They are sketched below.
&gt; 
&gt; 1) Classic "tape merge"
&gt; 
&gt; Sort the two files on $3 using the system sort command.
&gt; Merge the two sorted files with $3 as the key, see Knuth
&gt; v3 Algorithm M "two-way merge".
&gt; 
&gt; 2) Build associative array, write array at end
&gt; 
&gt; Use $3 as the key to an associative array.
&gt; 
&gt; example.awk contains
&gt; &gt; BEGIN {
&gt; &gt;   while (getline &lt;file1.txt &gt; 0) {
&gt; &gt;     remember[$3] = $10
&gt; &gt;   }
&gt; &gt; 
&gt; &gt; {
&gt; &gt;   if ($3 in remember) {
&gt; &gt;     print $0, remember[$3]
&gt; &gt;   }
&gt; &gt; }
&gt; invoked with
&gt; awk -f example.awk file2.txt
&gt; 
&gt; &gt; Just went to the computer science department here at uni
&gt; &gt; and talked to random people to see if they could help me
&gt; &gt; out (including their IT support)....no go. (no offensive
&gt; &gt; if the IT support for the CS department are on this list).
&gt; 
&gt; The IT support people are system adminstration experts,
&gt; not computer programming experts.  As far as I know
&gt; Comp Sci don't run a formal "consulting" programme
&gt; for uni staff where people can get access to a staff
&gt; member for 30 minutes, although I've always found them
&gt; happy to help.
&gt; 
&gt; Best wishes,
&gt; Glen
&gt; 
&gt; -- 
&gt; Glen Turner                                 Network Engineer
&gt; (08) 8303 3936      Australian Academic and Research Network
&gt; <A HREF="mailto:glen.turner@aarnet.edu.au">glen.turner@aarnet.edu.au</A>          <A HREF="http://www.aarnet.edu.au/">http://www.aarnet.edu.au/</A>
&gt; --
&gt; The revolution will not be televised, it will be digitised
&gt; 

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
