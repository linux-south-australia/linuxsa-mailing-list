<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: ssh-agent parenting for KDE virtual terminals" -->
<!-- FromName="'Alan Kennington'" -->
<!-- FromEmail="ak.linuxsa@topology.org" -->
<!-- ToName="'LinuxSA'" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Wed, 30 Apr 2003 13:59:04 +0930" -->
<!-- Id="20030430135904.A24906@dog.topology.org" -->
<!-- Reference="20030429230413.GA68635@internode.com.au" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: ssh-agent parenting for KDE virtual terminals</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Alan Kennington &lt;<I><A HREF="mailto:ak.linuxsa@topology.org">ak.linuxsa@topology.org</A></I>&gt;
  To  : LinuxSA &lt;<I><A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A></I>&gt;
  Date: Wed, 30 Apr 2003 13:59:04 +0930
</PRE>
<H1>Re: ssh-agent parenting for KDE virtual terminals</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
On Wed, Apr 30, 2003 at 08:34:13AM +0930, Nick Morrison wrote:
&gt; On Wed, Apr 30, 2003 at 05:07:25AM +0930, Alan Kennington said:
&gt; &gt; Question:
&gt; &gt; How do you make an ssh-agent process the parent of all virtual terminal
&gt; &gt; and konsole processes running under KDE.
&gt; 
&gt; put "ssh-agent startkde" in your ~/.xinitrc or ~/.xsession file.
&gt; 
&gt; -- 

Nick,

Thanks very much indeed for that.
That's ended my misery. 
(Now I have to face the greater misery of sound card configuration!)

I checked on my SuSE 8.1 system and found this in the .Xsession <A HREF="file:">file:</A>

========================================================
#
# If ssh is configured and ssh-agent is wanted set "yes"
#
usessh="no"

[...]

#
# Run ssh-agent only if ssh is configured and avaliable.
#
sshagent="no"
if test "$usessh" = "yes" -a -d $HOME/.ssh ; then
    type ssh-agent &gt; /dev/null 2&gt;&1 && sshagent="yes"
fi

if test -f $HOME/.xinitrc ; then
    if test "$sshagent" = "yes" ; then
        exec ssh-agent $HOME/.xinitrc
    else
        exec /bin/bash $HOME/.xinitrc
    fi
========================================================

Well this is superb. Now my ssh-agent is working perfectly after months
of hating to log out of KDE because I would have to run "ssh-agent csh"
in one window of KDE, delete all the other windows and recreate them
with "xterm &" every time. 

Now I have to work out how the average user would be able to figure this
out. This is the kind of thing that in a user-friendly system like KDE
should be in a pop-up config menu somewhere. Instead it seems
like you're expected to edit a Bourne shell.
My searches in Google turned up nothing like this.

++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
To David Lloyd:

On this SuSE 8.1 system, there's no directory /etc/X11/Xsession.d/
or file  /etc/X11/Xsession. 
Obviously the Debian X standard must be different to the SuSE X standard.
I'm always amazed that I've never seen the same X set-up on any two
versions even of any linux distribution, let alone consistency
within one distribution. This implies that X configuration skills
are highly unportable.

Last night I even managed to re-parent the ksmserver process to
ssh-agent, but that didn't help, and I gather that ksmserver is
a session manager.
I find it also strange that none of the core processes that get
KDE up and started are documented in the docs.kde.org site.
Neither ksmserver, kwin, etc. etc. seem to be documented there.
Are users really expected to read several dozen scripts in order
to find the one to edit to get ssh-agent going with KDE?
Things could be worse, I suppose.
On my first Redhat installation in about 1995, it took me 2 years
to realize that "startx" would create X windows. And it took
a few months after that to work out how to configure the ethernet card
so that I didn't have to use floppy disks to transfer files.
So for 2 years I had a single text console and no net connection.

Anyway, I'll get out of your way now...
Cheers,
Alan Kennington.

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A> IRC: #linuxsa on irc.freenode.net
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
