<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="NFS all_squash option failing?" -->
<!-- FromName="'Dan Kortschak'" -->
<!-- FromEmail="dan.kortschak@adelaide.edu.au" -->
<!-- ToName="" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Tue, 1 Apr 2003 08:30:19 +0930 (CST)" -->
<!-- Id="Pine.LNX.4.44.0304010808560.1130-100000@sunya.kortschak.wattle.id.au" -->
<!-- Reference="" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: NFS all_squash option failing?</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Dan Kortschak &lt;<I><A HREF="mailto:dan.kortschak@adelaide.edu.au">dan.kortschak@adelaide.edu.au</A></I>&gt;
  To  : &lt;<I><A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A></I>&gt;
  Date: Tue, 1 Apr 2003 08:30:19 +0930 (CST)
</PRE>
<H1>NFS all_squash option failing?</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Hi All, I have just install a very nice incremental remote backup system
writen by Ole Nielsen at ANU
(<A HREF="http://datamining.anu.edu.au/~ole/work/software/backup/">http://datamining.anu.edu.au/~ole/work/software/backup/</A>). In order to
make the system really easy to use I am using NFS to export the backup
directory as ro back to the client machine. However, I am unable to get
the nfs options all_squash and anonuid to squash the uids to the
appropriate value. Does anyone have an idea what is going on? Are low uids
protected?

To keep backups from different machines distinct there are dummy users
named for the machines that are backed up, so sunya (a client machine) is
a user on wokai (the backup server).

The backup directory on the backup server (wokai):
<A HREF="mailto:sunya@wokai">sunya@wokai</A>:~$ ls -l
total 12
drwxr-xr-x    5 sunya    backup       4096 Mar 31 16:51 Backup.31Mar2003_16:50:35
drwxr-xr-x    5 sunya    backup       4096 Mar 31 19:06 Backup.31Mar2003_19:06:01
drwxr-xr-x    5 sunya    backup       4096 Apr  1 08:04 MOST_RECENT

The appropriate line of /etc/exports on the backup server:
/backup/sunya   sunya(ro,all_squash,anonuid=34)

Note uid 34 is user backup on Debian systems.

However, on the client (sunya):
# ll /backup
total 12
drwxr-xr-x    5 1001     backup       4096 Mar 31 16:51 Backup.31Mar2003_16:50:35
drwxr-xr-x    5 1001     backup       4096 Mar 31 19:06 Backup.31Mar2003_19:06:01
drwxr-xr-x    5 1001     backup       4096 Apr  1 08:04 MOST_RECENT

uid 1001 is sunya on wokai.


This problem does not break the backup system, however the glossy ease of
use part (having the backup images mounted) is not quite how I would like
it.

any help appreciated
cheers
Dan

-- 
_____________________________________________________________   .`.`o
                                                         o| ,\__ `./`r
  Dan Kortschak     kortschak at fuckmicrosoft.com       &lt;\/    \_O&gt; O
                                                          "|`...'.\
  Is a citizen subject to the laws of a criminal state?    `      :\
                                                                  : \

  See headers for PGP public key.

  By replying to this email you implicitly accept that your response
  may be forwarded to other recipients.


-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A> IRC: #linuxsa on irc.freenode.net
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
