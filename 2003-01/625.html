<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: Search & Replace" -->
<!-- FromName="'Andrew Lord'" -->
<!-- FromEmail="andrewlord@internode.on.net" -->
<!-- ToName="" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Tue, 14 Jan 2003 23:32:55 +1030" -->
<!-- Id="200301142332.55495.andrewlord@internode.on.net" -->
<!-- Reference="3E20B273.5020401@netscape.net" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: Search & Replace</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Andrew Lord &lt;<I><A HREF="mailto:andrewlord@internode.on.net">andrewlord@internode.on.net</A></I>&gt;
  To  : &lt;<I><A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A></I>&gt;
  Date: Tue, 14 Jan 2003 23:32:55 +1030
</PRE>
<H1>Re: Search & Replace</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
On Sun, 12 Jan 2003 10:40 am, you wrote:
&gt; I used a command in a spamassassin script I wrote.
&gt;
&gt; *Goes to download it*
&gt;
&gt; The command:
&gt;
&gt; perl -i -wpe 's/type", "pop3"/type","movemail"/g' prefs.js
&gt;
&gt; Scans the prefs.js file for ----&gt;                   type", "pop3"
&gt;
&gt; and replaces any incident of it with -------&gt;
&gt;  type","movemail"

Thanks James,

Yes, it certainly works as well as the one I found, for the contents of files 
in the current directory, but unfortunately doesn't work recursively and 
doesn't change the file (or directory) name either.  Thanks for the thought.

Cheers,

Andrew Lord
&gt;
&gt; This is the only Perl that I know to refer to now and then, and I have
&gt; no idea what the -i or -wpe means, other than, it works.
&gt;
&gt; James Leone
&gt;
&gt; <A HREF="mailto:andrewlord@internode.on.net">andrewlord@internode.on.net</A> wrote:
&gt; &gt;On Fri, 10 Jan 2003 10:34 pm, Ant wrote:
&gt; &gt;
&gt; &gt;Thanks for your reply Ant,
&gt; &gt;
&gt; &gt;&gt;How about (untested):?
&gt; &gt;&gt;
&gt; &gt;&gt;find . --exec perl -pi 's/targetText/replacementText/g' {} \;
&gt; &gt;
&gt; &gt;Well I tried this as you suggested and the response result was:
&gt; &gt;
&gt; &gt;find: invalid predicate `-pi'
&gt; &gt;
&gt; &gt;Upon trying this, I realised that I had left an '-e' out of the line I
&gt; &gt; posted to the group.  Unforgivable and I hope it's wasted no-ones time as
&gt; &gt; a result. Appologies if it has.
&gt; &gt;
&gt; &gt;The correct line shold have read
&gt; &gt; bash $    perl -pi -e 's/targetText/replacementText/g' *
&gt; &gt;
&gt; &gt;So I've gone and tried a few different options based on your suggestions
&gt; &gt; and the results follow:
&gt; &gt;$  find . --exec perl -pi -e 's/targetText/replacementText/g' {}\;
&gt; &gt; find: invalid predictate `--exec'
&gt; &gt;$  find . perl -pi -e 's/targetText/replacementText/g' {}\;
&gt; &gt; find: invalid predictate `-pi'
&gt; &gt;$  find . perl -e 's/targetText/replacementText/g' {}\;
&gt; &gt; find: invalid predictate `-e'
&gt; &gt;$  find . perl -e 's/targetText/replacementText/g' {}\;
&gt; &gt; ./directoryname
&gt; &gt; ./directoryname/filename
&gt; &gt; ./directoryname/filename2   (etc)
&gt; &gt; ./directoryname/subdirectoryname  (etc)
&gt; &gt; find: s/targetText/replacementText/g: No such file or directory
&gt; &gt; find: {};: No such file or directory
&gt; &gt;
&gt; &gt;So basically the final command succeeds in recursively listing the entire
&gt; &gt;contents of that directory, but no changes.
&gt; &gt;
&gt; &gt;I've now resorted to a longer trawl of the web and found the following. 
&gt; &gt; It works well for replacing 'this' with 'that', recursively, in all .html
&gt; &gt; files (or in any file at all using * instead) but unfortunately fails to
&gt; &gt; change file names and directory names.
&gt; &gt;
&gt; &gt;Nevertheless, for anyone else interested, the line is:
&gt; &gt;find . -print | egrep "*\.html" | xargs perl -pi -e 's/this/that/g'
&gt; &gt;
&gt; &gt;Works down through two subdirectories and I suppose it would work further
&gt; &gt; too (not tested though).
&gt; &gt;
&gt; &gt;I'd welcome further suggestions on how this could be enhanced to replace
&gt; &gt;'this' with 'that' in file and directory names, or even any ideas on a
&gt; &gt;separate line of code that will do this task.
&gt; &gt;
&gt; &gt;Cheers,
&gt; &gt;
&gt; &gt;Andrew Lord


-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A> IRC: #linuxsa on irc.openprojects.net
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
