<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: Search & Replace" -->
<!-- FromName="'Andrew Lord'" -->
<!-- FromEmail="andrewlord@internode.on.net" -->
<!-- ToName="" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Sun, 12 Jan 2003 00:26:27 +1030" -->
<!-- Id="200301120025.41331.andrewlord@internode.on.net" -->
<!-- Reference="008701c2b8a0$726b2da0$3302a8c0@ant" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: Search & Replace</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Andrew Lord &lt;<I><A HREF="mailto:andrewlord@internode.on.net">andrewlord@internode.on.net</A></I>&gt;
  To  : &lt;<I><A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A></I>&gt;
  Date: Sun, 12 Jan 2003 00:26:27 +1030
</PRE>
<H1>Re: Search & Replace</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
On Fri, 10 Jan 2003 10:34 pm, Ant wrote:

Thanks for your reply Ant,

&gt;
&gt; How about (untested):?
&gt;
&gt; find . --exec perl -pi 's/targetText/replacementText/g' {} \;

Well I tried this as you suggested and the response result was:

find: invalid predicate `-pi'

Upon trying this, I realised that I had left an '-e' out of the line I posted 
to the group.  Unforgivable and I hope it's wasted no-ones time as a result.  
Appologies if it has.

The correct line shold have read
 bash $    perl -pi -e 's/targetText/replacementText/g' *
 
So I've gone and tried a few different options based on your suggestions and 
the results follow:
$  find . --exec perl -pi -e 's/targetText/replacementText/g' {}\;
 find: invalid predictate `--exec'
$  find . perl -pi -e 's/targetText/replacementText/g' {}\;
 find: invalid predictate `-pi'
$  find . perl -e 's/targetText/replacementText/g' {}\;
 find: invalid predictate `-e'
$  find . perl -e 's/targetText/replacementText/g' {}\;
 ./directoryname
 ./directoryname/filename
 ./directoryname/filename2   (etc)
 ./directoryname/subdirectoryname  (etc)
 find: s/targetText/replacementText/g: No such file or directory
 find: {};: No such file or directory

So basically the final command succeeds in recursively listing the entire 
contents of that directory, but no changes.  

I've now resorted to a longer trawl of the web and found the following.  It 
works well for replacing 'this' with 'that', recursively, in all .html files 
(or in any file at all using * instead) but unfortunately fails to change 
file names and directory names.

Nevertheless, for anyone else interested, the line is:
find . -print | egrep "*\.html" | xargs perl -pi -e 's/this/that/g'

Works down through two subdirectories and I suppose it would work further too 
(not tested though).

I'd welcome further suggestions on how this could be enhanced to replace 
'this' with 'that' in file and directory names, or even any ideas on a 
separate line of code that will do this task.

Cheers,

Andrew Lord


-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A> IRC: #linuxsa on irc.openprojects.net
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
