<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Black Magic and Kernel recompiles" -->
<!-- FromName="'Matthew Geddes'" -->
<!-- FromEmail="mgeddes@tellurian.com.au" -->
<!-- ToName="" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="15 Jan 2003 09:26:10 +1030" -->
<!-- Id="1042584970.22335.205.camel@hilarious" -->
<!-- Reference="" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Black Magic and Kernel recompiles</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Matthew Geddes &lt;<I><A HREF="mailto:mgeddes@tellurian.com.au">mgeddes@tellurian.com.au</A></I>&gt;
  To  : &lt;<I><A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A></I>&gt;
  Date: 15 Jan 2003 09:26:10 +1030
</PRE>
<H1>Black Magic and Kernel recompiles</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Hey all,

For the entire 7.x series and release 8.0 of RedHat's distribution, I
and a number of others have had problems when trying to recompile the
kernel from the sources provided by RedHat. Has anyone worked out what
black magic is required to build a RedHat kernel?

I've tried using my usual build method, which works on all other
distributions I run. I have also tried (on a freshly installed
kernel-source-* RPM) the RedHat Way(tm):

<A HREF="http://www.redhat.com/docs/manuals/linux/RHL-8.0-Manual/custom-guide/ch-custom-kernel.html">http://www.redhat.com/docs/manuals/linux/RHL-8.0-Manual/custom-guide/ch-custom-kernel.html</A>

I've tried using an unmodified .config file from the configs directory.
The architecture I'm building for (as well as the CPU model) all match,
but it doesn't compile.

The errors I see are different depending on which build process I follow
and which .config options I use, but more often than not, gcc complains
about syntax errors. The kernel headers also match the version of the
kernel source and gcc is being called with the '-nostdinc', so it
shouldn't be the fact that the kernel includes under /usr/include are
not the version as the kernel (but rather the same as the kernel that
was used to build glibc).

Also, it's not easy to work out if there is actually a syntax problem. I
don't think that the code it's complaining about is broken - I think
that the line numbers are wrong.

Tried Google on a couple of the errors I've seen, but if I get any hits,
they're usually unanswered postings to mailing lists or they're replied
to with "I had the same problem, but it kinda went away by itself".

I don't even think that it's a dependency thing added by RedHat. I've
tried compiling on a machine that had a full RedHat 8.0 install, but to
no avail.

Normally, I'd dump the RedHat kernel and use a stock kernel, but in this
case, I really need to use a very specific RedHat kernel.

Any suggestions?

thx,
Matt


-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A> IRC: #linuxsa on irc.openprojects.net
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
