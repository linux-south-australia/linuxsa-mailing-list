<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="POP-3 server script" -->
<!-- FromName="'Richard White'" -->
<!-- FromEmail="rwhite@physics.otago.ac.nz" -->
<!-- ToName="'LinuxSA'" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Thu, 01 Mar 2001 15:04:04 +1030" -->
<!-- Id="3A9DD13C.B4112EEF@physics.otago.ac.nz" -->
<!-- Reference="" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: POP-3 server script</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Richard White &lt;<I><A HREF="mailto:rwhite@physics.otago.ac.nz">rwhite@physics.otago.ac.nz</A></I>&gt;
  To  : LinuxSA &lt;<I><A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A></I>&gt;
  Date: Thu, 01 Mar 2001 15:04:04 +1030
</PRE>
<H1>POP-3 server script</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
I have a Linux gateway machine with a PPP connection to an ISP.  The PPP
link is up during business hours but is a dial-on-demand connection
overnight and during weekends (to save money).

Anyway, my problem is that during the disconnected times, emails are not
automatically retrieved from the ISP (fetchmail only does this during
business hours).  This means that when a user checks their email
afterhours they will not get their messages sitting on the ISP's server.

To get around this, I have written a script (called ipop3d.sh) which is
run by inetd in place of the normal pop-3 server (ipop3d).  During
business hours the ipop3d.sh script just hands the request over to the
standard ipop3d, but afterhours it does the following:

1) Initiates a PPP connection (by pinging the ISP)
2) Downloads any emails from the ISP (using fetchmail)
3) Hands the pop-3 request over to the standard ipop3d

This works very well (apart from a delay when the connection is coming
up and fetchmail is retreiving the email), and the user gets all their
mail.

What I'm a bit concerned about, is whether this approach affects tcp
wrappers in any way.  Can anyone let me know if there are any security
issues here that I've overlooked?

Thanks,
Richard

Richard White

Photon Engineering Pty. Ltd.
Semiconductor and Solid-State Laser Technology
PO Box 10269 Gouger Street
Adelaide, SA 5000
Australia
Tel: +61 8 8410 4599
Fax: +61 8 8410 4544
<A HREF="http://www.photonengineering.com.au">http://www.photonengineering.com.au</A>

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
