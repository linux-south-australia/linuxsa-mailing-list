<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: Checking PHP variables [newbie]" -->
<!-- FromName="'Jake Hawkes'" -->
<!-- FromEmail="jake@infinitylimited.net" -->
<!-- ToName="'John Edwards'" -->
<!-- ToEmail="isplist@pinnacle.net.au" -->
<!-- Date="Thu, 29 Mar 2001 02:02:25 +0000" -->
<!-- Id="3AC297B1.71A85BC3@infinitylimited.net" -->
<!-- Reference="20010326155126.657562e0.rhett@theinbox.org" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: Checking PHP variables [newbie]</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Jake Hawkes &lt;<I><A HREF="mailto:jake@infinitylimited.net">jake@infinitylimited.net</A></I>&gt;
  To  : John Edwards &lt;<I><A HREF="mailto:isplist@pinnacle.net.au">isplist@pinnacle.net.au</A></I>&gt;
  Date: Thu, 29 Mar 2001 02:02:25 +0000
</PRE>
<H1>Re: Checking PHP variables [newbie]</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
John Edwards wrote:
&gt; 
&gt; Rhett wrote:
&gt; 
&gt; &gt; I'm currently working with PHP, and using variables to form part of the SQL queries of a database.
&gt; &gt;
&gt; &gt; I was wondering, how's the best way to make sure the variables don't contain malicious SQL statements? If someone modifies the url the browser is calling to say "?query=blah';alter table database rename"...
&gt; 
&gt; There are lots of dangerous escape characters and even trying to allow
&gt; for them can still leave you vulnerable to unicode oddities on some
&gt; platforms.
&gt; 
&gt; The safest ways to deal with this threat are to check all variables, ie:
&gt; 
&gt; if (ereg("^[:alpha]",$query){
&gt;         die("Invalid Character Detected");
&gt; }
&gt; 
&gt; You might need to fine tune this to allow for spaces, hyphens and
&gt; whatever else you need in queries. Don't forget the irish folk who like
&gt; apostrophes in their names :)
&gt; 
&gt; A longer alternative might be:
&gt; ereg("^[A-Za-z0-9-]",$query).
&gt; 
&gt; If you need to allow the "-" character, make it the last one in the
&gt; regex.
&gt; 
&gt; In some development environments, you can call the sql statement like
&gt; "SELECT * FROM table WHERE X=?" and use $query as a parameter, so that
&gt; it's only treated as data to replace ? instead of being part of the SQL
&gt; statement. The ? has special meaning as opposed to just putting the
&gt; string "$query" in the sql statement.
&gt; 
&gt; It doesn't look like you can do this with PHP.
&gt; 


Also, think about the design of your web site. Consider designing it so
that the query is not on the URL line (I forget which one is POST and
which one is GET...)
--
Jake Hawkes B.Eng, (CSE)

We are upping our standards ... so up yours. - Pat Paulsen for
President,
1988.

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
