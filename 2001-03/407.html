<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Squid port problems" -->
<!-- FromName="'Phil Hutton'" -->
<!-- FromEmail="phil@hutton.sh" -->
<!-- ToName="" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Mon, 12 Mar 2001 22:26:03 +1030" -->
<!-- Id="20010312222603.C13948@odin.hutton.sh" -->
<!-- Reference="" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Squid port problems</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Phil Hutton &lt;<I><A HREF="mailto:phil@hutton.sh">phil@hutton.sh</A></I>&gt;
  To  : &lt;<I><A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A></I>&gt;
  Date: Mon, 12 Mar 2001 22:26:03 +1030
</PRE>
<H1>Squid port problems</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Hi...

I have a squid cache that dies regularly (almost every day).

At some stage the squid child process dies.  There are no entries in
the cache.log at this time, but the following appears in
/var/log/messages:

Mar 12 20:40:40 proxy squid[676]: Squid Parent: child process 679 exited due to signal 11
Mar 12 20:40:40 proxy kernel: Unable to handle kernel NULL pointer dereference at virtual address 00000004
Mar 12 20:40:40 proxy kernel: current-&gt;tss.cr3 = 0f897000, %cr3 = 0f897000
Mar 12 20:40:40 proxy kernel: *pde = 00000000
Mar 12 20:40:40 proxy kernel: Oops: 0000
Mar 12 20:40:40 proxy kernel: CPU:    0
Mar 12 20:40:40 proxy kernel: EIP:    0010:[free_wait+66/116]
Mar 12 20:40:40 proxy kernel: EFLAGS: 00010007
Mar 12 20:40:40 proxy kernel: eax: 00000000   ebx: cf14e600   ecx: c8d14404   edx: 00000000
Mar 12 20:40:40 proxy kernel: esi: cf14e5fc   edi: cf14e000   ebp: 00000287   esp: cf87ff88
Mar 12 20:40:40 proxy kernel: ds: 0018   es: 0018   ss: 0018
Mar 12 20:40:40 proxy kernel: Process squid (pid: 679, process nr: 12, stackpage=cf87f000)
Mar 12 20:40:40 proxy kernel: Stack: cf14e000 cdd913f0 c0130af4 cf14e000 cf87e000 00000302 bfffdda4 bfffdd48
Mar 12 20:40:40 proxy kernel:        cf87e000 00000001 cf87e000 cf14e000 cdd91000 00000001 c010a1a8 bfffdda4
Mar 12 20:40:40 proxy kernel:        0000007e 00000302 00000302 bfffdda4 bfffdd48 000000a8 c010002b 0000002b
Mar 12 20:40:40 proxy kernel: Call Trace: [sys_poll+336/364] [system_call+52/56] [startup_32+43/285]  
Mar 12 20:40:40 proxy kernel: Code: 8b 42 04 39 d8 75 f7 89 4a 04 55 9d ff 36 e8 23 77 ff ff 83  


After that the parent squid process tries to start another child, and
the following entries appear in the cache.log:

2001/03/12 20:40:43| commBind: Cannot bind socket FD 8 to *:8080: (98)
Address already in use
FATAL: Cannot open HTTP Port
Squid Cache (Version 2.3.STABLE4): Terminated abnormally.


So it would appear that something odd is happening so that squid
dies, and the port doesn't get released.  Doing netstat -lp at this
stage lists the port (8080) but the PID is "-".

Does anyone have any idea what's causing this?  It's a really standard
configuration, and I hope that a configuration problem can't cause the
kernel to dereference a NULL pointer.  So I'm thinking it might be
hardware.  Any sugestions would be greatly appreciated.

Phil.

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
