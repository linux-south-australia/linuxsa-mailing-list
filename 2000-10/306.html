<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="fsck stuff (longish)" -->
<!-- FromName="Andrew" -->
<!-- FromEmail="adnaismi@cs.adelaide.edu.au" -->
<!-- ToName="" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Tue, 10 Oct 2000 10:50:25 +0930 (CST)" -->
<!-- Id="Pine.SV4.3.93.1001010103334.12024A-100000@krypton" -->
<!-- Reference="" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: fsck stuff (longish)</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Andrew &lt;<I><A HREF="mailto:adnaismi@cs.adelaide.edu.au">adnaismi@cs.adelaide.edu.au</A></I>&gt;
  To  : <A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A>
  Date: Tue, 10 Oct 2000 10:50:25 +0930 (CST)
</PRE>
<H1>fsck stuff (longish)</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
While there is some talk about fsck going around I thought i'd ask a
couple of questions. Often when a machine isn't shutdown properly, fsck
stops and asks the user to repair a filesystem manually. In particular
this piece of code in the start up scripts (/etc/init.d/checkfs.sh):-

 fsck -C -R -A $fix $force
    if [ $? -gt 1 ]
    then
      echo
      echo "fsck failed.  Please repair manually."
      echo
      echo "CONTROL-D will exit from this shell and continue system
startup."
      echo
      # Start a single user shell on the console
      /sbin/sulogin $CONSOLE
    fi

You can force fsck to repair problems by altering the fsckfix variable
(/etc/default/rcS) :-

# Set FSCKFIX to "yes" if you want to add "-y" to the fsck at startup.
FSCKFIX=no

Now basically I was wondering if i was to set fsckfix to yes, what are the
consequences of doing so ? and will fsck ever stop and ask for user
intervention ? Basically I want this remote machine to come up EVERY time
I reboot.

Should I also be calling fsck with the '-a' option, the man page (man
fsck) :-

 -a           Automatically  repair  the  file system without any
              questions (use this  option  with  caution).   Note
              that  e2fsck(8)  supports -a for backwards compati
              bility only.  This option is mapped to e2fsck's  -p
              option  which  is safe to use, unlike the -a option
              that most file system checkers support.

It says use this option with caution, why ? Is it possible that files may
be lost ? Also is it possible that fsck will not be able to fix fs
problems even when the machine has been shutdown succesfully ?

In short : How do I run fsck, so that the machine will reboot no matter
what fs problems (within reason) ?


thanks
Andrew



-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
