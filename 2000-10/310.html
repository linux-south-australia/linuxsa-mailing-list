<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: fsck stuff (longish)" -->
<!-- FromName="Robert Wuttke" -->
<!-- FromEmail="robert.wuttke@disc.com.au" -->
<!-- ToName="Andrew" <adnaismi@cs.adelaide.edu.au>," -->
<!-- ToEmail="adnaismi@cs.adelaide.edu.au" -->
<!-- Date="Tue, 10 Oct 2000 11:15:46 +0930" -->
<!-- Id="004501c0325b$cf094d80$4b000045@disc.com.au" -->
<!-- Reference="Pine.SV4.3.93.1001010103334.12024A-100000@krypton" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: fsck stuff (longish)</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Robert Wuttke &lt;<I><A HREF="mailto:robert.wuttke@disc.com.au">robert.wuttke@disc.com.au</A></I>&gt;
  To  : Andrew" &lt;adnaismi@cs.adelaide.edu.au&gt;, &lt;<I><A HREF="mailto:adnaismi@cs.adelaide.edu.au">adnaismi@cs.adelaide.edu.au</A></I>&gt;
  Date: Tue, 10 Oct 2000 11:15:46 +0930
</PRE>
<H1>Re: fsck stuff (longish)</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Fsck is not to be fscked around with.

A friend of mine (admittedly this was SunOS), did fsck -y and lost the file
system on the particular disk (and it was the disk containing /)

-y is your enemy.

The main reason it is asking you is "I am about to do something which could
kill this drive, are you sure ? (y/N)"

Remember fsck is much more powerful than chkdsk and with more power comes
more ability to scerw things.

Hope this helps.

This is my opinion on the subject anyway.

Rob.


----- Original Message -----
From: "Andrew" &lt;<A HREF="mailto:adnaismi@cs.adelaide.edu.au">adnaismi@cs.adelaide.edu.au</A>&gt;
To: &lt;<A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A>&gt;
Sent: Tuesday, October 10, 2000 10:50 AM
Subject: fsck stuff (longish)


&gt;
&gt; While there is some talk about fsck going around I thought i'd ask a
&gt; couple of questions. Often when a machine isn't shutdown properly, fsck
&gt; stops and asks the user to repair a filesystem manually. In particular
&gt; this piece of code in the start up scripts (/etc/init.d/checkfs.sh):-
&gt;
&gt;  fsck -C -R -A $fix $force
&gt;     if [ $? -gt 1 ]
&gt;     then
&gt;       echo
&gt;       echo "fsck failed.  Please repair manually."
&gt;       echo
&gt;       echo "CONTROL-D will exit from this shell and continue system
&gt; startup."
&gt;       echo
&gt;       # Start a single user shell on the console
&gt;       /sbin/sulogin $CONSOLE
&gt;     fi
&gt;
&gt; You can force fsck to repair problems by altering the fsckfix variable
&gt; (/etc/default/rcS) :-
&gt;
&gt; # Set FSCKFIX to "yes" if you want to add "-y" to the fsck at startup.
&gt; FSCKFIX=no
&gt;
&gt; Now basically I was wondering if i was to set fsckfix to yes, what are the
&gt; consequences of doing so ? and will fsck ever stop and ask for user
&gt; intervention ? Basically I want this remote machine to come up EVERY time
&gt; I reboot.
&gt;
&gt; Should I also be calling fsck with the '-a' option, the man page (man
&gt; fsck) :-
&gt;
&gt;  -a           Automatically  repair  the  file system without any
&gt;               questions (use this  option  with  caution).   Note
&gt;               that  e2fsck(8)  supports -a for backwards compati
&gt;               bility only.  This option is mapped to e2fsck's  -p
&gt;               option  which  is safe to use, unlike the -a option
&gt;               that most file system checkers support.
&gt;
&gt; It says use this option with caution, why ? Is it possible that files may
&gt; be lost ? Also is it possible that fsck will not be able to fix fs
&gt; problems even when the machine has been shutdown succesfully ?
&gt;
&gt; In short : How do I run fsck, so that the machine will reboot no matter
&gt; what fs problems (within reason) ?
&gt;
&gt;
&gt; thanks
&gt; Andrew
&gt;
&gt;
&gt;
&gt; --
&gt; LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
&gt; To unsubscribe from the LinuxSA list:
&gt;   mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject
&gt;
&gt;

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
