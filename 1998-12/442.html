<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: pppd goes mad!" -->
<!-- FromName="Alan Kennington" -->
<!-- FromEmail="akenning@dog.topology.org" -->
<!-- ToName="Stephen Baxter" -->
<!-- ToEmail="steve@senet.com.au" -->
<!-- Date="Tue, 22 Dec 1998 16:51:43 +1030" -->
<!-- Id="199812220621.QAA08995@dog.topology.org" -->
<!-- Reference="" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: pppd goes mad!</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Alan Kennington &lt;<I><A HREF="mailto:akenning@dog.topology.org">akenning@dog.topology.org</A></I>&gt;
  To  : Stephen Baxter &lt;<I><A HREF="mailto:steve@senet.com.au">steve@senet.com.au</A></I>&gt;
  Date: Tue, 22 Dec 1998 16:51:43 +1030
</PRE>
<H1>Re: pppd goes mad!</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Steve,

I've been logging all of my ppp traffic with "tcpdump"
continuously for the last 10 days or so.
Definitely there is no competing traffic on the link.
There are also no competing processes which could hold
up "pppd" for 8.9 seconds out of every 9.

The idea that the compression algorithms in "pppd" could be
causing problem seems to be ruled out by the fact that I
ran "kill -USR2 &lt;pid&gt;" on my pppd process to make it
renegotiate the compression, but the problem is unchanged.

So far I can say the following is happening:

-	My pppd process sends off packets every second.
	(There is no CPU contention, as is shown by the packet times
	and the "ps" command.)

-	The packets are never lost.

-	The packets all sit in a buffer somewhere, and are let go only
	once every 9.5 seconds or so.
	All buffered packets are let go at the same time.
	The location of this buffer is unknown.
	The problem buffer may be in my IP stack or ethernet card
	on the way out,
	in the telstra router, or in my ethernet card or IP stack on
	the way back.

Question:  Is there any way to determine time stamps on
packets at each stage of this loop?

By the way, when I do "kill -USR1 &lt;pid&gt;" on "pppd", which is supposed
to turn on debug options, I get nothing out of pppd in the 
/var/log/messages file.

It's all very mysterious.
If I can't solve this problem, then I will have to 
just kill "pppd" once very day or so to get it working again.
This is _not_ what one would expect in a Unix system.

Now I guess I'll have to read the "ppp" driver software to see if there
are any sleep commands that couldbe holding it up.

Cheers,
Alan Kennington.

-- 
Check out the LinuxSA web pages at <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
