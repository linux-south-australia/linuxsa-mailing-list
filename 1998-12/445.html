<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: pppd goes mad!" -->
<!-- FromName="Alan Kennington" -->
<!-- FromEmail="akenning@dog.topology.org" -->
<!-- ToName="Stephen Baxter" -->
<!-- ToEmail="steve@senet.com.au" -->
<!-- Date="Tue, 22 Dec 1998 17:31:15 +1030" -->
<!-- Id="199812220701.RAA09078@dog.topology.org" -->
<!-- Reference="" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: pppd goes mad!</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Alan Kennington &lt;<I><A HREF="mailto:akenning@dog.topology.org">akenning@dog.topology.org</A></I>&gt;
  To  : Stephen Baxter &lt;<I><A HREF="mailto:steve@senet.com.au">steve@senet.com.au</A></I>&gt;
  Date: Tue, 22 Dec 1998 17:31:15 +1030
</PRE>
<H1>Re: pppd goes mad!</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Steve,

The "top" command shows no problem with the "pppd" program 
(like failing to retrieve garbage etc.):


 5319 root       0   0   172   96    60 S       0  0.0  0.6   0:00 pppd

Size = 172 kB, RSS = 96 kbytes.
I think it's clear that the problem must be in the "ppp" driver
or my modem, a Discovery EISA card in a 486 machine.

The salesperson seemed to be a bit concerned about it when he
sold it to me. The box had been opened, and he asked me to let him
know how it went.
That makes me a bit suspicious about it.

The fact that no one else has reported the "ppp" driver
going to sleep for 8.5 seconds about of every 9 makes me
think that the modem may be at fault -- except that
I woudl have expected either partial or total loss of packets.

A credible mechanism is that the "bottom half" of the "ppp"
driver is not being interrupted correctly.
Maybe some sort of time-out every 9 seconds is the only thing that
wakes up the bottom half of the "ppp" driver.
The top half is woken up by the 100 Hz system clock, I believe,
which makes process packets arrive at drivers.
I'm pretty sure that the kernel collects packets from the driver
every 10 mS. So the most believable theory for me right now
is that the physical IRQ from card to driver is at fault.

Now I'll have to go out and buy a new modem to check out this theory!!

Cheers, and thanks for the help,
Alan Kennington.

PS. I phoned telstra, and they said they'd never heard of
anything like this problem. I also think it's highly unlikely
that such a distinctive problem would go unnoticed for long.

PPS.  If anyone else has had this sort of "sleepy modem"
problem before, please let me know.
I'd also be interested to know how I can monitor the
interrupt requests that my modem is making.

-- 
Check out the LinuxSA web pages at <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
