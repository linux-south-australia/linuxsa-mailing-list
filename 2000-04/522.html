<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: Protecting files against power failure" -->
<!-- FromName="Daryl Tester" -->
<!-- FromEmail="dt@picknowl.com.au" -->
<!-- ToName="Jake Hawkes" -->
<!-- ToEmail="jake@infinitylimited.net" -->
<!-- Date="Fri, 28 Apr 2000 09:20:37 +0930" -->
<!-- Id="3908D24D.77F69ABE@picknowl.com.au" -->
<!-- Reference="Pine.BSF.3.96.1000426175130.12067B-100000@augustus.tellurian.com.au" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: Protecting files against power failure</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Daryl Tester &lt;<I><A HREF="mailto:dt@picknowl.com.au">dt@picknowl.com.au</A></I>&gt;
  To  : Jake Hawkes &lt;<I><A HREF="mailto:jake@infinitylimited.net">jake@infinitylimited.net</A></I>&gt;
  Date: Fri, 28 Apr 2000 09:20:37 +0930
</PRE>
<H1>Re: Protecting files against power failure</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Jake Hawkes wrote:

&gt;&gt; (although, of course, this shouldn't
&gt;&gt; affect the shell's file descriptor - care to hazard a guess why?).

&gt; this feels like a class :) Bueler... Bueler....

:-)  And in this case, even the teacher can be wrong ...

&gt; um, because the file descriptors are passed by value, not reference?

Nyet; they're duplicated with dup() or dup2().  And having just
read up on it (because I'm a little rusty), it says ...

       The  old  and new descriptors may be used interchangeably.
       They share locks, file position pointers  and  flags;  for
       example,  if  the file position is modified by using lseek
       on one of the descriptors, the position  is  also  changed
       for the other.

The embarassing bit being that they "share file position pointers".
And sure enough, if you are warped enough to do the following 
(note the magic 3&lt;&6 in python's command line) ...

[<A HREF="mailto:dt@nipnyep">dt@nipnyep</A> dt]$ python 3&lt;&6
Python 1.5.2 (#1, Sep 17 1999, 20:15:36)  [GCC egcs-2.91.66 19990314/Linux (egcs- on linux-i386
Copyright 1991-1995 Stichting Mathematisch Centrum, Amsterdam
&gt;&gt;&gt; import posix
&gt;&gt;&gt; f = posix.fdopen(3, 'r')
&gt;&gt;&gt; f.seek(0)
&gt;&gt;&gt; ^D

and then cat &lt;&6 once back at the shell prompt, there listed are all
your evil deeds.

&gt; "I'm only smart enough to know how stupid I am", Joe Strummer.

If only I were so smart ("I am so smart, I am so smart, S M R T, I mean
S M A R T!" - our favourite D'oh-ster).

And hopefully, this will protect everyone's files against power failure. :-)


Regards,
  Daryl Tester

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
