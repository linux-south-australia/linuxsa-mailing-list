<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: Protecting files against power failure" -->
<!-- FromName="Daryl Tester" -->
<!-- FromEmail="dt@picknowl.com.au" -->
<!-- ToName="Jake Hawkes" -->
<!-- ToEmail="jake@infinitylimited.net" -->
<!-- Date="Fri, 28 Apr 2000 08:24:14 +0930" -->
<!-- Id="3908C516.69068A67@picknowl.com.au" -->
<!-- Reference="Pine.BSF.3.96.1000426175130.12067B-100000@augustus.tellurian.com.au" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: Protecting files against power failure</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Daryl Tester &lt;<I><A HREF="mailto:dt@picknowl.com.au">dt@picknowl.com.au</A></I>&gt;
  To  : Jake Hawkes &lt;<I><A HREF="mailto:jake@infinitylimited.net">jake@infinitylimited.net</A></I>&gt;
  Date: Fri, 28 Apr 2000 08:24:14 +0930
</PRE>
<H1>Re: Protecting files against power failure</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Jake Hawkes wrote:

&gt; could someone walk through this one?

&gt; exec 5&gt;foo 6&lt;foo

setup file descriptor #5 as output to file foo, #6 as input from file foo.

&gt; ls -l / &gt;&5

ls -l of / (of course :-), and redirect the output to file descriptor #5.

&gt; ls -l foo

foo's size at this point should be non-zero, and contain the contents
of the "ls -l /".

&gt; rm foo

Delete the file.  The file foo is no longer accessible[1].

&gt; cat &lt;&6

What's this?? Black Unix Magic!  We can still retrieve the contents
of file foo (not really[1]), even though it's been deleted!  Well
I never! (despite the rumours).


Regards,
  Daryl "Caffeine Depleted" Tester


[1] The file is no longer accessible from the Unix file namespace,
    but as David's demo so eloquently shows, if you still have an
    open file descriptor to the file you can access its contents.
    Once the number of links drops to zero (ie, the last descriptor
    to the deleted file has been closed), the file space is reclaimed.
    This is the magic of decoupling the name of the file from its inode,
    and gives us other joyous oddities like hard links.  One day, NTFS
    may catch up, but don't hold your breath.

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
