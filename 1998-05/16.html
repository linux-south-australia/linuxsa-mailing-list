<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="damn the carriage returns" -->
<!-- FromName="9505886l" -->
<!-- FromEmail="9505886l@lux.levels.unisa.edu.au" -->
<!-- ToName="" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Mon, 4 May 1998 10:18:47 +0930 (GMT+9:30)" -->
<!-- Id="Pine.SOL.3.91.980504101736.14865A-200000@lux.levels.unisa.edu.au" -->
<!-- Reference="" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: damn the carriage returns</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: 9505886l &lt;<I><A HREF="mailto:9505886l@lux.levels.unisa.edu.au">9505886l@lux.levels.unisa.edu.au</A></I>&gt;
  To  : <A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A>
  Date: Mon, 4 May 1998 10:18:47 +0930 (GMT+9:30)
</PRE>
<H1>damn the carriage returns</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
i have had teh same problem with my latest CS3 assignment.  
here is a snippet of it (compilable) that shows teh problem.

Leigh

/* this is part of my latest CS3 assignment.
	 it works OK under DOS and SunOS, but
	 shows the double-enter needed under linux. */


#include &lt;stdio.h&gt;

#define MAXWORDLEN 15
#define WHITESPACE(digit) (((digit)==' ')||((digit)=='\t')||((digit)=='\n')||((digit)=='\r'))


void get_word (char* word, int *length);


int main(void){

	char word[MAXWORDLEN];
	int length;

	get_word(word,&length);

	printf("Word is %s, length is %d\n\n",word,length);


return(0);
}

/**************************************************\
*                                                  *
*  function get_word()                             *
*    gets a word from the user                     *
*    returns number of characters in word, or      *
*    0 for invalid.                                *
*                                                  *
\**************************************************/

void 
get_word (char *word, int *length)
{

  char character;
  int i, status, found_first_char;

#ifdef DEBUG
  fprintf (stderr, "Function get_word entered\n");
#endif

  found_first_char = 0;

  for (*length = 0; *length &lt;= (MAXWORDLEN); (*length)++)
    {

      /* read the next letter */
      status = scanf ("%1c", &character);

      /* if we see newline after the first character, it is the end of the word, else ignore it */
      if (character == '\n' || character == '\r')
	{
	  if (found_first_char)
	    {

	      /* check the template for whitespace, capitals, non-letter characters 
	         besides _ and count it's length. */

	      i = 0;
	      while (word[i] != '\0')
		{
		  if (WHITESPACE (word[i]) ||
		      ((int) word[i] &lt; 65) ||
		      ((int) word[i] &gt; 122) ||
		      (((int) word[i] &gt; 90) && ((int) word[i] &lt; 97) && ((int) word[i] != 39)))
		    {

		      printf ("Invalid word\n\n");
		      *length = 0;
		      return;
		    }
		  /* de-capitalize - yet another use of ASCII */
		  if (((int) word[i] &lt;= 90) && (int) word[i] != 39)
		    word[i] = (char) (((int) word[i]) + 32);

		  i++;
		}

	      return;
	    }
	  else
	    {
	      (*length)--;
	    }
	}
      else
	{
	  /* add the new letter to the end of the word, maintaining the \0 at the end */
	  word[*length] = character;
	  word[(*length) + 1] = '\0';
	  found_first_char = 1;
	}
    }


  /* if we get to here, word is too long */
  word[(*length) - 1] = '\0';
  printf ("Word entered is too long\n\n");
  /* take the rest of the template off the stream */
  while (character != '\n' && character != '\r')
    {
      character = (char) getchar ();
    }
  *length = 0;
  return;

#ifdef DEBUG
  fprintf (stderr, "Function get_word exited\n");
#endif
}
, é-- 
Check out the LinuxSA web pages at <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
