<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: SQUID using more and more ram..." -->
<!-- FromName="Geoffrey D. Bennett" -->
<!-- FromEmail="g@netcraft.com.au" -->
<!-- ToName="David Buddrige" -->
<!-- ToEmail="David.Buddrige@optum.com.au" -->
<!-- Date="Fri, 8 May 1998 15:14:32 +0930 (CST)" -->
<!-- Id="199805080544.PAA14311@Mich.netcraft.com.au" -->
<!-- Reference="A147EAABA1C6D011AFC900805FCC893E26F341@OPTUM" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: SQUID using more and more ram...</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Geoffrey D. Bennett &lt;<I><A HREF="mailto:g@netcraft.com.au">g@netcraft.com.au</A></I>&gt;
  To  : David Buddrige &lt;<I><A HREF="mailto:David.Buddrige@optum.com.au">David.Buddrige@optum.com.au</A></I>&gt;
  Date: Fri, 8 May 1998 15:14:32 +0930 (CST)
</PRE>
<H1>Re: SQUID using more and more ram...</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
&gt; Hi all,
&gt; 
&gt; I'm running a 486-DX2-66 with 32mb ram and Slackware 3.1 as the office
&gt; internet proxy and firewall... the proxy software I am using is SQUID,
&gt; which I have found to be a preety good program, in that it is giving us
&gt; good internet access times for 30 users in the office going out over a
&gt; single 33kbps link to our isp... however, I have noticed using the top
&gt; command that the amount of RAM that squid uses gradually increases after
&gt; a reboot - starting out fairly low - around 5% of RAM, and gradually
&gt; increasing until it's using about 33% of available ram... by this time
&gt; there is typically only about 500-800kb RAM left unused, and it is then
&gt; I notice things start slowing down... also, soxified programs (we're
&gt; using socks 5 to get past our own firewall) don't work properly once the
&gt; available ram is &lt; 1mb... this is something of a problem... a 486 with
&gt; 32mb ram _should_ be quite sufficient to act as such a gateway/proxy,

Hi David,

Do you not have any swap space?  Having some swap is nearly always a
good idea because it allows unused stuff to be moved to disk so things
like your socks server can have some memory to run in.

&gt; but what this ram problem means is I have to reboot the machine every 4
&gt; days or so... the longest I've been able to go so far is about 14 days
&gt; before a re-boot was necessary... but by then, the internet access was
&gt; crawling along... does anyone know if SQUID has a memory leak problem...
&gt; that's what seems to be suggested by the gradual increase in system
&gt; resources - esp. ram.... but it may be related to the web pages being
&gt; cache'd... (that's my guess anyway)....

I'd say it's definately related to the web pages being cached.  Just
like squid uses disk space to cache files, it also uses ram (after
all, ram is faster).  What is cache_mem set to in your squid.conf?
The default is 8, and I think the general rule of thumb is that squid
will use about 3 times this number.

My suggestion: add swap (if you don't have any), and either add memory
or decrease cache_mem.

Regards,
-- 
Geoffrey D. Bennett (<A HREF="mailto:geoffrey@netcraft.com.au">geoffrey@netcraft.com.au</A>)
Computer Systems Manager, NetCraft Australia
<A HREF="http://www.netcraft.com.au/geoffrey/">http://www.netcraft.com.au/geoffrey/</A>
Red Hat Linux Resellers: <A HREF="http://www.netcraft.com.au/redhat/">http://www.netcraft.com.au/redhat/</A>

-- 
Check out the LinuxSA web pages at <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
