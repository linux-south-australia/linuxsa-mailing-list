<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Apache & DNS" -->
<!-- FromName="'Andrew Pullin'" -->
<!-- FromEmail="andrew@hotspurbgc.com.au" -->
<!-- ToName="" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Thu, 3 Oct 2002 09:34:07 +1000" -->
<!-- Id="000d01c26a6c$37ca1d00$c2de26cb@hotspurbgc.com.au" -->
<!-- Reference="" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Apache & DNS</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Andrew Pullin &lt;<I><A HREF="mailto:andrew@hotspurbgc.com.au">andrew@hotspurbgc.com.au</A></I>&gt;
  To  : &lt;<I><A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A></I>&gt;
  Date: Thu, 3 Oct 2002 09:34:07 +1000
</PRE>
<H1>Apache & DNS</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Hi All,
    I am having a problem getting a website working on a
server. I have RTFMed, and this has shed no light on the
problem and since this is the first time I have tried to set
up Apache, I need a little help. Basically the problem goes
like this:

    I have set up an IP alias on my system and given it the
IP address I want to use for this web site (ie. my server is
203.myIP.193 on eth0:0, and the alias is 203.myIP.250 on
eth0:1). These are correct, visible and pingable etc.

    I have set up DNS with my name servers for this IP
address and delegated the new domain and it is visible on
the net (ie www.mydomain and www.mynewdomain are visible
using DNS diagnostic tools Telstra provide with their DNS
services).

I have a series of web pages set up and they are live on the
net (ie I can get people outside my network to see them).

    This is where the problem starts.

If I type in www.mydomain I get:

Bad Gateway
The following error occurred:

A DNS lookup error occurred. The host was not found.

Note: This was working before I started this project.


If I type in www.mynewdomain I get:

Bad Gateway
The following error occurred:

A DNS lookup error occurred. The host was not found.

Note: This is what I want to get working.


If I type in <A HREF="http://203.myIP.193">http://203.myIP.193</A> I get the index page for my
site www.mydomain

If I type in <A HREF="http://203.myIP.250">http://203.myIP.250</A> I get the index page for my
site www.mydomain


But here is another weird part -

The new web site hangs off the default html directory (which
is /var/www/html/) in a sub-directory that is visible by
typing in <A HREF="http://203.myIP.193/subdir/index.html">http://203.myIP.193/subdir/index.html</A> (as you
would expect).

If I type in <A HREF="http://203.myIP.250/index.html">http://203.myIP.250/index.html</A> I get the index
page for my site www.mynewdomain , which is in
/var/www/html/subdir/index.html.

Here are the two things that are puzzling me:

1.Why does Apache think DNS isn't working when I can get it
to work manually using the normal tools (ping, nslookup,
whois)? BTW my mail and everything else on the server isn't
broken.

2. Why does <A HREF="http://203.myIP.250">http://203.myIP.250</A> get the index page of the
default html directory just like <A HREF="http://203.myIP.193">http://203.myIP.193</A> (my
server and this is the behaviour I would expect) but if I
type in <A HREF="http://203.myIP.250/index.html">http://203.myIP.250/index.html</A> gets the index page
to the new website, which is hanging off the default html
directory in a sub-directory? Logically these two pages are
the same since the default html file is
/var/www/html/index.html.

O.K. here are a few diagnostic tidbits.

The server runs RH7.0 and Apache 1.3.13

The logs are a bit hard to interpret, but seem fine
(access_log and error_log and newaccess_log newerror_log)

httpd.conf
Has HostNameLookups On, but this doesn't seem to make any
difference if it is Off

Has two Virtual hosts set up
NameVirtualHost 203.myIP.193
NameVirtualHost 203.myIP.250
and
&lt;VirtualHost 203.myIP.193&gt;
  ServerName www.mydomain
  DocumentRoot /var/www/html/
&lt;/VirtualHost&gt;

&lt;VirtualHost 203.myIP.250&gt;
  DocumentRoot /var/www/html/subdir/
  ServerName www.mynewdomain

  ErrorLog logs/newerror_log
  CustomLog logs/newaccess_log common
&lt;/VirtualHost&gt;


    What I want in the end to be able to do is type in
www.mydomain and get the index page for mydomain and type in
www.mynewdomain and get the index page for mynewdomain. This
has been annoying me for over a week now, and I am sure that
it is a simple problem to fix, but my limited experience
with Apache is probably blinding me to the answer. If anyone
could assist that would be most appreciated as I needed to
get this site working a couple of weeks ago and it still
isn't. Thanks in advance.
    Cheers!
        Andrew.


-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
