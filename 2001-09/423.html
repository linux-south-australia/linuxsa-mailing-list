<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: samba bug?" -->
<!-- FromName="'Don Collins'" -->
<!-- FromEmail="doncol@mail.mdt.net.au" -->
<!-- ToName="'Ben Williams'" -->
<!-- ToEmail="benw@webmedia.com.au" -->
<!-- Date="Mon, 17 Sep 2001 23:26:54 +0930" -->
<!-- Id="20010917232654.A8633@mail.mdt.net.au" -->
<!-- Reference="GHEFJDGNANAKIODMONDIAEACDEAA.benw@webmedia.com.au" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: samba bug?</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Don Collins &lt;<I><A HREF="mailto:doncol@mail.mdt.net.au">doncol@mail.mdt.net.au</A></I>&gt;
  To  : Ben Williams &lt;<I><A HREF="mailto:benw@webmedia.com.au">benw@webmedia.com.au</A></I>&gt;
  Date: Mon, 17 Sep 2001 23:26:54 +0930
</PRE>
<H1>Re: samba bug?</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Hi Ben,
    The differential between the used space and "size on
disk" is that the used space includes the air for each file to
fill out an allocated block/cluster on the disk.  The OS can
only allocate space to files in chunks (blocks/clusters) of a
set size eg. 4Kbytes (8 sectors @ 512 bytes).  This is done to
keep a manageable size file table (FAT or NTFS).  If a file is a
mere 200bytes on a 4KByte cluster file system, it effectively
uses 4KBytes, 3.98KBytes of which is useless space.  A file of
4.8KBytes will use 8KBytes, 3.2KBytes of which is useless.  The
"size on disk" refers to the actual collective size of file
contents only.  You have already said that there are a lot of
small files, so the differential you quote is not unexpected in
this case.

regards,
Don.

&gt; howdy all,
&gt; 
&gt; i've encountered a strange thing on a samba share, accessed from a win2k
&gt; box (via a mapped network drive, if that makes any difference). there's
&gt; a lot of small files in this share - about 650 of them. when i select
&gt; all under this share and bring up the properties, win2k reports size as
&gt; 1.62mb (1,702,064 bytes), and size on disk as 646mb (677,380,096 bytes)!
&gt; that's a fair discrepancy ;-)
&gt; 
&gt; as far as i can see, it hasn't affected the performance or anything,
&gt; it's just strange. anyone else seen this? is it a known bug?
&gt; 
&gt; my machine: win2k server SP2
&gt; remote machine: redhat 6.2, kernel 2.2.16-3, 'smbclient' reports version
&gt; 2.0.7
&gt; 
&gt;  - Ben
&gt; 
&gt; -- 
&gt; LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
&gt; To unsubscribe from the LinuxSA list:
&gt;   mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject
&gt; 

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
