<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: scsi disk doctor" -->
<!-- FromName="Richard Sharpe" -->
<!-- FromEmail="sharpe@ns.aus.com" -->
<!-- ToName="" -->
<!-- ToEmail="LinuxSA@linuxsa.org.au" -->
<!-- Date="Thu, 14 Oct 1999 20:14:34 +0900" -->
<!-- Id="" -->
<!-- Reference="199910160448.OAA04886@dog.topology.org" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: scsi disk doctor</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Richard Sharpe &lt;<I><A HREF="mailto:sharpe@ns.aus.com">sharpe@ns.aus.com</A></I>&gt;
  To  : <A HREF="mailto:LinuxSA@linuxsa.org.au">LinuxSA@linuxsa.org.au</A>
  Date: Thu, 14 Oct 1999 20:14:34 +0900
</PRE>
<H1>Re: scsi disk doctor</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
At 03:11 PM 10/16/99 +0930, Mark Newton &lt;<A HREF="mailto:newton@atdot.dotat.org">newton@atdot.dotat.org</A>&gt; wrote:
&gt;Alan Kennington wrote:
&gt;
&gt; &gt; PS.  I don't think that re-jumpering the disks would be
&gt; &gt; the way to go.
&gt; &gt; Ideally, I'd just like to stop the boot sequence
&gt; &gt; from forcing me to have a recognized file system on
&gt; &gt; the disk before allowing the boot to proceed.
&gt; &gt; Even SunOS 4.1.3 allows this.
&gt; &gt; If I do a swap of the disks or something,
&gt; &gt; then all of the info will be wrong -- and
&gt; &gt; the OS will write all over my other disk.
&gt;
&gt;It seems to me that part of the problem is that when you turn on the
&gt;disk at ID 0 (the Quantum one you're trying to recover) that makes the
&gt;Linux disk come up as sdb.  But fstab would be mentioning partitions 
&gt;on sda as root, /usr, etc, so when it tries to fsck/mount filesystems
&gt;it'll fail.

I agree with Mark here ... You really will be better off changing the jumpers.

&gt;That's why I suggest rejumpering.  Make your boot disk (the IBM one)
&gt;0 and the disk you're trying to recover id 1.  Then when your Linux
&gt;boot disk starts up it'll probe/attach as sda, fsck and mount will
&gt;work as advertised, the system will come up, then you can start playing
&gt;with the broken disk.

Once you get the disks recognized, you should be able to do:

   dd if=/dev/sda of=&lt;some-file&gt;

and then rummage through it with emacs

The only additional comment I would like to make is to correct a slight
mistake.

Probing the bus is done when the SCSI driver is loaded if you are using
loadable modules.  Otherwise, it is done by the SCSI driver when activated
by the kernel.

If you are using modules, then one way to get the kernel to rescan the bus is:

   rmmod &lt;the-scsi-module&gt;
   insmod &lt;the-scsi-module&gt;

What, you have devices mounted from that SCSI controller.  Then unmount them.

What, your root device is mounted from that SCSI controller. See figure 1 :-)
(<A HREF="http://www-physics.mps.ohio-state.edu/~bcd/humor/figure1.html">http://www-physics.mps.ohio-state.edu/~bcd/humor/figure1.html</A>)

Works for me.

&gt;   - mark
&gt;


Regards
-------
Richard Sharpe, <A HREF="mailto:sharpe@ns.aus.com">sharpe@ns.aus.com</A>, Master Linux Administrator :-),
Samba (Team member, www.samba.org), Ethereal (Team member, www.zing.org)
Co-author, SAMS Teach Yourself Samba in 24 Hours
Author: First Australian 5-day, intensive, hands-on Linux SysAdmin course

-- 
Check out the LinuxSA web pages at <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
