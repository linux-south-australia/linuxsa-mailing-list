<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: linux uses.." -->
<!-- FromName="MWP" -->
<!-- FromEmail="hirm@chariot.net.au" -->
<!-- ToName="" -->
<!-- ToEmail="tjcorkin@steadycom.com.au" -->
<!-- Date="Wed, 27 Oct 1999 20:02:35 +0930" -->
<!-- Id="001101bf2066$95fe7ea0$0201a8c0@comp" -->
<!-- Reference="3815008E.45030E82@steadycom.com.au" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: linux uses..</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: MWP &lt;<I><A HREF="mailto:hirm@chariot.net.au">hirm@chariot.net.au</A></I>&gt;
  To  : <A HREF="mailto:tjcorkin@steadycom.com.au">tjcorkin@steadycom.com.au</A>
  Date: Wed, 27 Oct 1999 20:02:35 +0930
</PRE>
<H1>Re: linux uses..</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Yeh...

Really there is no point to it...
Its easier just to use the cars standard ECM and remove the eprom, replace
with flash or plain ram and use a pc to modify the memory... this could be
very easily done.
The problem is working out what data is located where in the eprom.
For older cars, this data may be avaliable (havnt looked).

I was playing around with hardware interrupt timers on a hc11 today. It
would be hard to get a PC to produce even a simple fast pulse (under a
complex OS such as linux that is) that could compare with the accuracy of a
microcontroller.
Maybe somthing like an ARM processor might be better at it.

MWP

&gt; This is what I was getting at earlier.
&gt; I know that car ECMs are extremely efficient, but even given the
&gt; massively (relatively) worse efficiency of a fullblown O/S, you'd think
&gt; that a 200+ MHz processor could handle a mere 8000rpm. (Which is only
&gt; 133 revs per second. Isnt a 200MHz processor doing 2 million things per
&gt; second? Sure, some instructions take more than 1 Hz to execute, but
&gt; still, you've got way, way more than you need..You'd think.)
&gt;
&gt; What someone else said though was that the standard kernel just doesn't
&gt; allow you to usleep with enough accuracy. You can ask the processor to
&gt; wake you up in 5 ms, but you're not guaranteed that it will be 5ms or
&gt; 5+ms.. Does anyone know how the rtlinux kernel goes at this though?
&gt; If it can get accurate enough, you'd be okay.
&gt;
&gt; One thought - use the timer interrupt, and write your own device driver
&gt; that hooks on it.
&gt; Thus, the kernel has a  /dev/ecm0 device. You can access it to read
&gt; information, and write to it to set parameters, but the actual
&gt; continual-engine-management process is done within the kernel.
&gt;
&gt; The thing is - what is the resolution of the timer interrupt?
&gt; It goes without saying that of course you'd have to alter the
&gt; block-interrupts function call used by other device drivers so that they
&gt; didn't block the timer interrupt. And you'd have to make sure that your
&gt; timer interrupt function was pretty quick to execute, and DID have the
&gt; ability to block all other interrupts.
&gt;
&gt; You'd probably want a simple hardware board that did the
&gt; analog-to-digital conversions for you, too. And then by the time you
&gt; start building dedicated hardware, why not make that board do the engine
&gt; management itself and just be configurable from the PC?
&gt; And if you've done that, why bother to put it in a PC in the first place
&gt; - just put it in a box in a car with a serial port on it, and call it a
&gt; real ECM. hehe. Go back to step 1.
&gt;
&gt;
&gt; MWP wrote:
&gt; &gt;
&gt; &gt; Some car ECMs use 2Mhz motorola processors.... you cant tell me that a
&gt; &gt; 200Mhz pentium couldnt do the job.
&gt; &gt;
&gt; &gt; With a bit of dedicated hardware that efficently uses IRQ's and software
&gt; &gt; that is well programed, the PC could act as an ECM.
&gt; &gt; I wouldnt want the job of doing it though.
&gt; &gt;
&gt; &gt; MWP
&gt; &gt;
&gt; &gt; &gt; Toby Corkindale wrote:
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Heyas
&gt; &gt; &gt; &gt; I was reading up on car engine management computers last nite - and
I
&gt; &gt; &gt; &gt; wondered how hard it would be to hook up a laptop running linux to
&gt; &gt; &gt; &gt; control an engine... Engine computers are dedicated microprocessors
&gt; &gt; &gt; &gt; running at just a few Mhz, so surely a 486 running at 33MHz with a
&gt; &gt; &gt; &gt; minimal linux kernel would be able to keep up?
&gt; &gt; &gt; &gt; Any thoughts?
&gt; &gt; &gt;
&gt; &gt; &gt; The December 1996 issue of Dr. Dobb's Journal had an article
&gt; &gt; &gt; about embedded microcontrollers used in engine management
&gt; &gt; &gt; systems, and the brief summary of that article is that it's
&gt; &gt; &gt; quite hairy, even when you've got a completely dedicated
&gt; &gt; &gt; microcontroller right on the scene.
&gt; &gt; &gt;
&gt; &gt; &gt; The hard real-time constraints are very tricky to schedule
&gt; &gt; &gt; successfully.  You need to compute spark positioning to 0.5
&gt; &gt; &gt; crankshaft degrees, or 10 microseconds at 8000 RPM.  This is
&gt; &gt; &gt; so demanding that the hard real-time stuff is usually
&gt; &gt; &gt; offloaded to a dedicated coprocessor, usually on the same
&gt; &gt; &gt; chip as the CPU.
&gt; &gt; &gt;
&gt; &gt; &gt; Linux interfacing to the EMS?  Maybe.  Performing the
&gt; &gt; &gt; real-time control?  No way -- the hardware (e.g. Intel
&gt; &gt; &gt; or Alpha) simply isn't built to support it.
&gt; &gt; &gt;
&gt; &gt; &gt; behoffski
&gt; &gt; &gt;
&gt; &gt; &gt; --
&gt; &gt; &gt; behoffski (Brenton Hoff) | Software Engineer, Grouse Software
&gt; &gt; &gt; <A HREF="mailto:behoffski@grouse.com.au">behoffski@grouse.com.au</A>  | <A HREF="http://www.grouse.com.au/">http://www.grouse.com.au/</A>
&gt; &gt; &gt;
&gt; &gt; &gt; --
&gt; &gt; &gt; Check out the LinuxSA web pages at <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>
&gt; &gt; &gt; To unsubscribe from the LinuxSA list:
&gt; &gt; &gt;   mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the
subject
&gt; &gt; &gt;
&gt; &gt;
&gt; &gt; --
&gt; &gt; Check out the LinuxSA web pages at <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>
&gt; &gt; To unsubscribe from the LinuxSA list:
&gt; &gt;   mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject
&gt;
&gt; --
&gt; ..I started out with nothing...and I still have most of it left
&gt;

-- 
Check out the LinuxSA web pages at <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
