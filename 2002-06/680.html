<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: Verifying tar backup" -->
<!-- FromName="'Anthony Symons'" -->
<!-- FromEmail="ant@sa.pracom.com.au" -->
<!-- ToName="'Andrew Reid'" -->
<!-- ToEmail="andrew.reid@plug.cx" -->
<!-- Date="26 Jun 2002 14:26:22 +0930" -->
<!-- Id="1025067382.2318.231.camel@ant.internal" -->
<!-- Reference="20020626033214.GA23456@rubeus.alfred.cx" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: Verifying tar backup</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Anthony Symons &lt;<I><A HREF="mailto:ant@sa.pracom.com.au">ant@sa.pracom.com.au</A></I>&gt;
  To  : Andrew Reid &lt;<I><A HREF="mailto:andrew.reid@plug.cx">andrew.reid@plug.cx</A></I>&gt;
  Date: 26 Jun 2002 14:26:22 +0930
</PRE>
<H1>Re: Verifying tar backup</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
I'd just do a "tar -tvf /dev/st0 &gt; listing.txt" on the system with the
drive. Then you can dump the listing in a known place, and check it from
time to time to make sure its not cut short. If the listing is intact
then you know the whole backup is OK, since the data takes the for
&lt;header&gt;&lt;data&gt;&lt;header&gt;&lt;data&gt; etc etc...

You could even add a special place marker file with a unique file name
on the sending server, and list it after /home so its the last file on
the tape. Then you could write a cron job on the server with the tape
that does the tar extract test and greps for the unique file name, and
sends you an email if its not found. Set your back and restore cron jobs
far enough apart that they will not run in to each other and that should
do it. As for reliability over ssh, Im not too sure. I have backed up
whole systems with dd piped in to netcat though, and its worked, so I'd
give it a reasonable chance. netcat (nc) is going to use less CPU if you
find your system with ssh cant keep up with the encryption on the fly..

Ant

On Wed, 2002-06-26 at 13:02, Andrew Reid wrote:
&gt; For the moment, I've all but given up on getting my (not so) little
&gt; AIT drive to work in the server that I've mentioned in previous
&gt; posts. I've managed to get it going without any troubles on another
&gt; server (which is running 2.4.x).
&gt; 
&gt; So, I'm using tar over SSH to do my backup. I'm currently watching the
&gt; gigabytes of e-mail fly across the screen and onto the tape.
&gt; 
&gt; Having just had a rather unforunate experience with backup (Eeek.. DAT
&gt; drives suck), I'm rather keen to ensure that my backup does not go
&gt; belly-up on me when it comes time to restore.
&gt; 
&gt; I'm getting the data from one machine to the other like so:
&gt; 
&gt; tar -cvf - /home | ssh <A HREF="mailto:backup@cashew.gihs.sa.edu.au">backup@cashew.gihs.sa.edu.au</A> 'dd of=/dev/st0'
&gt; 
&gt; Two questions come to mind:
&gt; 
&gt; * Just how reliable is and to what extent do I believe --verify
&gt; 
&gt; * If I'm doing this over SSH, will it actually work (I'm unable to try
&gt;   it ATM as it's doing a backup).
&gt; 
&gt; Now, I just have a funny fealing (logic seems to tell me) that
&gt; verification isn't going to work. I currently have no idea how tar
&gt; does its verification, so I could be completely wrong.
&gt; 
&gt; Seeing as the command that I have used resembles a one-way street, am
&gt; I right in suggesting that attempts to verify will fail? If so, is it
&gt; possible to verify the backup when using the network to move the data?
&gt; 
&gt; Your assistance is appreciated.
&gt; 
&gt;    - andrew
&gt; 
&gt; -- 
&gt; | Andrew Reid [mailto:<A HREF="mailto:andrew.reid@plug.cx">andrew.reid@plug.cx</A>]
&gt; | Network Wrangler, Bit Herder
&gt; | C: +61-401-946-813  F: +61-8-8379-1093
&gt; | Finger <A HREF="mailto:andrew@keetoo.alfred.cx">andrew@keetoo.alfred.cx</A> for PGP Public Key
-- 
Systems Administrator       
Pracom Ltd.             
+61 8 82029074 -=- +61 402 100 671 
<A HREF="mailto:anthony.symons@sa.pracom.com.au">anthony.symons@sa.pracom.com.au</A>

PRIVILEGED - PRIVATE AND CONFIDENTIAL
This electronic mail is solely for the use of the addressee and may
contain information which is confidential or privileged.
If you receive this electronic mail in error, please delete it from
your system immediately and notify the sender by electronic mail or
using any of the above contact details.

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
