<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: spamassassin, sendmail and mailertables" -->
<!-- FromName="'Glen Turner'" -->
<!-- FromEmail="glen.turner@aarnet.edu.au" -->
<!-- ToName="'David Rowlands'" -->
<!-- ToEmail="davidr@empower.com.au" -->
<!-- Date="Wed, 26 Jun 2002 14:57:22 +0930" -->
<!-- Id="3D1950BA.3090407@aarnet.edu.au" -->
<!-- Reference="62D5F72B69A7BB4DA9D72477134ADE090250C3@einstein" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: spamassassin, sendmail and mailertables</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Glen Turner &lt;<I><A HREF="mailto:glen.turner@aarnet.edu.au">glen.turner@aarnet.edu.au</A></I>&gt;
  To  : David Rowlands &lt;<I><A HREF="mailto:davidr@empower.com.au">davidr@empower.com.au</A></I>&gt;
  Date: Wed, 26 Jun 2002 14:57:22 +0930
</PRE>
<H1>Re: spamassassin, sendmail and mailertables</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
David Rowlands wrote:

&gt; I want to configure our mail server to use spam assassin. It's currently
&gt; using sendmail and mailertables to forward incoming mail to an internal
&gt; Exchange server.
&gt; 
&gt; Reading the spamassassin documentation, I seem to have 2 options, using
&gt; procmail or the spamass milter. Currently, in my mailertable, I have
&gt; something like this to do the relaying:
&gt; 
&gt; mydomain.com relay:[10.0.0.1]
&gt; 
&gt; I can set up a procmail entry in mailertables to run the mail through
&gt; spamassassin first, eg:
&gt; 
&gt; :0fw
&gt; | spamc
&gt; 
&gt; But can I then relay the filtered mail to the Exchange server? If so, how?
&gt; Or is there a better way?

You don't want to use procmail, as that is a replacemement for
the local delivery agent.  So only mail being delivered to the
local machine will get filtered [1].  This isn't what you want when
using sendmail as a front-end relay.

If you use a milter (sendmail filter) to run spam assassin
(such as MIME defang) then you can forward all mail to a
non-local destination using the mailertable.

   [1] Yes, you could pull it off by forwarding each mail message
       at the end of the procmail rules, but then you'll need an
       account and .procmailrc for each mail user on the relay
       machine.  You don't want to go there.

Nick Morrison replied:
 &gt; man procmailex

Not the best advice.

Cheers, Glen


-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
