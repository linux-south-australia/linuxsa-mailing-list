<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Moving Users to a New Box" -->
<!-- FromName="'Matthew Western'" -->
<!-- FromEmail="mwestern@affairs.net.au" -->
<!-- ToName="'LinuxSA'" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Tue, 25 Mar 2003 10:44:38 +1030" -->
<!-- Id="FD14944A4C95D211AF350004AC4C55A4070D8606@mx.sola.com.au" -->
<!-- Reference="FD14944A4C95D211AF350004AC4C55A407FAFD7F@mx.sola.com.au" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Moving Users to a New Box</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Matthew Western &lt;<I><A HREF="mailto:mwestern@affairs.net.au">mwestern@affairs.net.au</A></I>&gt;
  To  : LinuxSA &lt;<I><A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A></I>&gt;
  Date: Tue, 25 Mar 2003 10:44:38 +1030
</PRE>
<H1>Moving Users to a New Box</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Hi All,
I'm building a new box for our dialup server and need to get the accounts
across from the old one.  I've simply copied all the users from the old one
ontop of the new one just using the cat command for both the /etc/passwd and
/etc/shadow file and this seems to work with the exception of no home
directory.  this doesn't bother me as the home directory won't be used.

but should i in future want to migrate users from an old box to a new one,
what would be the best way of doing this?  i've had a play with a script
sent to me by a friend, but this doesn't get the old password across.  so i
have had a bit of a play with awk and managed to get my script to print out
the two fields i want to deal with, but go stuck on getting them to other
variables.  anyway, am I going down the right track on this one or will the
password not be correctly assigned anyway?

----- one that just creates new users -----------

for f in `cut -d: -f1 /oldpasswdfile`
do
adduser $f
done

----------one partially modified by me (print line commented out, but this
works if i just want to print)-----------

#for u in `awk '{FS = ":"} ; { print $1 $2 }' passwd`
for f in `awk '{FS = ":"} ; { $u = $1; $p = $2 }' passwd`
do
echo $f
echo $u
echo $p
adduser $u $p
done

Thanks
Matthew

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A> IRC: #linuxsa on irc.freenode.net
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
