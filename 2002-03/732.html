<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: Transparent Proxying" -->
<!-- FromName="'Martin Sandiford'" -->
<!-- FromEmail="ms@mcdev.com.au" -->
<!-- ToName="'Mark Newton'" -->
<!-- ToEmail="newton@atdot.dotat.org" -->
<!-- Date="Tue, 26 Mar 2002 01:44:09 +1030" -->
<!-- Id="m34rj4isse.fsf@plugh.mccorp.com.au" -->
<!-- Reference="20020326002350.B35284@atdot.dotat.org" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: Transparent Proxying</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Martin Sandiford &lt;<I><A HREF="mailto:ms@mcdev.com.au">ms@mcdev.com.au</A></I>&gt;
  To  : Mark Newton &lt;<I><A HREF="mailto:newton@atdot.dotat.org">newton@atdot.dotat.org</A></I>&gt;
  Date: Tue, 26 Mar 2002 01:44:09 +1030
</PRE>
<H1>Re: Transparent Proxying</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
On Tue, 26 Mar 2002, <A HREF="mailto:newton@atdot.dotat.org">newton@atdot.dotat.org</A> wrote:
&gt; On Mon, Mar 25, 2002 at 09:13:47PM -0800, Richard Russell wrote:
&gt; 
&gt; 1.  You never know where your packets are going anyway -- You've never
&gt;     known that at any time in the Internet's history.  Get over it.
&gt;     The only difference between a proxy and a multicast-supporting
&gt;     router is that the router works at layer two and the proxy works
&gt;     at layer 3.  Other that that they're doing basically the same job.

This statement is incorrect in at least two ways.  Transparent proxying
has only become "the norm" over the last 5-6 years.  Prior to this, I
would be justified in thinking that packets originating at my internet
connected machine, and addressed to another reachable machine on the
internet would reach that machine, regardless of which TCP port I tried
to connect to.  With the rise in use of transparent proxying, this
belief is no longer justified.

An example lifted almost directly from the slashdot article, and applied
to Internodes transparent proxying:

--snip--
$ telnet 1.1.1.1 80
Trying 1.1.1.1...
Connected to 1.1.1.1.
Escape character is '^]'.
GET / HTTP/1.1
Host: www.microsoft.com

&lt;Microsoft's web page is output here&gt;
--snip--

Clearly this is not the same functionality as a multicasting-supporting
router, and neither is it operating at layer 3, as the "transparent"
proxy is clearly inspecting the application level data stream to
identify the host to which the connection should be made.  Or more
likely in this case, which object should be returned from the cache.

If I replace 1.1.1.1 with www.slashdot.org, Microsofts web page is still
output - clearly this behaviour is different from what one might
intuitively expect.  It is also different from the results if no
transparent proxy exists.


[...]

&gt; 3.  Without transparent proxying, Broadband in Australia sucks.  Work
&gt;     out how long it takes to do a TCP 3-way handshake with a web site
&gt;     with a 300 mSec latency, then think about doing it again for each
&gt;     and every image on the web site you're viewing: It doesn't take
&gt;     long for that latency to add up to serious performance degradation
&gt;     due to speed-of-light limitations and long distance.  Transparent
&gt;     proxies reduce that 3-way handshake delay to mere milliseconds.
&gt;     This is a problem we have here which they don't have in the US,
&gt;     btw, so anything you read about transparent proxies from US
&gt;     sources is necessarily skewed by missing-out on a big part of the
&gt;     picture that affects us.

This is a reasonable argument, but again the underlying premise that the
only available type of proxy caching is transparent proxy caching is
wrong.  Sorry to be so blunt, but I don't know how else to say this.

Don't get me wrong though.  I understand that part of an ISP's job is
managing a (hopefully) large customer base and providing the best
possible internet experience for the largest possible base of users.
Maybe the easiest way to achieve best performance coupled with minimum
configuration and support calls is through transparent proxying.  I
imagine that this results in an overall inbound traffic cost reduction
for the ISP in question in any case.

But these issues are not technical issues, they are business issues, and
although some benefits might accrue to the customers (through cost
savings passed on) there are really no technical benefits that I can see
that can not be achieved more flexibly in other ways.


&gt; A properly administered transparent proxy makes a world of difference
&gt; to performance with no impact at all on usability.  If you find a
&gt; usability impact, the only way anyone will know is if you complain
&gt; about it;  coincidentally, complaining about it is sufficient to make
&gt; the problem go away in each and every case, because once the proxy
&gt; administrators know about it they can fix it very quickly.

OK, I'll bite.  My usability problem is that each and every site that I
use nmap against from behind a transparent proxy shows up as having port
80 open.  In some cases, I know for a fact that this is not true.  How
can I fix this?  (Tongue somewhat in cheek here)


Cheers,
Martin

-- 

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
