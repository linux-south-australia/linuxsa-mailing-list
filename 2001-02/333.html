<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: Copying the MBR from one HD to another" -->
<!-- FromName="'Stephen Donaldson'" -->
<!-- FromEmail="steve@cyberqual.com" -->
<!-- ToName="'Adam W'" -->
<!-- ToEmail="woja@optushome.com.au" -->
<!-- Date="Sun, 11 Feb 2001 23:41:26 +1030" -->
<!-- Id="3A868F7E.BF3DDEE3@cyberqual.com" -->
<!-- Reference="NEBBIEBFELGBBJENICLMAEAECCAA.woja@optushome.com.au" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: Copying the MBR from one HD to another</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Stephen Donaldson &lt;<I><A HREF="mailto:steve@cyberqual.com">steve@cyberqual.com</A></I>&gt;
  To  : Adam W &lt;<I><A HREF="mailto:woja@optushome.com.au">woja@optushome.com.au</A></I>&gt;
  Date: Sun, 11 Feb 2001 23:41:26 +1030
</PRE>
<H1>Re: Copying the MBR from one HD to another</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Adam, you are really asking for a complete transfer of all files from the old to
the new and this is a little trickier than MBR from one to other.
This is not as simple as it sounds using the cp command does funny things with
the sym links and should be avoided.

This way works but it may not be the best or easiest, but have a go anyways.

Make a boot disk, you need to boot after the files have been transferred
Install the new drive on a second slot, boot, and partition the drive the same
as the old one (sizes can vary)
Create the file system on the new partitions

Log in as root and move to / directory
Make a list of all the directories to copy by issuing:  ls | grep -v proc &gt;
/root/files
 (As the proc does not exist we can exclude it)

Make a mount point for the new drive
Go to single user mode with init 1
Mount the new drive to the mount point you created
If you are still in / copy the files with tar cf - `cat/root/files` |
(cd/newdrive;tar xvpf -)
Take out the old drive and put the new one into the old drives port and reboot
using boot disk and run lilo

I think this about does it, Id have to try it again to make sure but I did it a
while back from a 2.5 gig to a 30 gig on a p200 for my e-smith server.

If this is not quite right please feel free to add ot delete

Steve



Adam W wrote:

&gt; Hi all,
&gt; Just say i wanted to dupe one HD to another, lets say i have a 1 Gb HD and i
&gt; wanna throw all the data off that one Gig HD onto a 20gig hard drive and
&gt; throw the old 1 gig away and use the 20 gig.
&gt; How would i copy the MBR so the 20gig is bootable??
&gt;
&gt; or is it jus a matter of activating the partition in fdisk??
&gt;
&gt; Thanx all,
&gt; Adam W.
&gt;
&gt; --
&gt; LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
&gt; To unsubscribe from the LinuxSA list:
&gt;   mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
