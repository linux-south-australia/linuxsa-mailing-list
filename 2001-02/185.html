<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: Time Server Problems :-(" -->
<!-- FromName="'David Lloyd'" -->
<!-- FromEmail="lloy0076@rebel.net.au" -->
<!-- ToName="" -->
<!-- ToEmail="richardrussell@mail.com" -->
<!-- Date="Wed, 07 Feb 2001 19:39:44 +1030" -->
<!-- Id="3A8110D8.EDD6574E@rebel.net.au" -->
<!-- Reference="HKEMJGGDNENEDGGDCJBBCEGACCAA.richardrussell@mail.com" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: Time Server Problems :-(</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: David Lloyd &lt;<I><A HREF="mailto:lloy0076@rebel.net.au">lloy0076@rebel.net.au</A></I>&gt;
  To  : &lt;<I><A HREF="mailto:richardrussell@mail.com">richardrussell@mail.com</A></I>&gt;
  Date: Wed, 07 Feb 2001 19:39:44 +1030
</PRE>
<H1>Re: Time Server Problems :-(</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Richard et al:

&gt; or you can start with just setting the date manually (or even with rdate -s)
&gt; to get it within cooee of the real time....

I had to adjust the hardware clock on the time server using hwclock. Now
because I haven't rebooted the system, it's possible that the change
hasn't come about in Linux's internal system clock. Which means that it
will jump 12 hours ahead on next reboot (1)...however there are some
salient thoughts here:

* ntpd is using the hardware clock

If this is so, then why is my backup server (another machine using ntpd
synchronisation) keeping the correct time? It's hardware clock and
system time are both correct. About 12 hours ago they were 12 hours
ahead...but system time syncs wonderfully

* ntpd is using the system clock

If this is so, I can't for the life of me work out why it thinks there
is -3500 milli-seconds difference (way to many for ntpd to fix).

Interestingly, if I use:

* ntpd -b time.server

The time gets set correctly but an hour behind. This silly behaviour is
the behaviour I'm trying to fix; my main server which actually needs to
keep the time properly loses time all the time. Even so, the server it
syncs to:

* pings at unmeasurable speeds (i.e. very very quickly)
* has the correct time (except the hardware time might be out - see
above)
* manages every other machine's time service sensibly

And my main server drops an hour! For no particular reason at all...

I'm beginning to think I'm losing UDP packets like mad, but everything
else speaks nicely to the machine (mainly TCP/IP traffic and SMB over
TCP/IP) and I'm not hearing any complaints about network speed being
noticeably different. This, I think, may be an explanation but I can see
the UDP packets bouncing backwards and forwards about every minute (when
ntpd polls the time server) and they don't appear to be terribly out of
order.

DL


-- 
For the beauty of the earth
 For the glory of the skies
 For the love which o'er and
'round us lies...

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
