<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: squid exceeds filemap limits" -->
<!-- FromName="Daryl Tester" -->
<!-- FromEmail="dt@picknowl.com.au" -->
<!-- ToName="" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Tue, 24 Aug 1999 20:15:53 +0930 (CST)" -->
<!-- Id="199908241045.UAA01027@orac.picknowl.com.au" -->
<!-- Reference="3.0.32.19990823140719.00b59100@hub.dataline.net.au" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: squid exceeds filemap limits</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Daryl Tester &lt;<I><A HREF="mailto:dt@picknowl.com.au">dt@picknowl.com.au</A></I>&gt;
  To  : <A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A>
  Date: Tue, 24 Aug 1999 20:15:53 +0930 (CST)
</PRE>
<H1>Re: squid exceeds filemap limits</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Daniel Callan wrote:

&gt; The default number of file descriptors under our kernels was 256 
&gt; but you can get a patch for your kernel to change this to something
&gt; a bit more scalable to squid's requirements (we found 1024 to be sufficient).
&gt; 
&gt; Check out:
&gt; <A HREF="http://www.avana.net/~ventura/docs/linux/linux-fd-tweak.html">http://www.avana.net/~ventura/docs/linux/linux-fd-tweak.html</A>

Actually, the documentation appears to be woefully out of date 
with regards to more "moderner" kernels (2.2.x) and file descriptors.
The configure script in the squid distribution appeared (from memory)
to choose select() over poll(), and coupled with a bug in in the
MaxFD() logic it nobbles the maximum number of file descriptors to
256.  squid, 2.2.x kernels, glibc and large number of FDs can co-exist
with no patching of the kernel whatsoever.  The above config ran fine
at the ISP it was set up at.

&gt; but for large scale proxy machines, it does seem to be a good alternative
&gt; (for heavily loaded linux-driven squid boxes that can't keep up).

?  How was the box sized?

Regards,
  Daryl Tester

-- 
Check out the LinuxSA web pages at <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
