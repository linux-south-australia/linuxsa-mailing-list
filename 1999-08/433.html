<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: block-wise hard disk copying" -->
<!-- FromName="" -->
<!-- FromEmail="branko@senet.com.au" -->
<!-- ToName="Alan Kennington" -->
<!-- ToEmail="akenning@dog.topology.org" -->
<!-- Date="Sun, 22 Aug 1999 22:05:52 +0930 (CST)" -->
<!-- Id="m11IWqm-000GgGC@lector" -->
<!-- Reference="199908211603.BAA32676@dog.topology.org" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: block-wise hard disk copying</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: <A HREF="mailto:branko@senet.com.au">branko@senet.com.au</A>
  To  : Alan Kennington &lt;<I><A HREF="mailto:akenning@dog.topology.org">akenning@dog.topology.org</A></I>&gt;
  Date: Sun, 22 Aug 1999 22:05:52 +0930 (CST)
</PRE>
<H1>Re: block-wise hard disk copying</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Alan, you wrote

&gt;So basically it looks like 
&gt;1. The "dd" method is too low level for setting up the right
&gt;superblocks.
Right conclusion, wrong reason.  dd would copy the superblocks,
plus any bad sectors (not a problem these days), every inode,
and maintain any fragmentation.  It would just do record by
record from one disk to another.  Its not what one would use
to do the job you described - but I believe that its answered
your original question about block wise disk copying.

&gt;2. The tar|tar copy-method would ignore the lost i-nodes,
&gt;but I don't really need those anyway.
If you did "mkfs" before the tar|tar the method would result
in a perfectly good file system.

&gt;That still leaves open the problem of vfat-&gt;vfat copying.
[snip]
&gt;....I've just been looking around and have found a HOWTO
&gt;on the linux disk-copy thing:
&gt;
&gt;<A HREF="http://www.linuxhq.com/HOWTO/mini/Hard-Disk-Upgrade.html">http://www.linuxhq.com/HOWTO/mini/Hard-Disk-Upgrade.html</A>
&gt;
&gt;But they say that to do a vfat or dos disk-copy, you have to
&gt;use the relevant OS for that purpose!
The process is almost identical to copying *nix partitions,
the major difference is that (correct me if I'm wrong) there
is no command to do a DOS format from within Linux.  I completed
this exercise late last year when I migrated from a 386 to
AMD K6.  It went something like this:
- Set aside a partition for DOS on new drive, using fdisk.
- Boot a DOS floppy and FORMAT that partition, install
  a minimum DOS system.
- Install Linux on the major partition.
- Mount the DOS file system under Linux. 
- On the source machine the DOS drive is already mounted.  
  Createid a tar file of the my data directory.   
- ftp the tar file from one machine to another.
- Extract the tar file on the destination machine onto the
  mounted DOS partition.
- Blow away the tar file.
- Set up dosemu (I could have set up dual boot, if I wanted)

Notes: I had to calculate the size of the data directory to
make sure that I had enough room on both machines to support
the resulting tar file.  There are a number of alternatives
that would not have required making such a file.  Some early
versions of DOS required IO.SYS and MSDOS.SYS to be located
at the very start of the disk; in any case, the dual boot
option requires a DOS boot sector, that's why I did a
minumum DOS install before copying the remainder over by
tar file. 

Hope this helps,
-- 
Branko Bratkovic
<A HREF="mailto:branko@senet.com.au">branko@senet.com.au</A>

-- 
Check out the LinuxSA web pages at <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
