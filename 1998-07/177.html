<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Xwindows permissions and suid stuff" -->
<!-- FromName="phoenix" -->
<!-- FromEmail="mi-mi@sbs.itc.usm.my" -->
<!-- ToName="linuxsa" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Thu, 30 Jul 1998 12:04:03 +0000 (MYT)" -->
<!-- Id="Pine.A32.3.91.980730111802.7272A-100000@sbs.itc.usm.my" -->
<!-- Reference="" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Xwindows permissions and suid stuff</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: phoenix &lt;<I><A HREF="mailto:mi-mi@sbs.itc.usm.my">mi-mi@sbs.itc.usm.my</A></I>&gt;
  To  : linuxsa &lt;<I><A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A></I>&gt;
  Date: Thu, 30 Jul 1998 12:04:03 +0000 (MYT)
</PRE>
<H1>Xwindows permissions and suid stuff</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Hi,

I have just upgraded my video card from an S3 based to a Matrox based card.
So, I had to change the server to SVGA...and all..upgrading to  
XFree3.3.2 at the same time.
Everything went well and I've got my Xwindows running well :-)

But...I was going thru my Linux box log book and found an entry where, for 
the previous S3 server setup, I had removed the setuid bit by:

	chmod u-s /usr/X11R6/bin/X* 

I think I got this from the Redhat errata.

So  I su'ed and ran the same command on the new setup.

Today, when I tried to start Xwindows, I got the following error:

----------------------------------------
XFree86 Version 3.3.2 / X Window System
(protocol Version 11, revision 0, vendor release 6300)
Release Date: March 2 1998

[snip]

Fatal server error:
xf86OpenConsole: Server must be running with root permissions
You should be using Xwrapper to start the server or xdm.
We strongly advise against making the server SUID root!

When reporting a problem related to a server crash, please send
the full server output, not just the last messages

_X11TransSocketUNIXConnect: Can't connect: errno = 111
giving up.
xinit:  Connection refused (errno 111):  unable to connect to X server
xinit:  No such process (errno 3):  Server error.
--------------------------------------------

So, I reversed the earlier command thus, 

	chmod u+s /usr/X11R6/bin/X*

And now Xwindows is back.

But I'm just curious as to what happened. It could be that with XFree 
3.3.2, everything is taken care off. 

Anyway, my permissions in /usr/X11R6/bin/X* are now:

lrwxrwxrwx   1 root     root            8 Jul 20 01:44 X -&gt; Xwrapper
-rwsr-xr-x   1 root     root      2712092 Jun  9 11:09 XF86_SVGA
-rwsr-xr-x   1 root     root      1726652 Jun  9 11:09 XF86_VGA16
-rwsr-xr-x   1 root     root       101844 Jan 24  1998 Xconfigurator
-rwsr-xr-x   1 root     root        27499 Jun  9 11:06 Xmark
-rwsr-xr-x   1 root     root      2490844 Jun  9 11:09 Xprt
-rws--x--x   1 root     root         4272 Jun  9 11:09 Xwrapper


What should they be? 755? But after the fright this morning, I'm not feeling 
very confident.

Any advice (and admonition) accepted :-)

- mael -
*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~
 Mohamed Ismail Mohamed-Ibrahim &lt;phoenix&gt;®
 Chemical Sciences Programme, School of Distance Education,
 Universiti Sains Malaysia, 11800 Penang, Malaysia.
 Tel: +60-4-860-3939; Fax: +60-4-657-6000    
*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~


-- 
Check out the LinuxSA web pages at <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
