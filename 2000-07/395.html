<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: a question about network accounting services in linux" -->
<!-- FromName="Richard Sharpe" -->
<!-- FromEmail="sharpe@ns.aus.com" -->
<!-- ToName="" -->
<!-- ToEmail="Jason Nunn <jsno@downunder.net.au>, linuxsa@linuxsa.org.au" -->
<!-- Date="Tue, 11 Jul 2000 17:08:27 +0900" -->
<!-- Id="3.0.6.32.20000711170827.008dfa00@203.16.214.248" -->
<!-- Reference="Pine.LNX.4.21.0007111654550.816-100000@berkeley.localnet" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: a question about network accounting services in linux</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Richard Sharpe &lt;<I><A HREF="mailto:sharpe@ns.aus.com">sharpe@ns.aus.com</A></I>&gt;
  To  : <A HREF="mailto:Jason Nunn <jsno@downunder.net.au>">Jason Nunn <jsno@downunder.net.au></A>, <A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A>
  Date: Tue, 11 Jul 2000 17:08:27 +0900
</PRE>
<H1>Re: a question about network accounting services in linux</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
At 04:59 PM 7/11/00 +0930, Jason Nunn wrote:
&gt;
&gt;hello
&gt;
&gt;i want to add a custom facility into the kernel (i haven't decided what
&gt;version yet - 2.2 or 2.3) that will provide extra network accounting.
&gt;before i go charging ahead ;), i just want to check with a few hackers on
&gt;this listserver incase 2.2 or 2.3 already has the facility i want, and
&gt;possibly some opinions about this as well. i've had a detailed look at
&gt;2.2, and i'm pretty sure it hasn't. as for 2.3 ..... i don't know.

Have you looked at the netfilter stuff in 2.3, and soon, 2.4?

&gt;here is my problem: i've been asked by an ISP to write a custom program
&gt;that "accurately" tracks network volumes of users and hosts. the ISP only
&gt;wants to charge the users/hosts for those packets that go in/out of their
&gt;network, and they don't want to charge for internal network activity
&gt;(ie, hitting the mail server).
&gt;
&gt;so, i need to write a user space program to track where sources (ip
&gt;sources) send/receive data, and the amount of data that's tranferred. for
&gt;that, i need to either find a kernel service that can accurately aid in
&gt;getting me this info, or create my own service.
&gt;
&gt;i know there are methods like polling the kernels internal data structs
&gt;via a socket that will achieve this (which i've used before in another
&gt;distribution), but there's always doubts about polling as events can
&gt;sometimes happen too quicky for the polling program to notice. so i want
&gt;to try a new method.
&gt;
&gt;i was thinking about adding a few routines into the kernel (in
&gt;linux/net/core/dev.c) that puts "&lt;ip source&gt; &lt;ip destination&gt; &lt;dev&gt; &lt;data
&gt;length&gt;" into a queue, and create a character device module (/dev/....)
&gt;that allows a user space program to "pull" entries off the queue. the idea
&gt;here is to make *every* single packet accountable, and there would be no
&gt;possibly of a packet getting missed like in polling.
&gt;
&gt;are there any kernel hackers here?. does a facility like this exist in 2.2
&gt;or 2.3 ?. if not, then i would love your opinion about this idea.
&gt;
&gt;
&gt;cheers
&gt;
&gt;-- 
&gt;Jason Nunn- Darwin, Northern Territory- jsno.downunder.net.au
&gt;
&gt;-- 
&gt;LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
&gt;To unsubscribe from the LinuxSA list:
&gt;  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject
&gt;
&gt;

Regards
-------
Richard Sharpe, <A HREF="mailto:sharpe@ns.aus.com">sharpe@ns.aus.com</A>
Samba (Team member, www.samba.org), Ethereal (Team member, www.zing.org)
 


-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
