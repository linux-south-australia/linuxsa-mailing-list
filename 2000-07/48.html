<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: IDE vs SCSI (was: Performance with Raid 0 using IDE drives)" -->
<!-- FromName="Richard Sharpe" -->
<!-- FromEmail="sharpe@ns.aus.com" -->
<!-- ToName="MWP <hirm@chariot.net.au>, Greg Lehey" -->
<!-- ToEmail="hirm@chariot.net.au" -->
<!-- Date="Sun, 02 Jul 2000 19:09:06 +0900" -->
<!-- Id="3.0.6.32.20000702190906.009cda00@203.16.214.248" -->
<!-- Reference="395C4D5D.6E6E3A30@mail.com" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: IDE vs SCSI (was: Performance with Raid 0 using IDE drives)</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Richard Sharpe &lt;<I><A HREF="mailto:sharpe@ns.aus.com">sharpe@ns.aus.com</A></I>&gt;
  To  : MWP &lt;hirm@chariot.net.au&gt;, Greg Lehey &lt;<I><A HREF="mailto:hirm@chariot.net.au">hirm@chariot.net.au</A></I>&gt;
  Date: Sun, 02 Jul 2000 19:09:06 +0900
</PRE>
<H1>Re: IDE vs SCSI (was: Performance with Raid 0 using IDE drives)</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
At 05:07 PM 7/2/00 +0930, MWP wrote:
&gt;www.storagereview.com is the place to go for proof on this matter.
&gt;
&gt;I did a quick comparison between these three drives, each of which are the
&gt;fastest on the market in its catagory:
&gt;Quantum Atlas 10k II (36.7 GB Ultra160/m SCSI)
&gt;Western Digital Enterprise 10k (18.3 GB U2W-SCSI)
&gt;Quantum Fireball Plus LM (30.0 GB ATA-66)
&gt;
&gt;Using the "IOMeter - File Server Access Pattern - Load = Heavy" tests these
&gt;where the results:
&gt;IOs/Sec --
&gt;Quantum Atlas 10k II: 267
&gt;Western Digital Enterprise 10k: 224
&gt;Quantum Fireball Plus LM: 145

Those are an awesome number of IOs/Sec, or IO starts per second.  They are
way above some rules of thumb people use at the moment.

&gt;MB/s --
&gt;Quantum Atlas 10k II: 2.92
&gt;Western Digital Enterprise 10k: 2.44
&gt;Quantum Fireball Plus LM: 1.58

What are these? Random writes per second with write-through caching, or what?

One of the great things about SCSI is that with more drives, throughput and
IOs per sec should scale reasonably with number of devices on the bus until
you saturate, where as with IDE, it doesn't, it seems.

&gt;Just from these results you can see that IDE has a looong way to go before
&gt;it can get close to SCSI.
&gt;Also under RAID conditions, the SCSI drives would have a huge leap in
&gt;performace of the IDE drives.
&gt;
&gt;Although... compare the price diff between a 2 drive SCSI RAID system and a
&gt;2 drive IDE ATA-66 RAID system.
&gt;The IDE system will come up best for price vs performance.
&gt;
&gt;MWP
&gt;
&gt;
&gt;&gt; On Sunday,  2 July 2000 at  2:02:04 +0930, Mark Newton wrote:
&gt;&gt; &gt; On Sun, Jul 02, 2000 at 01:38:49AM +0930, David Newall wrote:
&gt;&gt; &gt;
&gt;&gt; &gt;&gt; Suppose you tried to put a mirrored (aka raid 0) set on a single IDE
&gt;&gt; &gt;&gt; controller then every write would have to complete on one drive before
&gt;&gt; &gt;&gt; it could even start on the second.  This would obviously reduce write
&gt;&gt; &gt;&gt; performance by 50%.
&gt;&gt;
&gt;&gt; (and to explicitly answer the original submitter's real question, yes,
&gt;&gt; you can leave your unused other drive connected to the controller, as
&gt;&gt; long as it's really unused).
&gt;&gt;
&gt;&gt; &gt; Agreed totally.  The big issue here is that IDE sucks donkeys' balls.
&gt;&gt; &gt; End of story :-)
&gt;&gt;
&gt;&gt; Without a more thorough investigation of donkey's balls, I'd contest
&gt;&gt; that statement.
&gt;&gt;
&gt;&gt; &gt; It has been "designed" (and I use that word lightly) as a
&gt;&gt; &gt; cheap-and-nasty lowest-common-denominator way of attaching a hard
&gt;&gt; &gt; disk to an ISA-bus PC, and subsequent versions have been bolted-on
&gt;&gt; &gt; to non-ISA systems by butchering that thing which passed for a
&gt;&gt; &gt; specification to make it even more perverse and arcane.  Why is it
&gt;&gt; &gt; that you can pick up any SCSI controller and expect it to work with
&gt;&gt; &gt; any SCSI drive, but the IDE interface "standard" is so ritually
&gt;&gt; &gt; buggered by so many vendors that every general purpose OS on the
&gt;&gt; &gt; market ships with basic features like IDE DMA turned off by default
&gt;&gt; &gt; because they can't be assumed to work at all?
&gt;&gt;
&gt;&gt; Hmm.  Why don't you come out here and I'll give you a handful of SCSI
&gt;&gt; host adaptors to play around with.
&gt;&gt;
&gt;&gt;   "SCSI isn't magic.  There are some very sound reasons why it is
&gt;&gt;   occasionally necessary to sacrifice a live goat to the SCSI chain".
&gt;&gt;
&gt;&gt; &gt; Anyone who is serious about running a high performance server is
&gt;&gt; &gt; *strongly* recommended to use SCSI.  Ignore benchmarks which claim
&gt;&gt; &gt; a higher megabyte-per-second value for IDE drives; They're
&gt;&gt; &gt; meaningless, because usually servers are more interested in I/O
&gt;&gt; &gt; transactions per second,
&gt;&gt;
&gt;&gt; No, they're meaningless because almost nobody does sequential I/O in
&gt;&gt; real-world applications.
&gt;&gt;
&gt;&gt; &gt; not megabytes-per-second, and SCSI will always deliver more I/Os per
&gt;&gt; &gt; second than a comparable IDE drive because of innovations like
&gt;&gt; &gt; tagged command queueing, basic things which IDE can't hold a candle
&gt;&gt; &gt; to.
&gt;&gt;
&gt;&gt; As I was reminded yesterday, parallel SCSI still sends out its
&gt;&gt; commands at 5 MB/s async.  ATA (previously known as IDE) connections
&gt;&gt; are simpler, so they don't need this backwards compatibility, and they
&gt;&gt; issue the commands at the (fixed) bus speed.
&gt;&gt;
&gt;&gt; A lot of myths have grown up about the difference between SCSI and
&gt;&gt; ATA, and in perpetrating them many people have not noticed ATA
&gt;&gt; sneaking up behind them.  I've recently been looking at the
&gt;&gt; differences, and they're not nearly as big as you may think.  In
&gt;&gt; particular:
&gt;&gt;
&gt;&gt;   When you're looking at multi-user systems, disk bandwidth is the
&gt;&gt;   number of bytes transferred per second.  You can get speeds like 20
&gt;&gt;   MB/s or 30 MB/s if you're transferring sequentially, but this just
&gt;&gt;   about mandates a single process, so the values are meaningless.  In
&gt;&gt;   real life, you position, you transfer, you repeat.  So the real
&gt;&gt;   throughput is dependent on the transfer rate, the average latency,
&gt;&gt;   and the average transfer size.
&gt;&gt;
&gt;&gt;   Average latency is in the order of 7 ms.  Average transfer size is
&gt;&gt;   in the order of 8 kB, which means about 400 µs on a modern drive,
&gt;&gt;   whether ATA or SCSI.
&gt;&gt;
&gt;&gt;   High-end SCSI drives can usually position about 1 ms, maybe 2 ms
&gt;&gt;   faster than ATA drives.  On the other hand, despite tagged queueing
&gt;&gt;   (which, BTW, modern ATA drives also support), the command setup is
&gt;&gt;   slower (look at the spec).  A few years back I looked at the
&gt;&gt;   behaviour of SCSI drives with a SCSI bus analyser and found that the
&gt;&gt;   setup time could exceed 1 ms.  I'm sure things are better now, but
&gt;&gt;   they're probably still slower than on an ATA bus.
&gt;&gt;
&gt;&gt;   Clearly, the real-life transfer rate is much more dependent on the
&gt;&gt;   latency than the sequential transfer rate.  It's also dependent on
&gt;&gt;   the transfer size, but you don't get much option with that.
&gt;&gt;
&gt;&gt; So what's the real disadvantage of ATA drives?  They're generally a
&gt;&gt; little slower in latency, and you really need a separate ATA
&gt;&gt; controller for each of them.  On the other hand, they're also cheaper,
&gt;&gt; and so are the controllers.  On the other hand, a good SCSI host
&gt;&gt; adaptor will cost more per drive than an ATA controller.
&gt;&gt;
&gt;&gt; &gt; IDE drives will happily provide the illusion of better performance
&gt;&gt; &gt; on a single-user system, until you try to put "real" load through
&gt;&gt; &gt; them (the reason they look like they're giving better performance is
&gt;&gt; &gt; because it's rather difficult for a single user to put "real" load
&gt;&gt; &gt; through them during day-to-day activities).  As soon as you put an
&gt;&gt; &gt; IDE disk on a multi-user server, though, expect performance to drop
&gt;&gt; &gt; through the floor.
&gt;&gt;
&gt;&gt; Would you like to measure that?  Run some device benchmarks against
&gt;&gt; both SCSI and ATA and compare the results?  Here are the results of
&gt;&gt; running rawio against the fastest ATA and SCSI drives on my test
&gt;&gt; machine:
&gt;&gt;
&gt;&gt;            Random read  Sequential read    Random write Sequential write
&gt;&gt; ID          K/sec  /sec    K/sec  /sec     K/sec  /sec     K/sec  /sec
&gt;&gt; ata        1547.2    96   6696.7   409    1532.0    94    6184.4   377
&gt;&gt; scsi       1242.6    78   1236.3    75    1295.6    77    1310.6    80
&gt;&gt;
&gt;&gt; Now admittedly I'm comparing 2 year old SCSI drives with modern ATA
&gt;&gt; drives, so this isn't fair.  But it doesn't exactly slam ATA.  You
&gt;&gt; presumably have modern SCSI drives available; how do they perform?
&gt;&gt;
&gt;&gt; &gt; ... and let's not even mention the performance implications of swapping
&gt;&gt; &gt; on an IDE drive, shall we?  Thank you.
&gt;&gt;
&gt;&gt; Why not?  Hopefully swap drives aren't maxed out, in which case the
&gt;&gt; latency isn't as much of an issue.
&gt;&gt;
&gt;&gt; Greg
&gt;&gt; --
&gt;&gt; Finger <A HREF="mailto:grog@lemis.com">grog@lemis.com</A> for PGP public key
&gt;&gt; See complete headers for address and phone numbers
&gt;&gt;
&gt;&gt; --
&gt;&gt; LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
&gt;&gt; To unsubscribe from the LinuxSA list:
&gt;&gt;   mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject
&gt;&gt;
&gt;
&gt;-- 
&gt;LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
&gt;To unsubscribe from the LinuxSA list:
&gt;  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject
&gt;
&gt;

Regards
-------
Richard Sharpe, <A HREF="mailto:sharpe@ns.aus.com">sharpe@ns.aus.com</A>
Samba (Team member, www.samba.org), Ethereal (Team member, www.zing.org)
Co-author, SAMS Teach Yourself Samba in 24 Hours
Author: First Australian 5-day, intensive, hands-on Linux SysAdmin course
Author: First Australian 2-day, intensive, hands-on Samba course

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
