<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: Linux 2.2.x and swap files" -->
<!-- FromName="" -->
<!-- FromEmail="michaeld@senet.com.au" -->
<!-- ToName="" -->
<!-- ToEmail="Richard Sharpe <sharpe@ns.aus.com>, LinuxSA@linuxsa.org.au" -->
<!-- Date="Mon, 3 Jul 2000 00:07:55 GMT" -->
<!-- Id="200007030007.JAA18873@pluto.senet.com.au" -->
<!-- Reference="" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: Linux 2.2.x and swap files</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: <A HREF="mailto:michaeld@senet.com.au">michaeld@senet.com.au</A>
  To  : <A HREF="mailto:Richard Sharpe <sharpe@ns.aus.com>">Richard Sharpe <sharpe@ns.aus.com></A>, <A HREF="mailto:LinuxSA@linuxsa.org.au">LinuxSA@linuxsa.org.au</A>
  Date: Mon, 3 Jul 2000 00:07:55 GMT
</PRE>
<H1>Re: Linux 2.2.x and swap files</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Richard Sharpe wrote: 
&gt; Linux 2.2.x can use swap files, and it is relatively easy to create them:
&gt; 
&gt;    dd if=/dev/zero of=/swapfile bs=2048 count=65536
&gt;    mkswap /swapfile
&gt;    swapon /swapfile
&gt; 
&gt; However, I wonder whether or not using a swapfile makes any sense.  This is
&gt; because all writes to the swapfile will have to go through the buffer
&gt; cache, which is likely to put extra pressure on memory when memory is at a
&gt; premium.
&gt; 
&gt; So, what is the conclusion?

But of course the buffer cache is already allocated, so all it will do is flush
out other file access caching.  Is this a good thing?  I don't know without
doing some tests.  I guess the really cool thing to try would be tagging access
to /swapfile as "raw i/o" file access in a late-2.3/early-2.4 kernel so as to
avoid the buffer cache.  I guess this is what you were thinking Richard, right?

I've always had a gut feel that swapping to file isn't a good thing performance
wise, and the only reason I'd do it was if I needed to help a production machine
out that was running out of memory, but couldn't afford to bring it down to give
it another swap partition or enlarge the current one.  But (as was pointed out
at the last LinuxSA meeting) Solaris has been doing it for some time, so perhaps
is a good thing to have for flexibility, and will be improved once you can mark
/swapfile as a "raw i/o" file.

Just a thought, can you do this?  I mean can you mark a _file_ as "raw i/o"
under 2.3/2.4 or is it a switch at the filesystem level?  Hmmm.

Michael...
-- 
Michael Davies                         <A HREF="mailto:michaeld">mailto:michaeld</A>@senet.com.au
 \----- Do you need help installing or configuring Linux??? ------/
  \ Come to Installfest2000, July 15 - Adelaide, South Australia / 
   \--------- <A HREF="http://www.linuxsa.org.au/installfest/">http://www.linuxsa.org.au/installfest/</A> -----------/  




-------------------------------------------
This message was sent using SE Net Webmail.
<A HREF="http://webmail.senet.com.au/">http://webmail.senet.com.au/</A>


-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
