<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="RedHat 6.2, sluggish" -->
<!-- FromName="" -->
<!-- FromEmail="tech@compunets.com.au" -->
<!-- ToName="" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Wed, 5 Jul 2000 16:43:03 +0930" -->
<!-- Id="003b01bfe650$766a3fb0$2700a8c0@jordan" -->
<!-- Reference="" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: RedHat 6.2, sluggish</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: <A HREF="mailto:tech@compunets.com.au">tech@compunets.com.au</A>
  To  : <A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A>
  Date: Wed, 5 Jul 2000 16:43:03 +0930
</PRE>
<H1>RedHat 6.2, sluggish</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
We have a RedHat 6.2 box running ipchains, squid, fetch/sendmail - the usual
bits.

Sometimes, it runs like a Penguin's dream.  But sometimes.....

http browsing varies from bearably sluggish, to mind-numbingly slow.

Fast site FTP transfers typically don't start, or get around 0.4 - 0.6k/sec
at best.

Sometimes, running a constant ping on the linux box _seems_ to make the
browsing a bit faster.  This box has driven me crazy though, so my judgement
may be biased.

I can ping for a while, getting normal results.....

64 bytes from www1.optusnet.com.au (203.2.75.33): icmp_seq=67 ttl=59
time=220.1
ms
64 bytes from www1.optusnet.com.au (203.2.75.33): icmp_seq=68 ttl=59
time=200.2
ms
64 bytes from www1.optusnet.com.au (203.2.75.33): icmp_seq=69 ttl=59
time=230.1
ms
64 bytes from www1.optusnet.com.au (203.2.75.33): icmp_seq=70 ttl=59
time=560.3
ms

until....... 560ms?  Hmm, that's odd....

64 bytes from www1.optusnet.com.au (203.2.75.33): icmp_seq=71 ttl=59
time=180.0
 ms
64 bytes from www1.optusnet.com.au (203.2.75.33): icmp_seq=72 ttl=59
time=1270.3
 ms
64 bytes from www1.optusnet.com.au (203.2.75.33): icmp_seq=73 ttl=59
time=1640.7
 ms

Ooh bugger.  Big pause here............... eventually the following floods
through in under a second

64 bytes from www1.optusnet.com.au (203.2.75.33): icmp_seq=75 ttl=59
time=5227.9
 ms
64 bytes from www1.optusnet.com.au (203.2.75.33): icmp_seq=76 ttl=59
time=4580.8
 ms
64 bytes from www1.optusnet.com.au (203.2.75.33): icmp_seq=77 ttl=59
time=3810.2
 ms
64 bytes from www1.optusnet.com.au (203.2.75.33): icmp_seq=79 ttl=59
time=2080.6
 ms
64 bytes from www1.optusnet.com.au (203.2.75.33): icmp_seq=80 ttl=59
time=1820.8
 ms
64 bytes from www1.optusnet.com.au (203.2.75.33): icmp_seq=81 ttl=59
time=1001.0
 ms

Then the box recovers.  For about 10 seconds, on a good day!

64 bytes from www1.optusnet.com.au (203.2.75.33): icmp_seq=82 ttl=59
time=220.5
ms
64 bytes from www1.optusnet.com.au (203.2.75.33): icmp_seq=83 ttl=59
time=170.1
ms
64 bytes from www1.optusnet.com.au (203.2.75.33): icmp_seq=84 ttl=59
time=180.1
ms
64 bytes from www1.optusnet.com.au (203.2.75.33): icmp_seq=85 ttl=59
time=160.2
ms
64 bytes from www1.optusnet.com.au (203.2.75.33): icmp_seq=87 ttl=59
time=290.1
ms
64 bytes from www1.optusnet.com.au (203.2.75.33): icmp_seq=88 ttl=59
time=160.1
ms

--- optusnet.com.au ping statistics ---
90 packets transmitted, 86 packets received, 4% packet loss
round-trip min/avg/max = 139.2/432.7/5227.9 ms

Max can go up to around 10,000ms

A typical ifconfig ppp0 - does this look ok?

ppp0      Link encap:Point-to-Point Protocol
          inet addr:198.142.51.118  P-t-P:198.142.51.254
Mask:255.255.255.255
          UP POINTOPOINT RUNNING NOARP MULTICAST  MTU:1500  Metric:1
          RX packets:14421 errors:200 dropped:0 overruns:0 frame:200
          TX packets:14647 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:10

Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use
Iface
MAIL.COMPUNETS. *               255.255.255.255 UH    0      0        0 eth0
adlax1.optusnet *               255.255.255.255 UH    0      0        0 ppp0
192.168.0.0     *               255.255.255.0   U     0      0        0 eth0
127.0.0.0       *               255.0.0.0       U     0      0        0 lo
default         adlax1.optusnet 0.0.0.0         UG    0      0        0 ppp0

We have tried:

Changing modem.
Changing modem cable.
Changing phone cable.
Changing phone line.
Changing linux box hardware.
Reinstalling RedHat, ground up and upgrades.


We have also had (in the past, it's ok now) a problem with "ticking" Netcomm
Roadster II modems on several (old) PCs.  I believe this problem to be
unrelated.  There is also a Panasonic telephone exchange just above where
the telephone cable terminates.  The line is an normal Telstra line, but the
wiring runs through the panasonic box.

We have put together a number of basic RedHat boxes (running the same
software) for clients and they do not have this problem.

Our old RedHat box ran in the same spot, with the same modem, using the same
cables, on the same phone line, with the same exchange located in the same
place.  It worked fine.

What console tools would _you_ be using to diagnose the above problem/s?
Please let me know and I'll do some reading :-)

Also, I've looked around freshmeat.net but I can't find a small console ppp
data throughput meter.  Does anyone use something like this?


Regards,

--
Jordan
<A HREF="mailto:tech@compunets.com.au">tech@compunets.com.au</A>

ps:  Everything I try to compile comes up with errors like this:

[<A HREF="mailto:root@mail">root@mail</A> xifmon]# make
gcc -c blitbeam.c -I/usr/include -D__USE_BSD -O2 -DUSE_XSHM
In file included from /usr/include/errno.h:36,
                 from ../include/widget.h:22,
                 from blitting.h:13,
                 from blitbeam.c:16:
/usr/include/bits/errno.h:25: linux/errno.h: No such file or directory
In file included from /usr/include/bits/posix1_lim.h:126,
                 from /usr/include/limits.h:30,
                 from ../include/os.h:17,
                 from ../include/widget.h:32,
                 from blitting.h:13,
                 from blitbeam.c:16:
/usr/include/bits/local_lim.h:27: linux/limits.h: No such file or directory
In file included from ../include/widget.h:38,
                 from blitting.h:13,
                 from blitbeam.c:16:
../include/osw-x.h:27: X11/X.h: No such file or directory
../include/osw-x.h:28: X11/Xlib.h: No such file or directory
../include/osw-x.h:29: X11/Xutil.h: No such file or directory
../include/osw-x.h:30: X11/keysym.h: No such file or directory
../include/osw-x.h:31: X11/cursorfont.h: No such file or directory
../include/osw-x.h:32: X11/Xproto.h: No such file or directory
../include/osw-x.h:33: X11/Xatom.h: No such file or directory
../include/osw-x.h:36: X11/extensions/shape.h: No such file or directory
../include/osw-x.h:40: X11/extensions/XShm.h: No such file or directory
make: *** [blitbeam.o] Error 1
[<A HREF="mailto:root@mail">root@mail</A> xifmon]#


or this


[<A HREF="mailto:root@mail">root@mail</A> PPPStatus-v0.3.7]# make
gcc -O2 -Wall -lncurses -o pppstatus pppstatus.c
pppstatus.c:33: curses.h: No such file or directory
In file included from /usr/include/bits/posix1_lim.h:126,
                 from /usr/include/limits.h:30,
                 from
/usr/lib/gcc-lib/i386-redhat-linux/egcs-2.91.66/include/li
mits.h:117,
                 from
/usr/lib/gcc-lib/i386-redhat-linux/egcs-2.91.66/include/sy
slimits.h:7,
                 from
/usr/lib/gcc-lib/i386-redhat-linux/egcs-2.91.66/include/li
mits.h:11,
                 from /usr/include/sys/param.h:23,
                 from pppstatus.c:37:
/usr/include/bits/local_lim.h:27: linux/limits.h: No such file or directory
In file included from pppstatus.c:37:
/usr/include/sys/param.h:24: linux/limits.h: No such file or directory
/usr/include/sys/param.h:25: linux/param.h: No such file or directory
In file included from /usr/include/sys/ioctl.h:27,
                 from pppstatus.c:38:
/usr/include/bits/ioctls.h:24: asm/ioctls.h: No such file or directory
In file included from /usr/include/sys/ioctl.h:30,
                 from pppstatus.c:38:
/usr/include/bits/ioctl-types.h:25: asm/ioctls.h: No such file or directory
In file included from /usr/include/netinet/in.h:27,
                 from /usr/include/arpa/inet.h:25,
                 from pppstatus.c:40:
/usr/include/bits/socket.h:295: asm/socket.h: No such file or directory
In file included from pppstatus.c:42:
/usr/include/net/ppp_defs.h:7: asm/types.h: No such file or directory
/usr/include/net/ppp_defs.h:8: linux/ppp_defs.h: No such file or directory
make: *** [pppstatus] Error 1
[<A HREF="mailto:root@mail">root@mail</A> PPPStatus-v0.3.7]#


Is it time to reinstall this baby from scratch?

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
