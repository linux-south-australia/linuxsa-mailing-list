<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="IDE timeouts" -->
<!-- FromName="" -->
<!-- FromEmail="michaeld@senet.com.au" -->
<!-- ToName="" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Mon, 10 Jul 2000 23:24:47 GMT" -->
<!-- Id="200007102324.IAA29512@pluto.senet.com.au" -->
<!-- Reference="" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: IDE timeouts</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: <A HREF="mailto:michaeld@senet.com.au">michaeld@senet.com.au</A>
  To  : <A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A>
  Date: Mon, 10 Jul 2000 23:24:47 GMT
</PRE>
<H1>IDE timeouts</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Last night I was testing the ability to do Linux NFS image installs for no real
reason 'cept the upcoming installfest :-) and I ended up getting the worst hard
disk corruption I have ever seen.

First, my setup:  a Cyrix 686 120Mhz box with 64M Ram, PCI thin ethernet card,
dual IDE controller.  hda is a 6G disk mounted as /home.  hdb is a 1.2G disk
mounted as /.  hdc is a finicky local 50x CDROM.

I mounted the Red Hat distro from hdc as /mnt/cdrom.  I exported it via NFS with
/mnt/cdrom (ro,insecure) in /etc/exports and kicked the appropriate daemons.

So across my thin coax line I did an NFS install which worked nicely albeit
slowly.

During the install I could see the hard disk light on the server whirl away. 
This is strange thinks me, what the server is doing is lifting data from hdc on
one IDE channel, hand balling it to the PCI ethernet card for the network.  Why
is the hard disk whirling?  Hmmm.  Just ignored it.  The CDROM, hard drive light
and the LEDs on the ethernet card were all in sync.   Hmmm.

Well the install finished and the hard disk light on the server stayed lit. 
Hmmm.  Looking back at the console I see my X desktop has frozen.  Hmmm. 
Switching to a virtual console sees IDE0 timeouts, but I can't log in.  Hmmm. 
Time for power cycle.  (I guess I could have rebooted the newly installed box
and tried telneting in, but I if login from virtual terminal didn't work I
didn't think telnet would either)

So I power cycle.  hdb on the server needed fscking, but was painless.  hda
failed the powerup fsck and needed more attention.  Dropping into single user I
really fscked it.  There were only a couple of THOUSAND errors spread throughout
the drive.  Home directories, /home/local (sym link on /usr/local) all stuffed
etc.

So, finally, my question, how could NFS-exporting my CDROM on hdc (IDE1) cause
timeouts on IDE0, cause the machine to lock up AND corrupt the /home (hda on
IDE0) filesystem which would have been really quiet at the time?

Huh?

Michael...
-- 
Michael Davies                         <A HREF="mailto:michaeld">mailto:michaeld</A>@senet.com.au
 \----- Do you need help installing or configuring Linux??? ------/
  \ Come to Installfest2000, July 15 - Adelaide, South Australia / 
   \--------- <A HREF="http://www.linuxsa.org.au/installfest/">http://www.linuxsa.org.au/installfest/</A> -----------/  


-------------------------------------------
This message was sent using SE Net Webmail.
<A HREF="http://webmail.senet.com.au/">http://webmail.senet.com.au/</A>


-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
