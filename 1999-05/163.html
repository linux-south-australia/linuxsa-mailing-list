<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: thi has me stumped" -->
<!-- FromName="Mark Newton" -->
<!-- FromEmail="newton@atdot.dotat.org" -->
<!-- ToName="David Newall" -->
<!-- ToEmail="davidn@rebel.net.au" -->
<!-- Date="Mon, 10 May 1999 20:21:13 +0930 (CST)" -->
<!-- Id="199905101051.UAA18212@atdot.dotat.org" -->
<!-- Reference="199905101014.TAA19634@rebel.net.au" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: thi has me stumped</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Mark Newton &lt;<I><A HREF="mailto:newton@atdot.dotat.org">newton@atdot.dotat.org</A></I>&gt;
  To  : David Newall &lt;<I><A HREF="mailto:davidn@rebel.net.au">davidn@rebel.net.au</A></I>&gt;
  Date: Mon, 10 May 1999 20:21:13 +0930 (CST)
</PRE>
<H1>Re: thi has me stumped</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
David Newall wrote:

 &gt; Mark Newton &lt;<A HREF="mailto:newton@atdot.dotat.org">newton@atdot.dotat.org</A>&gt; wrote:
 &gt; &gt;&gt; The first of these translates to:
 &gt; &gt;&gt;  int main(int argc, char **argv);
 &gt; &gt;&gt; The second form may now be deprecated. 
 &gt; &gt; I certainly hope not!  It's  part of the standard UNIX environment.
 &gt; 
 &gt; Oh goody, reasoned debate!  Careful or we'll lift the tone of the list. :-)
 &gt; I don't debate that it is part of the standard UNIX environment, however:
 &gt;    ``main has returned int in C for over 20 years now, with no
 &gt;   anticipation of change, and envp has been obsoleted by POSIX's
 &gt;   "extern char **environ"''
 &gt;       -- <A HREF="http://www.nexial.com/cgi-bin/bsdibodyview?d">http://www.nexial.com/cgi-bin/bsdibodyview?d</A>=65877&q=""

That's all very well, but POSIX seems to be the only body that 
really thinks it's rational to begin and end your implementation at
the POSIX spec.  As far as the major UNIX variants are concerned,
they all consider that they implement a superset of POSIX.  AFAIK,
they all support envp as a third argument to main() too.

 &gt; &gt; In traditional UNIX systems, the number of parameters you give to
 &gt; &gt; a function doesn't really make any difference, as long as you provide
 &gt; &gt; the minimum number established in the prototype:
 &gt; 
 &gt; This is an attribute of C's parameter passing convention, wherein
 &gt; the caller is responsible for pushing AND popping.  Other languagees,
 &gt; notably Pascal, use a more efficient method, whereby the caller pushes
 &gt; and the callee pops; but this is at the expense of loss of varargs.

I'm not entirely sure that it's "more efficient" either -- Stack popping
still occurs, it's just a question of where.

 &gt; &gt; Actually, void main(void) *is* a supported option
 &gt; 
 &gt; No.
 &gt; 
 &gt;    ``Within main, return expr is equivalent to exit(expr).''
 &gt;      -- K&R2 pp164

... which is all very well, considering "return" from within "main" 
was only "officially" supported at all when ANSI C was formalized 
(which isn't to say that it wasn't supported by various implementations,
just that they didn't have a standard behind them).  Before then, you
either got out of main() via exit() or by dropping off the end of
the world.

If you want to cast main() to void your program will still work, for
all the reasons outlined in my last email message.  Furthermore,
even if the return value is stuffed up, your filehandles should still
be flushed, also as indicated in my last message.  However, I'd 
suggest that the original poster re-prototype main() or include an
explicit call to exit() in their program, as I said in my last email
message.

    - mark

--------------------------------------------------------------------
I tried an internal modem,                    <A HREF="mailto:newton@atdot.dotat.org">newton@atdot.dotat.org</A>
     but it hurt when I walked.                          Mark Newton
----- Voice: +61-4-1620-2223 ------------- Fax: +61-8-82231777 -----

-- 
Check out the LinuxSA web pages at <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
