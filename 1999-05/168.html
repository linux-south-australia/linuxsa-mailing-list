<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: thi has me stumped" -->
<!-- FromName="Mark Newton" -->
<!-- FromEmail="newton@atdot.dotat.org" -->
<!-- ToName="David Newall" -->
<!-- ToEmail="davidn@rebel.net.au" -->
<!-- Date="Mon, 10 May 1999 21:17:55 +0930 (CST)" -->
<!-- Id="199905101147.VAA18671@atdot.dotat.org" -->
<!-- Reference="199905101126.UAA20665@rebel.net.au" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: thi has me stumped</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Mark Newton &lt;<I><A HREF="mailto:newton@atdot.dotat.org">newton@atdot.dotat.org</A></I>&gt;
  To  : David Newall &lt;<I><A HREF="mailto:davidn@rebel.net.au">davidn@rebel.net.au</A></I>&gt;
  Date: Mon, 10 May 1999 21:17:55 +0930 (CST)
</PRE>
<H1>Re: thi has me stumped</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
David Newall wrote:

 &gt; &gt;  As far as the major UNIX variants are concerned, they all consider
 &gt; &gt; that they implement a superset of POSIX.  AFAIK, they all support
 &gt; &gt; envp as a third argument to main() too.
 &gt; 
 &gt; Calm down! 

Calm down?

Well!

Can anyone read the stuff I've written tonight and conclude that
I've been anything other than calm and reasoned about it?

&lt;shrug&gt;

 &gt; For the third time (and I'll say it backwards): envp is
 &gt; probably allowed, even though the standard says it's better to stop
 &gt; using it.

"The standard" doesn't say any such thing.  It just says vendors
are free to provide an environment pointer in main()'s third argument
if they wish, but that they must provide a global with the same 
value regardless.

 &gt; &gt; I'm not entirely sure that it's "more efficient" either -- Stack popping
 &gt; &gt; still occurs, it's just a question of where.
 &gt; 
 &gt; Sure.  In C the code occurs immediately after every function call.  In
 &gt; Pascal the code occurs immediately at the end of the function.  If the
 &gt; function is called from 100 different places in your program, that's
 &gt; 100 pops for C and 1 pop for Pascal.

Right, so you're not talking about runtime efficiency, you're talking
about optimization for space.  I'll grant that you have a point here.

 &gt; &gt; If you want to cast main() to void your program will still work, for
 &gt; &gt; all the reasons outlined in my last email message.
 &gt; 
 &gt; There are machines which do very strict typechecking.  (Yes, *type*
 &gt; checking.)

Not with C there ain't!  If they enforced strict typechecking
with C casting wouldn't work.

The *most* you'll get is typechecking within a source file;  But
you'll essentially never get typechecking from one sourcefile to
another, which is why crt0 couldn't care less about how you define
main().

Again, I'll point you at the IOCCC winner which declared main()
as an array (of shorts, not ints as I previously wrote).

<A HREF="ftp://slash.dotat.org/pub/ioccc/1984/mullender.c">ftp://slash.dotat.org/pub/ioccc/1984/mullender.c</A> if you're curious.
If you're going to say it's non-portable, bear in mind that this
machine code program runs on VAXen *and* PDP-11's &lt;grin&gt;

 &gt; Your logic is fairy-floss,

Ahem.

 &gt; and assumes exactly a machine
 &gt; that works the way you expect.  If you declare main as void then crt0
 &gt; will end up by grabbing uninitialised data. 

Read what I wrote (for a third time) before throwing around emotive
and inflammatory descriptions of my logic.  If you declare main as
void and never let it return, crt0 isn't going to give a damn about
what its return value is.  So, again I repeat that the original poster
can either re-define the return value of main(), or can impose a call
to exit() before falling off the end of the world.

 &gt; On those strict machines
 &gt; the program will stop running at that point.  Even on less strict
 &gt; machines, for example those which settle for just range checking,
 &gt; void main() will crash.

I respectfully submit that you are in error here, too.  The absolute
worst thing that will happen will be that crt0 will access some
garbage on the low-side of the stack pointer, but since that
memory has been referenced previously that won't cause a validation
fault;  effectively it just means you get an unpredictable exit
status, it doesn't mean main() will crash.

 &gt; I don't understand this insistence that the standard doesn't apply.

Now it's my turn:  Calm down.  Read what I wrote;  I didn't say the
standard doesn't apply, I said the standard doesn't matter.

    - mark

--------------------------------------------------------------------
I tried an internal modem,                    <A HREF="mailto:newton@atdot.dotat.org">newton@atdot.dotat.org</A>
     but it hurt when I walked.                          Mark Newton
----- Voice: +61-4-1620-2223 ------------- Fax: +61-8-82231777 -----

-- 
Check out the LinuxSA web pages at <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
