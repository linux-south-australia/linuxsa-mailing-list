<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="RE: Kernel 2.4.10 compilation on Mandrake 8.0" -->
<!-- FromName="'Joseph Tan'" -->
<!-- FromEmail="j.tan@bigpond.com" -->
<!-- ToName="" -->
<!-- ToEmail="richard.how@bigpond.com,drwho@firstlinux.net" -->
<!-- Date="Tue, 9 Oct 2001 04:12:26 +0930" -->
<!-- Id="BDEBKDEALPMHOBGNOKFFAENLCDAA.j.tan@bigpond.com" -->
<!-- Reference="20011008160045.A145@Gromit" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: RE: Kernel 2.4.10 compilation on Mandrake 8.0</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Joseph Tan &lt;<I><A HREF="mailto:j.tan@bigpond.com">j.tan@bigpond.com</A></I>&gt;
  To  : &lt;<I><A HREF="mailto:richard.how@bigpond.com">richard.how@bigpond.com</A></I>&gt;<BR>        &lt;<I><A HREF="mailto:drwho@firstlinux.net">drwho@firstlinux.net</A></I>&gt;
  Date: Tue, 9 Oct 2001 04:12:26 +0930
</PRE>
<H1>RE: Kernel 2.4.10 compilation on Mandrake 8.0</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Hiya,

I'll add my 2 cents to getting 2.4.10 on Mandrake 8.1.

By far the easiest way is to directly install the 2.4.10 kernel binary from
Cooker (Mandrake's development distribution). This generally easier because
this kernel already have the source code modifications done to it done by
Mandrake. Installation went fine and it modifies LILO for you. Everything
was fine until I realised that it did not have a working PCMCIA
functionality, so as a result I couldn't get my PCMCIA modem working or even
detected.

For some reason I couldn't find the kernel-PCMCIA-....rpm file on
PlanetMirror, so I grabbed  the 2.4.10-2.mdk Mandrake source RPM. Installed
that. For some damn reason, the supplied source code could not compile with
GCC 2.96 or GCC 3.01. it bombs when compiling starting the module
compilation. I've installed the suitable 2.4.10 header RPM too.

Then I tried the old and faithful 2.4.10 stock kernel source code.
Everything compiled fine, but the boot up looks rather ugly because of the
specific modifications done to the Mandrake 8.1 distribution.

Generally I go about my kernel compilation along these steps:

1. Un tar the source code (and patch if desired)
2. Do a make clean (as a precaution).
3. make menuconfig or make xconfig
4. make dep
5. make bzImage
6. make modules
7. make modules_install
8. Modify LILO (or GRUB)
9. If using LILO, type LILO to update the MBR.

I find that on my own machine, if I didn't run lilo after a kernel
compilation, more likely than not he new kernel would simply hang. This
occured even with kernels of the same version that I've simply tweaked, no
file name changes in /boot were done. I can't explain this, but if you find
that your own kernels are giving you a blank screen, type lilo at the end
and reboot.

At this stage I've stuck to 2.4.8-26mdk until someone can explain to me why
2.4.10-mdk2 won't compile or until Mandrake releases PCMCIA support for
their Cooker 2.4.10 binary RPM.

Cheers,
Joseph Tan

-----Original Message-----
From: Richard [mailto:<A HREF="mailto:richard.how@bigpond.com">richard.how@bigpond.com</A>]
Sent: Monday, 8 October 2001 4:01 PM
To: Ian McLeod
Cc: linuxsa
Subject: Re: Kernel 2.4.10 compilation on Mandrake 8.0


On Fri, Oct 05, 2001 at 02:33:57AM -0700, Ian McLeod wrote:
&gt; People,
&gt;
&gt; I can not compile my kernel (2.4.10)!  Admitedly I don't really
&gt; know what I am doing although I felt that I need to
&gt; learn sooner or later.  I have fiddle around and either the screen
&gt; remains blank after booting (and the SCSI CD-
&gt; ROM is accessed as indicated by the lights) or I receive
&gt; a CRC error?
&gt;
As Deep Thought would say...."hhmmm, tricky".
Did you read /usr/src/linux/Documenatation? Did you make menuconfig,
make dep, make bzImage? Do you have the correct version of make and gcc
as documented in /usr/src/linux/Documentation/Changes? Did you put your new
bzImage somewhere other than /boot (/shoe is a good choice, but /thong is
really only suitable for Oz)? Did you add your new kernel to /etc/lilo.conf
and run lilo?
A step by step guide to what you did would be cosmically useful, "have
fiddle around" is only really useful for tuning violins :-)

(Sorry if this sounds sarcastic/flamish, it's not meant to be and I'd
like the help)

--
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
