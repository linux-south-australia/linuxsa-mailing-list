<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: SAMBA Problems" -->
<!-- FromName="'Matthew Geddes'" -->
<!-- FromEmail="mgeddes@tellurian.com.au" -->
<!-- ToName="'Nathan Millhouse'" -->
<!-- ToEmail="n_millhouse@tpg.com.au" -->
<!-- Date="Tue, 2 Oct 2001 10:04:43 +0930 (CST)" -->
<!-- Id="Pine.LNX.4.21.0110020958560.5411-100000@huachuca.tellurian.com.au" -->
<!-- Reference="3BB7B661.E8A1FBCA@tpg.com.au" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: SAMBA Problems</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Matthew Geddes &lt;<I><A HREF="mailto:mgeddes@tellurian.com.au">mgeddes@tellurian.com.au</A></I>&gt;
  To  : Nathan Millhouse &lt;<I><A HREF="mailto:n_millhouse@tpg.com.au">n_millhouse@tpg.com.au</A></I>&gt;
  Date: Tue, 2 Oct 2001 10:04:43 +0930 (CST)
</PRE>
<H1>Re: SAMBA Problems</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
On Mon, 1 Oct 2001, Nathan Millhouse wrote:

&gt; 
&gt; Hi all,
&gt; 
&gt; I'm not sure if any of you will be able to help me with this as I'm not quite
&gt; sure what the problem is exactly, it may even be on the windows side but just
&gt; to make sure but I will do my best to explain my problem so here goes. 
&gt; 
&gt; I'm trying to set up SAMBA on a Redhat 5.2 box to give myself accessible 
&gt; network storage from my Win2k box, the basic problem is that I cannot access
&gt; any SAMBA shares on the Linux box from either Win2k or 98SE. Windows always 
&gt; gives the impression that it connects to the Linux box but then the connection
&gt; is rejected. I have come to this conclusion because I can see data being 
&gt; transmitted to and from the Linux box for about 20 seconds or so after login.
&gt; I know that the LAN connection is fine because I have Telnet and wu-ftpd servers
&gt; on the Linux box. 
&gt; 
&gt; Just in case I have forgotten a step of the process, this is what I have already
&gt; done.
&gt; 
&gt; 1.
&gt;    Created identical account names with identical passwords on both the Win2k
&gt;  and Linux boxes
&gt; 
&gt; 2.
&gt;    Have tried using both smbpasswd -a and smbadduser on numerous occasions to 
&gt;  create the SAMBA accounts and SMB passwords. 

Did this succeed or fail? If you cat smbpasswd, does it look in
order? Don't send the contents of this file to the list though :-)

&gt; 3a. 
&gt;    Edited smb.conf and enabled encrypted passwords
&gt; 
&gt; 3b.
&gt;    Setup the home directory shares, and the other network drives
&gt; 
&gt; 3c.
&gt;    Changed the workgroup name to match that of Win2k

The Win2K box is a client and not a Primary Domain Controller (or whatever
they call them these days).

&gt; 3d.
&gt;    Restricted SAMBA connections to come from the static network IP of my
&gt;    Win2k box (10.0.0.1 for interests sake)
&gt; 
&gt; 3e.
&gt;    I have left user mode security enabled and not changed it to share or server
&gt;    (don't know if anyone needs to know that though)
&gt; 
&gt; 4.
&gt;   Restarted SAMBA
&gt; 
&gt; If I do an /etc/rc.d/init.d/smb status I am told that both smbd and nmbd
&gt; are running, but if I do an smbstatus it displays the following table.
&gt; 
&gt; Samba version 2.0.10

Try Samba 2.2.1a (or 2.2.2 if you can wait a couple of days :-)).

How is the browsing set up on your Samba box? I have also noticed that
Win98SE can sometime hijack a browse list and cause browsing to fail for
an large chunks of some networks. Perhaps this is the case here? Have a
look at the tool nbtstat (which should still be a part of most Windows
distributions) and query each machine on the network to see if they think
that they are browse masters. nbtstat will also ensure that NetBIOS
connectivity exists.

Have a look at the book Using Samba (which comes free in HTML format with
the Samba source).

Hope it helps,
Matt

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
