<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: SAMBA + LDAP + Win98SE" -->
<!-- FromName="'Matthew Geddes'" -->
<!-- FromEmail="mgeddes@tellurian.com.au" -->
<!-- ToName="" -->
<!-- ToEmail="James.Wilson@compsm.com.au" -->
<!-- Date="Mon, 15 Oct 2001 11:33:09 +0930 (CST)" -->
<!-- Id="Pine.LNX.4.21.0110151128170.364-100000@huachuca.tellurian.com.au" -->
<!-- Reference="OFC191A9A9.CCEEB48D-ON69256AE6.000A4901@compsm.com.au" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: SAMBA + LDAP + Win98SE</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Matthew Geddes &lt;<I><A HREF="mailto:mgeddes@tellurian.com.au">mgeddes@tellurian.com.au</A></I>&gt;
  To  : &lt;<I><A HREF="mailto:James.Wilson@compsm.com.au">James.Wilson@compsm.com.au</A></I>&gt;
  Date: Mon, 15 Oct 2001 11:33:09 +0930 (CST)
</PRE>
<H1>Re: SAMBA + LDAP + Win98SE</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
On Mon, 15 Oct 2001 <A HREF="mailto:James.Wilson@compsm.com.au">James.Wilson@compsm.com.au</A> wrote:

&gt; We are using Samba v2.2.1a RPM for RH7.1.  We are using cleartext, pam_ldap
&gt; etc etc

Fair enough.

&gt; &gt; Which version of Samba are you using? Have you checked the Samba logs?
&gt; 
&gt; Yes, the logs don't really give us much clue:
&gt; 
&gt; [<A HREF="mailto:root@server">root@server</A> samba]# cat log.smbd* | grep "Too many"
&gt;   unable to open or create file /etc/samba/MACHINE.SID. Error was Too many
&gt; open files in system

Is there anything else before these error messages?

&gt; &gt;have you tried looking at the output of the lsof and lslk utilities? You
&gt; &gt;could also try looking in /proc/* to see the pid of the program that is
&gt; &gt;using the most resources. lsof is a cleaner way of doing it, but you may
&gt; &gt;not have it installed (you didn't mention which distribution and version
&gt; &gt;of Linux you are using).
&gt; 
&gt; We'll give it a try, unfortuantly when this error occurs, tryong to run any
&gt; command generates the "too many open files" error and drops you to a
&gt; prompt.  rebooting is the only way we can get the server back.

try adding a line to your crontab that runs lsof and append it to a
file, say every few minutes. This will create a huge file if you leave it
running for a while, but if you start it as late as possible, you might be
ok. It should allow you to find out what had the most files open just
before the number of files ran out. This will help you to work out where
to start looking.

Hope it helps,
Matt

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
