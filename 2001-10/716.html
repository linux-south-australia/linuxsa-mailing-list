<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="blood, sweat and partitions..." -->
<!-- FromName="'Richard Russell'" -->
<!-- FromEmail="richard@yellowgoanna.com" -->
<!-- ToName="" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Mon, 22 Oct 2001 00:19:50 +0930" -->
<!-- Id="20011022001950.A10052@yellowgoanna.com" -->
<!-- Reference="" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: blood, sweat and partitions...</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Richard Russell &lt;<I><A HREF="mailto:richard@yellowgoanna.com">richard@yellowgoanna.com</A></I>&gt;
  To  : &lt;<I><A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A></I>&gt;
  Date: Mon, 22 Oct 2001 00:19:50 +0930
</PRE>
<H1>blood, sweat and partitions...</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Howdy all...
  
This is a story of how Linux saved the day (well, some GPL tools, but,
just to impress RMS and friends, I'm calling them "Linux") ;)

It all started with a boot sector virus and a dual boot Win98/Solaris8
Toshiba laptop. Linux enters the story later...

In the process of getting rid of this virus, I overwrote the MBR
(fdisk /MBR -- yay!) so the machine couldn't boot Solaris any more. No
worries, thought I, I'll just boot from the install media, and then
tell it to boot Solaris from the Solaris partition on the hard drive.
From there, it's easy -- I've done it before.

However, this didn't work, as Solaris' LILO-equivalent couldn't find a
Solaris partition on the HDD... Strange... I used WinDOS's fdisk to
look at the partition, and sure enough, where there was a 3.1G Windows
partition followed by a 3.0G Solaris partition, now stood a 6.1G
Windows partition. Further investigation found that the VFAT
filesystem was still only 3.1G, so the data that was in the Solaris
partition should still be there... Phew...

So, I had all the data, and just had to re-partition it correctly so I
could see it all again... But how does one go about re-partitioning
a disk correctly without knowing what the original partitioning scheme
was? Google gave me the following link, which proved to be helpful:

<A HREF="http://www.oz.net/~trav/linux/lost_partition.html">http://www.oz.net/~trav/linux/lost_partition.html</A>

I suggest that y'all should take a read of the above link, and then
ensure that you have three things:

* a decent means of booting your dead system (LinuxCare CD works a
treat, but is there anything better?)
* a copy (on floppy) of parted
        (<A HREF="http://www.gnu.org/software/parted/parted.html">http://www.gnu.org/software/parted/parted.html</A>)
* a copy (on floppy) of gpart
        (<A HREF="http://www.stud.uni-hannover.de/user/76201/gpart/">http://www.stud.uni-hannover.de/user/76201/gpart/</A>)

I can particularly recommend gpart -- it's used for guessing partition
labels. I don't know how it would work in a different situation, but
it was a lifesaver for me.

For me, I used gpart to find what the partition sizes should probably
have been, then used parted to change them (rebooting multiple times
to use these tools -- it would be great if they were on the linuxcare
CD). So I recreated the Windows partition, tested that (and scandisked
it), and then set about finding the Solaris partition... Basically,
this consisted of recreating it as Linux swap, and then doing the
Solaris thing to restore the boot sector to its original state... 

What would be great is if there was an up to date universal rescue CD
(that preferably fits in your wallet -- the LinuxCare one, I carry
with me everywhere), with these (and probably other) tools included...

Hmm...

Anyway, moral of the story is that despite the lack of Linux on the
system in question, Linux and Linux-based tools still saved my bacon.

And, of course, if anyone out there has Solaris x86 problems, I'm your
man :)

rr

-- 
Richard Russell
Yellow Goanna Pty Ltd
e: <A HREF="mailto:richard@yellowgoanna.com">richard@yellowgoanna.com</A>
m: +61 412 827 895
f: +61 8 8462 2362

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
