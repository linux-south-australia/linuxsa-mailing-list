<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: samba eating my processor" -->
<!-- FromName="'Matthew Geddes'" -->
<!-- FromEmail="mgeddes@tellurian.com.au" -->
<!-- ToName="'jonathan soong'" -->
<!-- ToEmail="jon.soong@imvs.sa.gov.au" -->
<!-- Date="Tue, 18 Nov 2003 13:07:46 +1030" -->
<!-- Id="3FB985FA.2030109@tellurian.com.au" -->
<!-- Reference="3FB84D08.3030402@imvs.sa.gov.au" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: samba eating my processor</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Matthew Geddes &lt;<I><A HREF="mailto:mgeddes@tellurian.com.au">mgeddes@tellurian.com.au</A></I>&gt;
  To  : jonathan soong &lt;<I><A HREF="mailto:jon.soong@imvs.sa.gov.au">jon.soong@imvs.sa.gov.au</A></I>&gt;
  Date: Tue, 18 Nov 2003 13:07:46 +1030
</PRE>
<H1>Re: samba eating my processor</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
jonathan soong wrote:

&gt; Hi
&gt;
&gt; Wondering if anyone can help me!
&gt;
&gt; I've got a machine which shares out a samba directory that Windows 
&gt; clients write to and also run a program from. There are 10's of 
&gt; windows clients currently and they all run a program from this 
&gt; directory once a month and write a log file to it.
&gt;
&gt; However, recently Samba has decided to eat my processor - This 
&gt; continues for some time and can only be stopped by killing the smbd 
&gt; processes.
&gt;
&gt; PID USER     PRI  NI  SIZE  RSS SHARE STAT %CPU %MEM   TIME COMMAND
&gt; 26258 www       19   0  3200 3200  2700 R    34.5  0.6  82:20 smbd
&gt; 25781 www       20   0  3200 3200  2700 R    32.6  0.6  88:58 smbd
&gt; 25165 www       18   0  3200 3200  2692 R    28.7  0.6  96:38 smbd
&gt; 1651 www       13   0  1028 1028   780 R     3.8  0.2   0:00 top
&gt; 23424 root      10   0  1460 1460   964 S     0.9  0.2  15:27 nmbd

You could try attaching strace to one of the hungry processes to see 
what it's actually doing. For example:

  strace -o /tmp/s -p 26258

Then after a few seconds, hit Ctrl-C. The trace will be stored in the 
file /tmp/s. You can also try the same with ltrace:

  ltrace -o /tmp/l -p 26258

Increasing the log level is also something that can yield useful 
information.

lsof and lslk are useful tools for finding info about Open Files and LocKs.

Hope it helps,
Matt


-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A> IRC: #linuxsa on irc.freenode.net
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
