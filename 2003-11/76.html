<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="RE: Major NAT headaches" -->
<!-- FromName="" -->
<!-- FromEmail="unauthorized@internode.on.net" -->
<!-- ToName="" -->
<!-- ToEmail="undisclosed-recipients:;" -->
<!-- Date="Tue, 4 Nov 2003 13:06:44 +1030 (CST)" -->
<!-- Id="200311040237.hA42aiTn052386@smtp1.adl2.internode.on.net" -->
<!-- Reference="" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: RE: Major NAT headaches</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: &lt;<I><A HREF="mailto:unauthorized@internode.on.net">unauthorized@internode.on.net</A></I>&gt;
  To  : &lt;<I><A HREF="mailto:undisclosed-recipients:;">undisclosed-recipients:;</A></I>&gt;
  Date: Tue, 4 Nov 2003 13:06:44 +1030 (CST)
</PRE>
<H1>RE: Major NAT headaches</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
&gt; From: Craig Mead [mailto:<A HREF="mailto:craig@australianwireless.org">craig@australianwireless.org</A>]
&gt; Sent: Tuesday, November 04, 2003 8:26 AM
&gt; To: John Edwards
&gt; Cc: <A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A>
&gt; Subject: Re: Major NAT headaches
&gt; 
&gt; 
&gt; &gt; Have a look at this:
&gt; &gt;
&gt; &gt; <A HREF="http://lartc.org/howto/lartc.cookbook.mtu-mss.html">http://lartc.org/howto/lartc.cookbook.mtu-mss.html</A>
&gt; &gt;
&gt; &gt; Some of those reselling the connect.com service have issues with
&gt; &gt; tunnelling connections over ethernet, which restrict the MTU. One
&gt; &gt; possible solution at the ISP end is tampering with the MSS 
&gt; of customer
&gt; &gt; tcp data to try and ensure that pmtu problems can't occur.
&gt; &gt;
&gt; &gt; John Edwards
&gt; 
&gt; John,
&gt; 
&gt; Thanks for the link.
&gt; After reading up on MSS, it describes my problem 
&gt; exactly....however....doing
&gt; what it suggests doesn't fix it!
&gt; 
&gt; FreeBSD clamps by default
&gt; pppoeconf reduces mss by default (have played with a few values)
&gt; and I've also explicitly stated in my iptables script that I 
&gt; want it clamped
&gt; automatically and also set it manually at a few different 
&gt; levels and to no
&gt; avail.
&gt; 
&gt; Out of interest, I fired up a `doze box and installed 
&gt; WinRoute and all was
&gt; fine to windows machines.

Craig,

     The issue sounds like it is that "ICMP destination unreachable, packet too big" messages are being blocked somewhere, causing Path MTU Discovery to fail.  Check and make sure you are specfically allowing those ICMP messages.  My guess is that your Win machine running WinRoute is not blocking them either and that is perhaps why it is working.  If you keep you MTu to 1460 it should work just fine.  I have had the same issue in the past and 1460 is workable.

BTW out of interest because you seem to be nat'ing (:
<A HREF="http://forums.whirlpool.net.au/forum-replies.cfm?t">http://forums.whirlpool.net.au/forum-replies.cfm?t</A>=127353
i am advocating Mr Zippy's use or non-use of NAT...

Chris-

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A> IRC: #linuxsa on irc.freenode.net
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
