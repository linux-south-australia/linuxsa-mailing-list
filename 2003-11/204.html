<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: big single packets in TCP" -->
<!-- FromName="'Richard Sharpe'" -->
<!-- FromEmail="rsharpe@richardsharpe.com" -->
<!-- ToName="'Alberto Martin'" -->
<!-- ToEmail="amartin@xtec.com" -->
<!-- Date="Wed, 12 Nov 2003 16:55:25 -0800 (PST)" -->
<!-- Id="Pine.LNX.4.44.0311121650440.5513-100000@durable" -->
<!-- Reference="000001c3a976$8c6dd870$f400a8c0@miami.xtec.com" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: big single packets in TCP</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Richard Sharpe &lt;<I><A HREF="mailto:rsharpe@richardsharpe.com">rsharpe@richardsharpe.com</A></I>&gt;
  To  : Alberto Martin &lt;<I><A HREF="mailto:amartin@xtec.com">amartin@xtec.com</A></I>&gt;
  Date: Wed, 12 Nov 2003 16:55:25 -0800 (PST)
</PRE>
<H1>Re: big single packets in TCP</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
On Wed, 12 Nov 2003, Alberto Martin wrote:

&gt; Hi:
&gt; 
&gt; I want to send big single packets using TCP. Those single packets can be
&gt; up to 1MB.
&gt; I tried using my RedHat Linux 9 computer using two sockets (client /
&gt; server) in localhost. 
&gt; After setting SO_SNDBUF in the client and SO_RCVBUF in the server to
&gt; 1MB, the client was
&gt; sending around 600K and the server was receiving 200K, but these numbers
&gt; were not constant.
&gt; My question is. Is it possible to send big packets like that? If I have
&gt; my buffers (Application
&gt; Layer) big enough to accommodate that amount of data and I set the TCP
&gt; buffers with
&gt; setsockopt(), what is the limitation? Is an Operating System limitation
&gt; or an option related
&gt; with the maximum buffer size?

What do you mean by a big single packet? 

You shove data in at the socket layer, but TCP will naturally segment it 
into MSS sized chunks. If you exceed SO_SNDBUF worth of data, then the 
write call might return telling you that it accepted less bytes than you 
asked it to while it goes away and transfers the data it has to the 
remote end. You will have to retry the write to get all the data through. 
Is this perhaps the problem you are experiencing?

You can find some diagrams that go some of the way towards explaining some 
of these things at: 
<A HREF="http://www.richardsharpe.com/ethereal-stuff.html">http://www.richardsharpe.com/ethereal-stuff.html</A>#Time%20Sequence%20Graphs

What are you trying to achieve?

Regards
-----
Richard Sharpe, rsharpe[at]ns.aus.com, rsharpe[at]samba.org, 
sharpe[at]ethereal.com, <A HREF="http://www.richardsharpe.com">http://www.richardsharpe.com</A>

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A> IRC: #linuxsa on irc.freenode.net
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
