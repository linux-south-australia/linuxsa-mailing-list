<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: GZIP Catastrophe" -->
<!-- FromName="'David Lloyd'" -->
<!-- FromEmail="lloy0076@rebel.net.au" -->
<!-- ToName="'Sean Burford'" -->
<!-- ToEmail="slide@tellurian.com.au" -->
<!-- Date="Tue, 22 May 2001 18:10:54 +0930" -->
<!-- Id="3B0A2616.2A17E82F@rebel.net.au" -->
<!-- Reference="Pine.LNX.4.21.0105221723440.26493-100000@huachuca.tellurian.com.au" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: GZIP Catastrophe</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: David Lloyd &lt;<I><A HREF="mailto:lloy0076@rebel.net.au">lloy0076@rebel.net.au</A></I>&gt;
  To  : Sean Burford &lt;<I><A HREF="mailto:slide@tellurian.com.au">slide@tellurian.com.au</A></I>&gt;
  Date: Tue, 22 May 2001 18:10:54 +0930
</PRE>
<H1>Re: GZIP Catastrophe</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Sean!

&gt; I wouldn't mind having more information on how the corruption
&gt; happened.

&gt; Did you check the file, then switch off the computer before the
&gt; cache had flushed?

I did:

[root]# tar cvf home.tar /home
[root]# mount -t vfat /dev/hdc1 /mnt/win [1]
[root]# cp home.tar /mnt/win
{ crash bang - didn't have enough space }
[root]# rm /mnt/win/home.tar
[root]# gzip home.tar
[root]# cp home.tar.gz /mnt/win
[root]# tar tzvf /mnt/win/home.tar.gz
{ which checked out fine }

Now, this was on a broken system, so I followed with:

[root]# sync
[root]# sync
[root]# umount /mnt/win

My Linux partitions are on my WDC 17.2G, whilst my Windows is on my
Seagate (wotever) 4.2G. The Seagate has about 1Mb of bad blocks
according to Windows GUI scandisk.

&gt; Was the file OK right up until you used Winzip?

I reinstalled Linux and Windows survived. Note that the tar file was
made with a "all packages" default RedHat 7.1 and this was the same
system. I did:

[root]# tar xzvf /mnt/win/home.tar.gz
{ blah blah then the CRC error message }

I thought, bum. In addition, Linux complained it wasn't actually able to
read the medium, that is a hardware fault.

So, I did a number of tar tzf's (in the vain hope it would work). Then I
decided to go into Windows and see what that would do.

I went into Windows and WinZip32 complained at about the same spot. I
therefore thoroughly scandisked the partition and still got the same
error. I thought to myself, the only program able to shift stuff around
forcibly would be the defragger (because it wouldn't even copy under
Windows).

So I got a defrag going which took ages, but it finally finished.

And I copied it to another directory which still has the same problem.
Obvious, really, because it probably copied crap data over.

&gt; Is
&gt; your partition table broken and therefore you are overwriting files on
&gt; one partition when updating another?

The partition was created by fdisk (Windows 98 VI setup disk) using the
full disk option. And formatted using the same tools from the same disk.

&gt; Are you storing your FAT
&gt; filesystem in a file on a spaghetti filesystem and you forgot to allow
&gt; access to it before you wrote to said filesystem?

It's on its own disk as FAT32. I'm not sure what a "spaghetti
filesystem" actually is, so I presume I don't have one.

&gt; You tantalise us with
&gt; hints of faulty FAT handling under Linux, but leave out the beef.

DSL

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
