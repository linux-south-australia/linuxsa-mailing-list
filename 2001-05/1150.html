<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="RE: ip masquerading" -->
<!-- FromName="'David Rowlands'" -->
<!-- FromEmail="davidr@empower.com.au" -->
<!-- ToName="'linuxsa@linuxsa.org.au'" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Thu, 31 May 2001 13:49:48 +0930" -->
<!-- Id="51AEEE2767C2D311843A00A0CC51043F330974@EINSTEIN" -->
<!-- Reference="" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: RE: ip masquerading</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: David Rowlands &lt;<I><A HREF="mailto:davidr@empower.com.au">davidr@empower.com.au</A></I>&gt;
  To  : linuxsa@linuxsa.org.au &lt;<I><A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A></I>&gt;
  Date: Thu, 31 May 2001 13:49:48 +0930
</PRE>
<H1>RE: ip masquerading</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Andrew,

The exchange server's smtp port is not live - only the web server (port 80)
for exchange is, so people can retrieve their mail via exchange's web
interface. We do indeed use mailertables for forwarding the mail to the
exchange server via an MTA on the firewall.

I'll give your suggestion a go though, modified for port 80.

-----Original Message-----
From: Andrew Reid [mailto:<A HREF="mailto:andrew.reid@plug.cx">andrew.reid@plug.cx</A>]
Sent: Thursday, May 31, 2001 1:17 PM
To: David Rowlands
Cc: '<A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A>'
Subject: RE: ip masquerading


On 31 May 2001 12:27:28 +0930, David Rowlands wrote:

&gt; It's not what you missed, its what I failed to mention. I use fwtk to
&gt; forward ports from the internal exchange server to the outside world for
web
&gt; email. If I DENY the exchange server, the port forwarding with fwtk stops.

Ahh.. That makes more sense then :-)

Well Firstly, I'd not trust my Exchange server's SMTP port live on the
Internet. I'd be more inclined to install Postfix/Qmail/Sendmail (in
order of preference :-) and use mailer tables to reroute mail to the
internal exchange box. 

Admitadly this involves installing an MTA on the firewall, but I've not
had any issues on the occasions that I've done it.

You really want something like IPFilter's save-state option. Here's a
theory that may sufice:

ipchains -A forward -s 192.168.10.3 -d 0.0.0.0/0 25 -j MASQ
ipchains -A forward -s 192.168.10.3 -j DENY

Where 192.168.10.3 is the IP of your exchange server.

   - andrew

-- 
Andrew Reid                   email: <A HREF="mailto:andrew.reid@plug.cx">andrew.reid@plug.cx</A>
                              www:   <A HREF="http://www.plug.cx">http://www.plug.cx</A>
"A school without students    phone: +61 401 946 813
 is like an ointment
 without a fly"

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
