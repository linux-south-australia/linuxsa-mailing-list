<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: Various questions" -->
<!-- FromName="'Alan Kennington'" -->
<!-- FromEmail="akenning@topology.org" -->
<!-- ToName="'LinuxSA'" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Wed, 30 May 2001 00:05:48 +0930" -->
<!-- Id="20010530000548.B8892@dog.topology.org" -->
<!-- Reference="HKEMJGGDNENEDGGDCJBBCEIICHAA.richardrussell@internode.on.net" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: Various questions</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Alan Kennington &lt;<I><A HREF="mailto:akenning@topology.org">akenning@topology.org</A></I>&gt;
  To  : LinuxSA &lt;<I><A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A></I>&gt;
  Date: Wed, 30 May 2001 00:05:48 +0930
</PRE>
<H1>Re: Various questions</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
&gt; 
&gt; &gt; 3. If I want to set up my own firewall settings on a debian 2.2
&gt; &gt; machine, how
&gt; &gt; can I get them to load on boot?
&gt; 
&gt; I assume you are talking here about ipchains commands?
&gt; 
&gt; The most common way to do things on boot is to create a script in
&gt; /etc/init.d (/etc/rc.d/init.d on RH boxen), containing the commands you want
&gt; to execute. It should take one parameter, being [start|stop] (there are
&gt; other common ones, like status, restart, reload and so on...). Then decide
&gt; what runlevels you want to _start_ the script in, and which you want to stop
&gt; it, and create symlinks to it from /etc/rc[n].d/[SK]&lt;nn&gt;&lt;scriptname&gt;. I
&gt; think that with a ipchains script, you want it to start early and stop late,
&gt; so you could even put it in rcS.d (IIRC -- I have no linux handy to check
&gt; with).
&gt; 
&gt; How else do people do this? Is there a correct or canonical way to do it?
&gt; (not talking about _writing_ the script itself, just about how and where it
&gt; is run... although if someone had a starter skeleton script, that could be
&gt; dandy...)


How to start up the firewall:

Rusty's notes say that there is no standard way to load up the
firewall commands. Personally, I create directory /etc/iptables
and stick my firewall script there, and start it up from
the usual sort of /etc/rc.d script.
I think the usual thing here is to copy and modify a similar
looking script in /etc/rc.d.
They're different from distribution to distribution.
Each distribution has a different set of global parameter
files to control the boot process.
E.g. SuSE has /etc/rc.config.
RH probably still has /etc/sysconfig/*
I have no idea what Debian uses.

But that's why you can't just copy a script from someone
else's machine.
You really need to start with an /etc/rc.d script template
from your own machine.

The symlinks:

In fact, I tried to put my firewall script very early in the boot sequence,
e.g. /etc/rc.d/rc3.d/K02iptables.ak
but I found that it needed some other things to be workign first
in order to get going.
So the script failed and I was left unprotected!

What SuSE does it to run 2 scripts in each level - one to
basically close up the machine totally, the other one to open it
out again partly.

Some people make their firewall scripts run out of network
device up/down scripts.

Cheers,
Alan Kennington.

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
