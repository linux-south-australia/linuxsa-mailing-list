<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: automation of apt-get" -->
<!-- FromName="'Alex Wallis'" -->
<!-- FromEmail="awol@prepaidonline.com.au" -->
<!-- ToName="'linuxsa@linuxsa.org.au'" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Sat, 02 Feb 2002 16:35:06 +1030" -->
<!-- Id="3C5B8192.7161C2C2@prepaidonline.com.au" -->
<!-- Reference="3C5A8379.23A5ECBD@gmx.net" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: automation of apt-get</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Alex Wallis &lt;<I><A HREF="mailto:awol@prepaidonline.com.au">awol@prepaidonline.com.au</A></I>&gt;
  To  : linuxsa@linuxsa.org.au &lt;<I><A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A></I>&gt;
  Date: Sat, 02 Feb 2002 16:35:06 +1030
</PRE>
<H1>Re: automation of apt-get</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Well I don't run debian, but I've seen the other replies and wonder...

I'd put the commands in a shell script and cron that. Maybe create a
file in ip-up and delete it again with ip-down, and then get the script
to use "test" to check if that file exists. If it doesn't then exit. You
could vary this method to write a file on completion so the script could
check for that to see if it has already completed the task for the day.
If not then run the upgrade. Just cron the script for example every 2
hours, and if the script has already successfully run the upgrade for
the day, then the script will detect the file created and exit.

If you want/need help with the script just let me know.

Alex


Daniel Mundy wrote:
&gt; 
&gt; I have been looking into using cron (anacron more specifically) to have
&gt; apt-get upgrade my system once a day, I have managed it but I would like
&gt; to know a better way to do it. Currently my crontab looks like this:
&gt; 
&gt; 0 21 * * * apt-get update
&gt; 0 * * * * apt-get -dy upgrade
&gt; 
&gt; Now the problem is if I am not connected to the internet at this time.
&gt; In this case I would like the commands run later on during the day when
&gt; it is connected. I could put something in ip-up but that would run twice
&gt; on the same day if I connected twice, which I don't want.
&gt; 
&gt; Also, sometimes while downloading the packages I get errors along the
&gt; lines of "remote end closed connection". In this case I would also like
&gt; the 'apt-get -dy upgrade' run to try and download the missing files.
&gt; 
&gt; I have been thinking about this for a few days now but thought it might
&gt; be nice to see other people's way of achieving this the best. Thankyou
&gt; for any ideas you can provide.
&gt; 
&gt; -Daniel
&gt;

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
