<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Routing/Firewalling problem" -->
<!-- FromName="'Richard Russell'" -->
<!-- FromEmail="richard@yellowgoanna.com" -->
<!-- ToName="" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Thu, 21 Feb 2002 19:39:28 +1030" -->
<!-- Id="003c01c1bab7$779f3ab0$0c00a8c0@albert" -->
<!-- Reference="" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Routing/Firewalling problem</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Richard Russell &lt;<I><A HREF="mailto:richard@yellowgoanna.com">richard@yellowgoanna.com</A></I>&gt;
  To  : &lt;<I><A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A></I>&gt;
  Date: Thu, 21 Feb 2002 19:39:28 +1030
</PRE>
<H1>Routing/Firewalling problem</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Hi all,

We have a network here that looks like this:

0.0.0.0/0 (internet)
    |
a.b.c.d+1 (our gateway at the ISP)
    |
 switch
a.b.c.d/28 (our network)
  ||||
some machines

Basically, we have a.b.c.d/28 coming in over an ethernet link, through a
switch, and then we have a number of machines, each with its own IP
address hanging off the switch. The complication here is that we do not
have access to three of these machines, so can't conveniently change the
network configs on them.

What we want to do is insert a machine between the internet and the
switch so we can do IP accounting, some proxying, and some
firewalling... No worries, apart from the fact that we can't easily
change the routes on the internal machines (and, I suppose, we would
have to change the routes externally as well, to make traffic destined
for the internal IPs route through one specific IP, which would be our
firewall/router...

So I'm now wondering if there is another way to do this... Perhaps
putting said machine there, making its external interface have multiple
aliased addresses, so it answers for every internal machine, and have
its internal interface pretend to be the router at the other end...

ie:

0.0.0.0/0 (internet)
   |
a.b.c.d+1 (our gateway at the ISP)
   |
ext: a.b.c.d+2,3,4,5,6 (our five IPs -- +0 is net, +7 is broadcast)
int: a.b.c.d+1 (pretending to be the gateway)
   |
 switch
 |||||
a.b.c.d/28 (our machines)


Is that sensible? The way I see it, it would mean that everything would
look the same from the internet, as well as looking the same from out
internal network... But something here smells wrong... I'm sure I've got
a fundamental contradiction here somewhere...

I guess what I'm looking for is less a router, more a transparent switch
that can do accounting... and maybe transparent proxying (or
non-transparent -- it could have its' own IP address also, and look as
if it's another machine on the network, as long as it's invisible to the
machines I want it to be invisible to)...

Any comments? Any help? Any "you're an idiot" statements? :)

rr

-- 
Richard Russell
Yellow Goanna Pty Ltd
e: <A HREF="mailto:richard@yellowgoanna.com">richard@yellowgoanna.com</A>
m: +61 412 827 805
f: +61 8 8462 2362
 

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
