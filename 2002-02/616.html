<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="RE: Notes on setting up Toshiba TE2000 Laptop with Windows XP Pro, RedHat 7.2, FreeBSD 4.5 and Solaris 8." -->
<!-- FromName="'Richard Russell'" -->
<!-- FromEmail="richard@yellowgoanna.com" -->
<!-- ToName="'LinuxSA (E-mail)'" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Mon, 18 Feb 2002 20:54:26 +1030" -->
<!-- Id="006501c1b866$7147f240$0c00a8c0@albert" -->
<!-- Reference="002201c1b53c$2bd7e940$0c00a8c0@albert" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: RE: Notes on setting up Toshiba TE2000 Laptop with Windows XP Pro, RedHat 7.2, FreeBSD 4.5 and Solaris 8.</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Richard Russell &lt;<I><A HREF="mailto:richard@yellowgoanna.com">richard@yellowgoanna.com</A></I>&gt;
  To  : LinuxSA (E-mail) &lt;<I><A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A></I>&gt;
  Date: Mon, 18 Feb 2002 20:54:26 +1030
</PRE>
<H1>RE: Notes on setting up Toshiba TE2000 Laptop with Windows XP Pro, RedHat 7.2, FreeBSD 4.5 and Solaris 8.</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Some updates... and reformatting... (yes, it's still plain text, but
it's somewhat prettier, don't you think? I'll DocBook or LaTeX it
sometime)

Notes on setting up Toshiba TE2000 Laptop with Too Many OS's
	* Windows XP Pro
	* RedHat 7.2
	* FreeBSD 4.5
	* Solaris 8

Draft 2, by
Richard Russell
Yellow Goanna P/L
<A HREF="mailto:richard@yellowgoanna.com">richard@yellowgoanna.com</A>


Requirements:

* A Computer (specifically a Toshiba TE2000) -- ensure that your
computer (and/or all the components) is supported by each OS you plan to
install. Check each HCL, and do a search on Google for any known issues.
Try to find someone else who has successfully installed on your
hardware, and written about it.
* Lots of RAM recommended (some OSes are more hungry than others)
* Lots of disk recommended (20G minimum, really)
* Lots of time required (a week or so, probably)
* Lots of bandwidth (Gigabytes)
* *Some* familiarity with each OS you are installing -- there are so
many gotchas here (and many more not recorded) that you *will* run into
problems you weren't expecting, and if you don't know your ` from your
', or your make buildworld from your Windows Update, you're going to be
in trouble.


Preliminary notes:

* I'm no genius, and I haven't tested this procedure thoroughly. I've
done it all once, and it took me ages. I also wrote this from memory,
whilst I was half way through step 13, so it is probably wrong, will
probably render your BIOS unreadable, and make your sister pregnant.
Don't blame me. Especially about your sister - she told me she was on
the pill.

* A lot of this probably applies equally to other laptops and even
desktops - the X stuff is laptop-specific, but almost everything else
should work on any PC.

* Also, OS variations (NT4, Win 2000, different Linux distributions etc)
should theoretically be pretty easy to adapt to. Be aware though, that
LILO is not as flexible as GRUB, so you may run into trouble there,
among other places...

* Read all of this before starting -- I've probably messed up a lot, and
you'll probably find things that I've missed, and will be able to
correct this document before starting.

* If you have a larger HDD, you could probably install more Linux's - I
would have liked to have had Debian and Sorcerer on it as well. Simply
create more logical partitions within the extended partition. Solaris
and FreeBSD, and some versions of Windows seem to all demand primary
partitions. Linux is flexible. Take advantage of that flexibility.

* Back up your data (or just don't have any data, like I did) before
starting. You will very likely lose data willy nilly (which is far more
serious than it sounds).

* If you wanted to be really cool, you could run VMWare on Linux (or
Windows) and try running other OS's within it. However, some (especially
Solaris) tend to like their hardware to remain as it was when they were
installed, and VMWare virtualises hardware. I haven't tried it, but I
suspect it wouldn't be that successful - go for the evaluation edition
of VMWare first. And get lots of RAM. And be prepared for slow I/O
(Which is what you would expect from an emulated Basic I/O System).

* Don't expect any help from Toshiba (or your preferred hardware vendor)
- they won't want to know, especially about FreeBSD (FreeWhat?) and
Solaris (SolWhat?). Linux usually gets a "We don't support Linux"
response, which is better than "FreeWhat?" and "SolWhat?". Occasionally
they will laugh at you. Slap them.

* Don't expect any help from me - I don't want to know, unless you are
paying me or are just pointing out errors in my notes.

* Remember that while installing 4 OSes is ten times the work of
installing one, maintaining 4 OSes is 4 times the work (and 4 times the
downloading) of maintaining one. You have four times as many patches,
four times as many updates, four times as many places to install (and
configure) browsers. Make sure you have enough bandwith available
cheaply enough to afford the downloads. Also, note that you have four
times as many potential security holes, and four times as many places to
make configuration errors.

* Finally, note that there's no reason why just because it's all working
now, it will still all be working tomorrow - you may have done nothing,
but when you have four OS's, each not really knowing anything about the
others, and really wanting to have your hardware to itself (and who
wouldn't?), one or other may just decide that it's going to do something
stupid, and you may lose data - keep it all backed up. Regularly. Also
ensure that you mmake your own notes on any deviations from this
procedure -- it will make redoing it simpler and faster, and less
painful (please also email those notes to me, so I can incorporate
them).

* ... And even more finally, please contribute any suggestions at all
back to me (<A HREF="mailto:richard@yellowgoanna.com">richard@yellowgoanna.com</A>), and I'll be appreciative.

Why bother?

As for why you would want to run all of the above OS's, well who knows?
Maybe, like me, you need to support all four, and want them handy. Maybe
you are just an OS fetishist. Maybe you are learning, or transitioning.
Maybe you are evaluating OSes for a specific purpose (It may be
advisable to evaluate one at a time -- it's much less painful). Maybe
you are demonstrating the advantages and disadvantages of each OS to
clients and potential clients, or students even. Maybe you, for some
reason, want or need to use four applications that each only run on one
of the OS's... Whatever your reason, I'm sure it's a good one (in a
sense, it had better be, as this will test your patience...)

Obviously, it's not worth setting up a multiboot server -- just choose
the appropriate OS, and install it. Generally, it's not really sensible
to run a server on a laptop anyway :) But then again, if that's what you
*really* want to do, go for it. Don't let anyone stop you. Unless they
are the ones paying for your time, in which case, they'll want a better
reason than you have :)

Of course, there is the sheer pleasure of being able to boot up and have
four great OSes to choose from. It's good for showing off, it's good for
your ego. It makes you feel like you can justify your laptop purchase,
and your chargeout rates. It's probably more effort than it's worth
though :)


The Procedure:

1. Install Windows XP using standard Toshiba install CDs (or just start
with how it came from the factory). It's advisable not to install other
software here, because if things go wrong later, which they most likely
will, you may have to start again, hence losing all that time and effort
(and downloads). ~1 hour

2. Use Partition Magic 7 (or your favourite NTFS-capable fs and
partition shrinker - I don't think there's any free ones worth trusting)
to shrink the Windows XP NTFS partition to around 6Gb, rather than the
default 18Gb (the entire drive). ~30 mins

3.	Use Linux' fdisk to partition the rest of the disk as follows:

partition   Purpose     ID (Type)         Notes

hda1        Windows XP  Ox07 (HPFS/NTFS)  a
hda2        Linux       Ox05 (Extended)   b
hda3        BSD	      OxA5 (BSD/386)    c
hda4        Solaris     Ox82 (Linux Swap) d

a) Some versions of Windows can be installed into logical partitions,
but some specifically demand the first primary. I left it as the first
primary because it's easier after doing the NTFS shrinking. Note that
while Linux has experimental NTFS, it's read-only, so if you want to be
able to share some disk, you'll need your own solution for that.

b) Within the extended partition, your Linux distribution can create
more partitions -- ensure that it creates its own swap partition (hda7
or so), and doesn't use hda4. I have heard that some Linux distros will
just format it as swap by default, thereby pissing you off. You can
avoid this by temporarily changing the partition ID to something
innocuous -- but do remember to change it back... Of course, if you just
want to use one linux partition, with a swapfile, feel free to make hda2
a Linux partition -- 83 (Linux)

c) FreeBSD demands a primary partition, and will set up its own slices
within here. Most linux distributions can mount these partitions.

d) Yes, Linux Swap. Sun happened to choose the same number for their x86
filesystem as Linus did for the swap partition. I have no idea who did
it first, but it _is_ annoying. Generally, this will cause no problems,
but you do need to be careful that Linux doesn't decide to use it for
swap, and delete your Solaris install. Also, like FreeBSD, Solaris
demands a primary partition, and sets up its own slices within there.
Note that the Solaris install, after choosing this DOS partition, will
treat this partition as if it's the whole disk -- so when it wants to
put the swap partition at the beginning of the disk, you can let it do
so...

*** IMPORTANT NOTE ***
Solaris' fdisk is rather unusually fussy. It requires a few cylinders
gap on either side of the Solaris partition (or at least, at the start
of the partition). See <A HREF="http://sun.drydog.com/faq/s86faq.html">http://sun.drydog.com/faq/s86faq.html</A>#5.7 for
more information. You may need to experiment a little with this. ~15
mins

4. At this stage, you can install either FreeBSD or Solaris -- I don't
think it matters, but I'd probably recommend istalling the one you have
most fear of, or the one that you most commonly have trouble with. That
way, when you make the inevitable error, or when the OS stuffs things up
for you, you have less work to have lost :) Anyway, do 5(BSD) and
6(Solaris) in whatever order you want. During this process, each OS
installs its own bootloader. This is OK -- you will overwrite them with
GRUB anyway. Win XP just loads Win XP. FreeBSD's will let you use the
F-Keys to select "??" (Win XP), "FreeBSD" or "??" (Solaris, or nothing,
depending on ordering -- IIRC, it ignores the Extended partition).
Solaris will let you choose any of the primary partitions to 
boot from. It's ugly, non-configurable, and always boots Solaris by
default. It's quite likely that you will still be able to boot each OS
at each stage, but don't worry if you can't - GRUB will cure your ills.

5(BSD). Install FreeBSD 4.4 (well, that's the CDs I had), taking care to
install it on /dev/ad0s3 - the third DOS slice on the first IDE disk
(unless, of course, you have SCSI, or partitioned differently to me, in
which case, you may need to engage your brain, and do some research :).
It can do its own partitioning thing from there. Install the minimum -
at this stage, you just want to make sure everything boots and is
workable, then worry about spending the time installing and/or compiling
more software. (then again, you probably want to get the most advantage
from your CDROMs, so you may as well install everything you can, and
then use CVSup later to update it) Stay in text mode, and don't worry
too much about X at this stage -- best to leave that until you have the
whole thing up and working.

Notes: Make sure you read the FreeBSD Handbook before installing (at
least, the "Installing FreeBSD" section --
<A HREF="http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/install.html">http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/install.html</A>).
It's useful, and will at least explain about the partitioning scheme,
which can be confusing if it's new to you. ~1 hour

6(Solaris). Install Solaris 8 by booting from the "Applications CD 1 of
2" rather than the Install CD or the floppy disk. If you must use the
floppy (your CD won't boot), then select CD when it asks you what to
boot from. The Install CD uses "WebStart", which has an even more broken
fdisk, and generally won't install all the way. This one starts a basic
X server, taking up a small window in the centre of your screen. It's
annoying, because not only does it make you scroll within the little
window to see the higher virtual resolution (which is smaller than your
screen anyway), but it won't let you scroll enough to see everything, so
you have to move windows around to see which button to click, and
occasionally are forced to guess. Again, don't worry about configuring X
or extra software - just install the stuff from the CD, and reboot.

Notes: Solaris can be pretty tough to install, and has more limited
hardware support than the other OS's here. Check the HCL _before_
purchasing. Also be sure to familiarise yourself with the Solaris Way.
It's quite different to most other OS's -- Sun wrote some code to make
the x86 platform look as much like a SPARC platform as they could, so
it's a little unusual. The primary difference is that once you've chosen
the Solaris fdisk partition, the rest of the install procedure, and
indeed, the OS itself, tricks itself into thinking that that partition
is the whole disk. It will treat the start of that partition as if it's
cylinder 0, and will ask if it can put the swap partition "at the
beginning of the disk", which sounds scary, but actually means at the
beginning of the partition. You can feel more comfortable if you take
note of how many cylinders are in the Solaris "disk", and how many in
the fdisk partition at the beginning of the process. ~1.5 hours


7. Install RedHat (or Debian, or Sorcerer, or whatever, for that matter.
Just make sure you can use GRUB, or a recent version of LILO, to ensure
you can do &gt;1024 cylinders with no trouble -- if you can't, then you
won't be able to boot at all. If you can, but for some reason, LILO
can't boot one of the other OSes, you can always download GRUB). RedHat,
if you choose the graphical install, will also open up an irritatingly
small window, like Solaris. I recommend the text based install. Again,
don't worry too much about X configuration for now, nor any apps. ~1
hour

8. Now we come to the GRUBby bit. RedHat, by default, sets GRUB up  to
boot whatever it can find - which for me, meant Win XP and RedHat
itself. I don't think it noticed FreeBSD or Solaris. Add lines similar
to the following to your /boot/grub/grub.conf: 

...
title XP Pro
	rootnoverify (hd0,0)
	chainloader +1
title RedHat 7.2
	root (hd0,4)
	...
title FreeBSD 4.5
	root (hd0,a)
	kernel /boot/loader
title Solaris 8
	rootnoverify (hd0,3)
	chainloader +1

You may need to change some of this, particularly the "root (hd0,x)"
lines -- hd0 is primary master IDE HDD, and the second number is the
partition number, counting from 0 for primary partitions, and 4 for
extended partitions. This is actually quite a delicate operation, and if
you get it wrong, it's quite possible that almost nothing will boot.
It's important to at _least_ get the Linux bit right (so then you can
fix it if the rest is wrong). You can, of course, boot from the Linux
install CD and fix it from there, but that takes even more time than you
want. Read the GRUB HOW-TO thoroughly, especially the bit on drive and
partition numbering - it's not intuitive in any sense of the word, and
each OS does it differently. Then run /sbin/grub-install (I believe
grub-install is deprecated, or not recommended, but I don't know what
else to use -- I'm kind of using it like LILO. I'd appreciate some input
here :). 
~15 minutes

9. Reboot about 8 times - twice per OS - to ensure that each at least
boots completely, and seems OK, and that booting one doesn't mess up the
other(s). Play with this a few times, as I've experienced trouble
getting Solaris to boot reliably after booting Linux and FreeBSD.
Solaris itself will still run its own bootloader after GRUB, but that's
ok -- though I wouldn't bother trying to load anything else from there.
If "stuff" doesn't work as expected, you're on your own - try messing
about with a linuxcare bootable business card CD, or whatever OS is
working, plus the install disks, and see what you can do. Please inform
me of your specific troubles and what you did to fix them, and I'll
adjust the notes accordingly.

10. Configure your network. For me, network configuration was trivial
under all OS's - I used the standard tools, and it all worked. My
Toshiba has a built in Intel 8225x 10/100 ethernet card, and it's well
supported, and my DHCP server just did its thing. However, at some
stage, you're likely (as I am) to want to connect to a foreign network
with one or more of your OSes. Try to make any firewall scripts you
write fairly modular, and familiarise yourself with each OSes network
tools -- netstat, route, ifconfig, etc -- remember that BSD and Solaris
differ markedly from RedHat in their networking startup configuration.

11. Set up X under Linux (if you're using a common distro, it's sure to
be the easiest place to start with X). Check <A HREF="http://www.linuxlaptop.net/">http://www.linuxlaptop.net/</A>
for advice on your laptop, look for laptops with similar or identical
video cards, and fiddle. Personally, I installed
<A HREF="http://www.cs.helsinki.fi/linux/XF86Config-4">http://www.cs.helsinki.fi/linux/XF86Config-4</A> with a few minor
modifications as /etc/X11/XF86Config-4, and X just worked. Personally, I
hate configuring X, and the card on my Toshiba (Trident CyberBlade XP
Ai1) is not real well supported under X, as Trident (or ALi, who I
understand now own Trident) won't release documentation. Test it. ~10
mins

12. Update FreeBSD to 4.5-STABLE. Ensure you are attached to the
internet with a broadband link, which you are not paying for (this takes
a long time, and downloads a lot of data). Run cvsupit (cd
/usr/ports/net/cvsupit; make; make install) and select a local cvsup
mirror and the appropriate version of FreeBSD to track (read the
handbook for advice). Follow the instructions in the FreeBSD handbook to
update (make buildworld, make buildkernel, make installkernel, make
installworld, mergemaster, etc) your FreeBSD. This is not exactly
essential, and you should be aware of the caveats (read the handbook),
but it can help. You will also want to update the ports tree. ~5 hours

13. Install XFree86 4 on FreeBSD. (cd /usr/ports/x11/Xfree86-4; make;
make install). I used pretty much the same config file as I did under
Linux, with some changes for Linux-&gt;BSD device naming (mouse,
specifically), and it was OK. You may (ok, you will) want to install
GNOME or something else at this stage -- check FreeBSD documentation for
how to do this, don't listen to me (I've got myself stuck at some point
here... :) ~2 hours

14. Just to make yourself feel good, boot all your OS's in turn again.
Weee!

15. Installing XFree86 on Solaris. Boot Something That Works And Has A
Browser (you may wish to configure and/or install one somewhere). Go to
<A HREF="http://soldc.sun.com/developer/support/driver/tools/video/video-index.ht">http://soldc.sun.com/developer/support/driver/tools/video/video-index.ht</A>
ml, and read away, printing what you need (README and Install
instructions). Download the XFree86 Porting Kit for Solaris 8 Intel (I
advise getting the binary, because there's less variants in that case).
Put this file on a server somewhere accessible from your Solaris
installation - It will be hard to download it using Solaris if you have
no X, and hence, no browser, so find an FTP server somewhere. If you
can't, it is possible to do it with Solaris, but it's a pain (unless you
already have X working with the default Sun X server -- if that's good
enough, you may not even want to bother with the XFree86 Porting Kit --
feel free to mess around with "kdmconfig" as root to try to get the
default X working before trying the download). Note that the XFree86
Porting Kit is neither as intimidating as it sounds (they have done the
porting, you don't need to do it), nor is it just like XFree86 on other
platforms. It integrates quite well with the standard Sun kdmconfig
system.

16. Boot Solaris. Get the file from wherever you put it. Follow the
instructions you printed. If, like me, you are using a card that's
unsuppported under Solaris, use the VESA driver here. You should use
pretty much the same settings as you used on Linux and FreeBSD (although
realise that it does work a little differently, and may be a different
minor version of XFree86). Do some testing.

17. Install software everywhere. Install everything you can, dammit.
Make sure you have every web browser under every platform. To some
degree, I (personally) recommend leaving the environments somewhat
"vanilla" for each OS. This way, you can learn to adapt to each OS, and
learn the differences, so that when you find yourself in front of
someone else's vanilla installation of FreeBSD, you will be able to use
it instantly, rather than needing to "Linuxise" it to make it usable to
you. Of course, it depends what you are doing this for, I guess --
whatever floats your goat^Wboat.

18. Make sure you noted any strange occurences or deviations (strictly
in the context of doing multi-OS installs following these notes), and
email them to me. I'll integrate them into the next draft of this
document. Really.

19. At this stage, once you have tested networking and XFree86 on each
platform, and you can successfully boot whatever you want, and it looks
pretty, and you have everything well-themed and so on, take it to your
friends' houses and show them. "oo-er".

20. Order Pizza and Beer (for me).


CAVEATS: 
* Presently, I'm having a lot of trouble with FreeBSD's ports collection
-- I think it's something irrelevant to this document (probably
something dumb I did), but it means that at present, I have X on
FreeBSD, but not GNOME.

* Additionally, just now, Solaris stopped booting. I don't think I
tested well enough at step 9. It may be worth booting each a few extra
times, and maybe running grub-install again, just to see that it is
really working.

* It's probably wise to ensure that all your downloaded updates get
cached somewhere locally, incase you need to start again, or do it to
another laptop. Read the FreeBSD handbook for info on caching there, and
perhaps try setting up a transparent http proxy on your network.


rr


-- 
Richard Russell
Yellow Goanna Pty Ltd
e: <A HREF="mailto:richard@yellowgoanna.com">richard@yellowgoanna.com</A>
m: +61 412 827 805
f: +61 8 8462 2362
 

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
