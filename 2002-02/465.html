<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="kernel/module build help" -->
<!-- FromName="'nik [tm]'" -->
<!-- FromEmail="tmcruisin@sond.com.au" -->
<!-- ToName="'LinuxSA'" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Thu, 14 Feb 2002 11:25:42 +1030" -->
<!-- Id="001001c1b4f2$54039210$0301a8c0@nick" -->
<!-- Reference="" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: kernel/module build help</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: nik [tm] &lt;<I><A HREF="mailto:tmcruisin@sond.com.au">tmcruisin@sond.com.au</A></I>&gt;
  To  : LinuxSA &lt;<I><A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A></I>&gt;
  Date: Thu, 14 Feb 2002 11:25:42 +1030
</PRE>
<H1>kernel/module build help</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Hi all,

I am a bit of a newbie with kernels, but have successfully build a couple
before.

I got a bit of a problem with a redhat 7.1 system I am working on after
re-compiling a new kernel.

I am making a sort of linux from scratch system which is working, so used
the 2.4.2-2 source to build it a new kernel.
I do all the building in a standard redhat 7.1 install, with downloaded
source.
the LFS is in a drive (hdc) mounted at /shore/

I did the usual stuff
cd /usr/src/linux-2.4.2-2/
make mrproper
make menuconfig (built a kernel that uses mainly modules to load as was
having some issues gettong eth0 to work)
make dep
make bzImage
make modules
make modules_install

I made a backup copy /lib/modules/2.4.2-2/ so it would change any of the
modules from the redhat install (as the kernel is for the LFS system)

then copied the kernel to /shore/boot/
I then copied (cp -rdva) the modules from /lib/modules/2.4.2-2/ into
/shore/lib/modules/2.4.2-2/
and copied the backup copy of the redhat modules back into
/lib/modules/2.4.2-2 (so the directory tree is identical)
all seemed ok

then run /sbin/lilo -r /shore to install the boot loader to the LFS drive.

when I then booted into the LFS it booted ok but maybe the kernel was too
thin for my needs
this isnt the problem as I can rebuild that kernel,
when I then booted back into redhat it says it cant load various modules
(USB-hci,eth0,auto-fs,char-major-6) with the error cannot locate module or
cannot load module: failed)
what I dont understand is how the stock redhat kernel has changed as I have
done nothing in /boot
and I thouhgt the stock redhat kernel had the drivers compiled in as there
was very few modules before I started.
I cant get an output of dmesg or messages or lilo.conf as networking isnt
going.
but if you wish to see any critical parts I can type them up..

can anyone help!!

cheers
nik [tm]

·´¯`·.¸¸..&gt;&lt;((((º&gt;.·´¯`·.¸¸.·´¯`·.¸
 &gt;&lt;((((º&gt;`·.¸¸.·´¯`·.¸&gt;&lt;((((º&gt;`·.¸


-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
