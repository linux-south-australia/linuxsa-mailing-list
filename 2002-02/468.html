<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="RE: kernel/module build help" -->
<!-- FromName="'Ben Williams'" -->
<!-- FromEmail="benw@webmedia.com.au" -->
<!-- ToName="'Anthony Symons','nik [tm]'" -->
<!-- ToEmail="ant@sa.pracom.com.au,tmcruisin@sond.com.au" -->
<!-- Date="Thu, 14 Feb 2002 11:54:09 +1030" -->
<!-- Id="GHEFJDGNANAKIODMONDIOEHODLAA.benw@webmedia.com.au" -->
<!-- Reference="1013648463.14487.382.camel@ant.internal" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: RE: kernel/module build help</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Ben Williams &lt;<I><A HREF="mailto:benw@webmedia.com.au">benw@webmedia.com.au</A></I>&gt;
  To  : Anthony Symons &lt;<I><A HREF="mailto:ant@sa.pracom.com.au">ant@sa.pracom.com.au</A></I>&gt;<BR>        nik [tm] &lt;<I><A HREF="mailto:tmcruisin@sond.com.au">tmcruisin@sond.com.au</A></I>&gt;
  Date: Thu, 14 Feb 2002 11:54:09 +1030
</PRE>
<H1>RE: kernel/module build help</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
nik,

i found i got the same/a similar thing when i tried my first kernel
compile. i can't remember how i found this out, but 'mkinitrd' helped
me - program that makes an init ram disk ('man mkinitrd').

i know in grub there's a paramater you can pass listing the initrd,
don't know abotu lilo. i assume you can.

and i agree with ant - if you're going to try and fix things by
compiling a new kernel, it makes sense to me to get the latest. bugs
fixes and all that.

the other thing that i read somewhere is nic drivers tend to not like
being moduled. i've got an intel etherexpress pro 100, and it works well
when compiled in directly, but i had problems with it as a module. try
compiling it directly.

 - Ben

&gt; -----Original Message-----
&gt; From: Anthony Symons [mailto:<A HREF="mailto:ant@sa.pracom.com.au">ant@sa.pracom.com.au</A>]
&gt; Sent: Thursday, 14 February 2002 11:31 AM
&gt; To: nik [tm]
&gt; Cc: LinuxSA
&gt; Subject: Re: kernel/module build help
&gt;
&gt;
&gt; Sounds like your getting your versions mixed up. Try grabbing
&gt; a current
&gt; kernel source from kernel.org - or a mirror like:
&gt;
&gt; &lt;<A HREF="http://mirror.aarnet.edu.au/pub/linux/kernel/v2.4/linux-2.4.1">http://mirror.aarnet.edu.au/pub/linux/kernel/v2.4/linux-2.4.1</A>
7.tar.bz2&gt;
&gt;
&gt; Then use that and all your new libs will go in /lib/modules/2.4.17 and
&gt; wont conflict with your 2.4.2 stuff. I dont completely understand what
&gt; youve done with your versions, but I'd just forget 2.4.2 and
&gt; get 2.4.17
&gt; going.
&gt;
&gt; Ant
&gt;
&gt; On Thu, 2002-02-14 at 11:25, nik [tm] wrote:
&gt; &gt; Hi all,
&gt; &gt;
&gt; &gt; I am a bit of a newbie with kernels, but have successfully
&gt; build a couple
&gt; &gt; before.
&gt; &gt;
&gt; &gt; I got a bit of a problem with a redhat 7.1 system I am
&gt; working on after
&gt; &gt; re-compiling a new kernel.
&gt; &gt;
&gt; &gt; I am making a sort of linux from scratch system which is
&gt; working, so used
&gt; &gt; the 2.4.2-2 source to build it a new kernel.
&gt; &gt; I do all the building in a standard redhat 7.1 install,
&gt; with downloaded
&gt; &gt; source.
&gt; &gt; the LFS is in a drive (hdc) mounted at /shore/
&gt; &gt;
&gt; &gt; I did the usual stuff
&gt; &gt; cd /usr/src/linux-2.4.2-2/
&gt; &gt; make mrproper
&gt; &gt; make menuconfig (built a kernel that uses mainly modules to
&gt; load as was
&gt; &gt; having some issues gettong eth0 to work)
&gt; &gt; make dep
&gt; &gt; make bzImage
&gt; &gt; make modules
&gt; &gt; make modules_install
&gt; &gt;
&gt; &gt; I made a backup copy /lib/modules/2.4.2-2/ so it would
&gt; change any of the
&gt; &gt; modules from the redhat install (as the kernel is for the
&gt; LFS system)
&gt; &gt;
&gt; &gt; then copied the kernel to /shore/boot/
&gt; &gt; I then copied (cp -rdva) the modules from /lib/modules/2.4.2-2/ into
&gt; &gt; /shore/lib/modules/2.4.2-2/
&gt; &gt; and copied the backup copy of the redhat modules back into
&gt; &gt; /lib/modules/2.4.2-2 (so the directory tree is identical)
&gt; &gt; all seemed ok
&gt; &gt;
&gt; &gt; then run /sbin/lilo -r /shore to install the boot loader to
&gt; the LFS drive.
&gt; &gt;
&gt; &gt; when I then booted into the LFS it booted ok but maybe the
&gt; kernel was too
&gt; &gt; thin for my needs
&gt; &gt; this isnt the problem as I can rebuild that kernel,
&gt; &gt; when I then booted back into redhat it says it cant load
&gt; various modules
&gt; &gt; (USB-hci,eth0,auto-fs,char-major-6) with the error cannot
&gt; locate module or
&gt; &gt; cannot load module: failed)
&gt; &gt; what I dont understand is how the stock redhat kernel has
&gt; changed as I have
&gt; &gt; done nothing in /boot
&gt; &gt; and I thouhgt the stock redhat kernel had the drivers
&gt; compiled in as there
&gt; &gt; was very few modules before I started.
&gt; &gt; I cant get an output of dmesg or messages or lilo.conf as
&gt; networking isnt
&gt; &gt; going.
&gt; &gt; but if you wish to see any critical parts I can type them up..
&gt; &gt;
&gt; &gt; can anyone help!!
&gt; &gt;
&gt; &gt; cheers
&gt; &gt; nik [tm]
&gt; &gt;
&gt; &gt; ·´¯`·.¸¸..&gt;&lt;((((º&gt;.·´¯`·.¸¸.·´¯`·.¸
&gt; &gt;  &gt;&lt;((((º&gt;`·.¸¸.·´¯`·.¸&gt;&lt;((((º&gt;`·.¸
&gt; &gt;
&gt; &gt;
&gt; &gt; --
&gt; &gt; LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on
&gt; irc.linux.org.au
&gt; &gt; To unsubscribe from the LinuxSA list:
&gt; &gt;   mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as
&gt; the subject
&gt; &gt;
&gt; --
&gt; Systems Administrator
&gt; Pracom Ltd.
&gt; +61 8 82029074 -=- +61 402 100 671
&gt; <A HREF="mailto:anthony.symons@sa.pracom.com.au">anthony.symons@sa.pracom.com.au</A>
&gt;
&gt; PRIVILEGED - PRIVATE AND CONFIDENTIAL
&gt; This electronic mail is solely for the use of the addressee and may
&gt; contain information which is confidential or privileged.
&gt; If you receive this electronic mail in error, please delete it from
&gt; your system immediately and notify the sender by electronic mail or
&gt; using any of the above contact details.
&gt;
&gt; --
&gt; LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on
&gt; irc.linux.org.au
&gt; To unsubscribe from the LinuxSA list:
&gt;   mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as
&gt; the subject
&gt;
&gt;

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
