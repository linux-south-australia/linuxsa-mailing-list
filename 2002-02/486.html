<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: kernel/module build help" -->
<!-- FromName="'Anthony Symons'" -->
<!-- FromEmail="ant@sa.pracom.com.au" -->
<!-- ToName="'nik [tm]'" -->
<!-- ToEmail="tmcruisin@sond.com.au" -->
<!-- Date="14 Feb 2002 14:20:56 +1030" -->
<!-- Id="1013658657.15328.416.camel@ant.internal" -->
<!-- Reference="001001c1b4f2$54039210$0301a8c0@nick" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: kernel/module build help</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Anthony Symons &lt;<I><A HREF="mailto:ant@sa.pracom.com.au">ant@sa.pracom.com.au</A></I>&gt;
  To  : nik [tm] &lt;<I><A HREF="mailto:tmcruisin@sond.com.au">tmcruisin@sond.com.au</A></I>&gt;
  Date: 14 Feb 2002 14:20:56 +1030
</PRE>
<H1>Re: kernel/module build help</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Boot in to the broken redhat kernel, and as root do a 

depmod -a 

It should chug away for a second then just give you the prompt back, if
it comains then your modules are broken.

You can also do a depmod -v and see that it lists all your modules and
doesnt complain about anything. I think depmod -a usually shows up any
modules problems I have, but my system is working, so I cant verify
thats right.

make modules_install just copys them from the source tree to
/lib/modules/&lt;version&gt;/

Ant

On Thu, 2002-02-14 at 14:19, nik [tm] wrote:
&gt; &gt; Nah I think this is a symptom of having 2 kernels sharing one set of
&gt; &gt; modules. And some are missing for one of the kernels or something like
&gt; &gt; that.
&gt; 
&gt; they are not sharing modules..
&gt; they are two seperate installs on different hard disks and I remove one to
&gt; boot into the other.
&gt; I just mount the LFS drive in redhat to put the kernel and modules in place
&gt; and run lilo (lilo -r /LFS_MOUNT)
&gt; 
&gt; in affect all I have done in the redhat machine (which is the one not
&gt; working) is used it kernel source to compile the kernel,
&gt; 
&gt; make mrproper
&gt; make menuconfig
&gt; make dep
&gt; then copied the /lib/modules/2.4.2-2/ folder tree to a backup folder
&gt; make modules
&gt; make modules_install
&gt; copied the new modules folder to the LFS mount (with the new kernel and
&gt; modules) and then copied the old modules folder back to where it was..
&gt; 
&gt; I havent touched redhats lilo config, or /boot folder or modules.conf or
&gt; modprobe or insmod'd anything etc..
&gt; I can boot into the new LFS kernel fine, its just the redhat which now
&gt; doesnt work.
&gt; what exactly does 'make modules_install' change? I guess it puts the newly
&gt; compiled modules into /lib/modules/VERSION/ folder but how does it affect
&gt; the map? files?
&gt; 
&gt; 
&gt; &gt; &gt; I'd have a look at modprobe and modules.conf.  I think you might need to
&gt; &gt; &gt; specify where it looks for the correct modules.
&gt; 
&gt; seems to be in place but when I now modprobe the module for the NIC
&gt; (8139too) it give unresolved symbol errors.
&gt; maybe I didnt copy the modules correctly and they did get overwritten..
&gt; I think I will have to build a new kernel for redhat.. Instead of trying to
&gt; fix up the one I had... I was trying to avoid this, not sure why!?! spent
&gt; more time trying to fix it than making another..
&gt; 
&gt; cheers for all the advice
&gt; 
&gt; nik [tm]
&gt; 
&gt; ·´¯`·.¸¸..&gt;&lt;((((º&gt;.·´¯`·.¸¸.·´¯`·.¸
&gt;  &gt;&lt;((((º&gt;`·.¸¸.·´¯`·.¸&gt;&lt;((((º&gt;`·.¸
&gt; 
&gt; 
-- 
Systems Administrator       
Pracom Ltd.             
+61 8 82029074 -=- +61 402 100 671 
<A HREF="mailto:anthony.symons@sa.pracom.com.au">anthony.symons@sa.pracom.com.au</A>

PRIVILEGED - PRIVATE AND CONFIDENTIAL
This electronic mail is solely for the use of the addressee and may
contain information which is confidential or privileged.
If you receive this electronic mail in error, please delete it from
your system immediately and notify the sender by electronic mail or
using any of the above contact details.

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
