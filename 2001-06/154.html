<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: Runing two copies of Apache" -->
<!-- FromName="'Wayne Simes'" -->
<!-- FromEmail="wlsimes@tell.net.au" -->
<!-- ToName="'David Lloyd'" -->
<!-- ToEmail="lloy0076@rebel.net.au" -->
<!-- Date="Mon, 4 Jun 2001 21:09:27 +0930" -->
<!-- Id="002201c0eceb$0d2d0da0$6401a8c0@penguin.org" -->
<!-- Reference="001101c0ec1d$52f70120$6401a8c0@penguin.org" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: Runing two copies of Apache</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Wayne Simes &lt;<I><A HREF="mailto:wlsimes@tell.net.au">wlsimes@tell.net.au</A></I>&gt;
  To  : David Lloyd &lt;<I><A HREF="mailto:lloy0076@rebel.net.au">lloy0076@rebel.net.au</A></I>&gt;
  Date: Mon, 4 Jun 2001 21:09:27 +0930
</PRE>
<H1>Re: Runing two copies of Apache</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Hi David & other repliers!

Thanks for you input.

Some of you have suggested using virtual hosting the primary apache, yeah
well I though of that and am currently doing that with other servers. So I
thought I would try something different and learn something new too, just so
I can say 'I know how to do that!'. Also if you are like me, and experiment
from time to time on a production box, then sometimes it not in the best
interests of the company involved to go practice with their live version, so
thats where playing with a second copy comes in useful.

Anyway David, I tried a cut down version of /etc/rc.d/init.d/httpd, which
was very rough with a line like /usr/sbin/httpd -f &lt;path toconfig file&gt; -D
&lt;modules&gt;, and that kinda brute forced it to start. But I didn't know about
chkconfig, so I'll have a read like you mentioned, and try something a
little sweeter in my script.

Oh yeah, I didn't get a failed when the second apache wouldn't start, it
just exited. I would get a 'Starting httpd:' and then it would just jump
down to a newline with a prompt.


Thanks

Wayne


&gt; If you look at /etc/rc.d/init.d/httpd it uses a function call "daemon"
&gt; to start HTTPD. This is contained in /etc/rc.d/init.d/functions.
&gt;
&gt; It has a line that has a comment:
&gt;
&gt; # See if it's already running. Look *only* at the pid file.
&gt;
&gt; I suspect that may be causing you trouble, as it just returns and you
&gt; may see the (probably red) fail/not ok information. Given that you say
&gt; you don't see any apache/httpd errors this is probably the cause as I
&gt; don't see any reason why this script would write to any log files.
&gt;
&gt; You could try writing your own httpd script. It won't be as nice, but
&gt; they're not that difficult...
&gt;
&gt; Basics:
&gt;
&gt; #! /bin/bash
&gt; # chkconfig: 235 85 15
&gt; # descriptionn: A Starting Script
&gt;
&gt; case $1 in
&gt;
&gt; start)
&gt;
&gt; # insert script lines for starting the process
&gt;
&gt; ;;
&gt;
&gt; stop)
&gt;
&gt; # insert script lines for stopping the process
&gt;
&gt; ;;
&gt;
&gt; esac
&gt;
&gt; Then do:
&gt;
&gt; # chkconfig add myscript
&gt;
&gt; And you can use chkconfig to manage this script (man chkconfig, that
&gt; will tell you about the stuff at the top starting with chkconfig: too).
&gt;
&gt; You might try to look at /usr/share/doc/sysvinit-[lots of version
&gt; numbers] for the type of script I'm describing.
&gt;
&gt; No doubt one of the RHCE's may know a way to circumvent the check that
&gt; appears to be occuring too...
&gt;
&gt; DSL
&gt;
&gt; --
&gt; LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
&gt; To unsubscribe from the LinuxSA list:
&gt;   mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject
&gt;
&gt;

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
