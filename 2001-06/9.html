<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="pppd on two serial ports" -->
<!-- FromName="" -->
<!-- FromEmail="Norm@newpointtech.com" -->
<!-- ToName="" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Thu, 31 May 2001 14:39:59 -0400" -->
<!-- Id="B172085D2860D411ADFB00105A6552DC34BB33@winadmin" -->
<!-- Reference="" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: pppd on two serial ports</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: &lt;<I><A HREF="mailto:Norm@newpointtech.com">Norm@newpointtech.com</A></I>&gt;
  To  : &lt;<I><A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A></I>&gt;
  Date: Thu, 31 May 2001 14:39:59 -0400
</PRE>
<H1>pppd on two serial ports</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
This message is in MIME format. Since your mail reader does not understand
this format, some or all of this message may not be legible.

------_=_NextPart_001_01C0EA01.187E6F60
Content-Type: text/plain;
	charset="ISO-8859-1"

Hello List.

Straight to the point.

I'm required to run two ppp daemons on two serial ports. The OEM x86 box I'm
using (RH 2.2.12) reserves IRQ3 for custom IO hardware. Consequently only
standard ttyS0 and ttyS2 are available on the motherboard. 

Using ttyS0/ttyS2 (sharing IRQ4) allows me to run a single pppd on either
port and establish a connection. Running pppd on both ports simultaneously
allows no connection to either port.

Observing dmesg I see "Serial driver version 4.27 with MANY_PORTS MULTIPORT
SHARE_IRQ enabled" 

I'd suspect that the serial driver would know how to share the motherboard
ports based on this message. Apparently Wrong.

I'm in the process of acquiring a fully configurable 16550-type port card
which should allow me to use any COM port configuration I can imagine (SIIG
Inc.).

I've also created a rc.serial script which apparently succesfully registers
an alternate irq for ttyS1 (using "setserial /dev/ttyS1 irq 7" in the script
and "setserial /dev/ttyS*" to confirm from the command line). However, with
the legacy port card I've been trying to use at IRQ7 for that port I have
been unable to get a pppd to work under any scenario. (pppd on ttyS0 of the
same card works fine)

I'd appreciate any insights or hints that anyone may have to offer. Are
there any tricks to getting multiple serial pppds to play assuming my
hardware is operating as configured?

Thanks in advance.

Norm

------_=_NextPart_001_01C0EA01.187E6F60
Content-Type: text/html;
	charset="ISO-8859-1"
Content-Transfer-Encoding: quoted-printable

&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN"&gt;
&lt;HTML&gt;
&lt;HEAD&gt;
&lt;META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; =
charset=3DISO-8859-1"&gt;
&lt;META NAME=3D"Generator" CONTENT=3D"MS Exchange Server version =
5.5.2653.12"&gt;
&lt;TITLE&gt;pppd on two serial ports&lt;/TITLE&gt;
&lt;/HEAD&gt;
&lt;BODY&gt;

&lt;P&gt;&lt;FONT SIZE=3D2 FACE=3D"Arial"&gt;Hello List.&lt;/FONT&gt;
&lt;/P&gt;

&lt;P&gt;&lt;FONT SIZE=3D2 FACE=3D"Arial"&gt;Straight to the point.&lt;/FONT&gt;
&lt;/P&gt;

&lt;P&gt;&lt;FONT SIZE=3D2 FACE=3D"Arial"&gt;I'm required to run two ppp daemons on =
two serial ports. The OEM x86 box I'm using (RH 2.2.12) reserves IRQ3 =
for custom IO hardware. Consequently only standard ttyS0 and ttyS2 are =
available on the motherboard. &lt;/FONT&gt;&lt;/P&gt;

&lt;P&gt;&lt;FONT SIZE=3D2 FACE=3D"Arial"&gt;Using ttyS0/ttyS2 (sharing IRQ4) =
allows me to run a single pppd on either port and establish a =
connection. Running pppd on both ports simultaneously allows no =
connection to either port.&lt;/FONT&gt;&lt;/P&gt;

&lt;P&gt;&lt;FONT SIZE=3D2 FACE=3D"Arial"&gt;Observing dmesg I see &quot;Serial =
driver version 4.27 with MANY_PORTS MULTIPORT SHARE_IRQ enabled&quot; =
&lt;/FONT&gt;
&lt;/P&gt;

&lt;P&gt;&lt;FONT SIZE=3D2 FACE=3D"Arial"&gt;I'd suspect that the serial driver =
would know how to share the motherboard ports based on this message. =
Apparently Wrong.&lt;/FONT&gt;&lt;/P&gt;

&lt;P&gt;&lt;FONT SIZE=3D2 FACE=3D"Arial"&gt;I'm in the process of acquiring a =
fully configurable 16550-type port card which should allow me to use =
any COM port configuration I can imagine (SIIG Inc.).&lt;/FONT&gt;&lt;/P&gt;

&lt;P&gt;&lt;FONT SIZE=3D2 FACE=3D"Arial"&gt;I've also created a rc.serial script =
which apparently succesfully registers an alternate irq for ttyS1 =
(using &quot;setserial /dev/ttyS1 irq 7&quot; in the script and =
&quot;setserial /dev/ttyS*&quot; to confirm from the command line). =
However, with the legacy port card I've been trying to use at IRQ7 for =
that port I have been unable to get a pppd to work under any scenario. =
(pppd on ttyS0 of the same card works fine)&lt;/FONT&gt;&lt;/P&gt;

&lt;P&gt;&lt;FONT SIZE=3D2 FACE=3D"Arial"&gt;I'd appreciate any insights or hints =
that anyone may have to offer. Are there any tricks to getting multiple =
serial pppds to play assuming my hardware is operating as =
configured?&lt;/FONT&gt;&lt;/P&gt;

&lt;P&gt;&lt;FONT SIZE=3D2 FACE=3D"Arial"&gt;Thanks in advance.&lt;/FONT&gt;
&lt;/P&gt;

&lt;P&gt;&lt;FONT SIZE=3D2 FACE=3D"Arial"&gt;Norm&lt;/FONT&gt;
&lt;/P&gt;

&lt;/BODY&gt;
&lt;/HTML&gt;
------_=_NextPart_001_01C0EA01.187E6F60--

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
