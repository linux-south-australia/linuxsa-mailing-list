<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: Immutable bit?" -->
<!-- FromName="'Greg Lehey'" -->
<!-- FromEmail="grog@lemis.com" -->
<!-- ToName="'Nicholas Morrison'" -->
<!-- ToEmail="nmorrison@skycityadelaide.com.au" -->
<!-- Date="Fri, 1 Jun 2001 15:38:30 +0930" -->
<!-- Id="20010601153830.D86186@wantadilla.lemis.com" -->
<!-- Reference="01Jun1.150744cst.119044@gateway.adelaidecasino.com.au" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: Immutable bit?</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Greg Lehey &lt;<I><A HREF="mailto:grog@lemis.com">grog@lemis.com</A></I>&gt;
  To  : Nicholas Morrison &lt;<I><A HREF="mailto:nmorrison@skycityadelaide.com.au">nmorrison@skycityadelaide.com.au</A></I>&gt;
  Date: Fri, 1 Jun 2001 15:38:30 +0930
</PRE>
<H1>Re: Immutable bit?</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
On Friday,  1 June 2001 at 15:00:54 +0930, Nicholas Morrison wrote:
&gt;
&gt; I just read a quick thingo on /. about the "immutable bit" in
&gt; BSD4.4, which apparently stops even root from performing certain
&gt; operations on files, except when the system's in single user
&gt; mode...

This is in fact a whole set of flags:

DESCRIPTION
     The file whose name is given by path or referenced by the descriptor fd
     has its flags changed to flags.

     The flags specified are formed by or'ing the following values

           UF_NODUMP     Do not dump the file.
           UF_IMMUTABLE  The file may not be changed.
           UF_APPEND     The file may only be appended to.
           UF_NOUNLINK   The file may not be renamed or deleted.
           UF_OPAQUE     The directory is opaque when viewed through a union
                         stack.
           SF_IMMUTABLE  The file may not be changed.
           SF_APPEND     The file may only be appended to.
           SF_NOUNLINK   The file may not be renamed or deleted.

     The ``UF_IMMUTABLE'', ``UF_APPEND'' and ``UF_NOUNLINK'' flags may be set
     or unset by either the owner of a file or the super-user.

     The ``SF_IMMUTABLE'', ``SF_APPEND'' and ``SF_NOUNLINK'' flags may only be
     set or unset by the super-user.  Attempts by the non-super-user to set
     the super-user only flags are silently ignored.  These flags may be set
     at any time, but normally may only be unset when the system is in single-
     user mode.  (See init(8) for details.)

The user utility knows these names:

     The flags are specified as an octal number or a comma separated list of
     keywords.  The following keywords are currently defined:

           arch    set the archived flag (super-user only)
           opaque  set the opaque flag (owner or super-user only)
           nodump  set the nodump flag (owner or super-user only)
           sappnd  set the system append-only flag (super-user only)
           schg    set the system immutable flag (super-user only)
           sunlnk  set the system undeletable flag (super-user only)
           uappnd  set the user append-only flag (owner or super-user only)
           uchg    set the user immutable flag (owner or super-user only)
           uunlnk  set the user undeletable flag (owner or super-user only)
           archived, sappend, schange, simmutable, uappend, uchange, uimmutable,
           sunlink, uunlink
                   aliases for the above

These excerpts are from chflags(2) and chflags(1), respectively.  The
SF_NOUNLINK flag is only available in FreeBSD.

Greg
--
Finger <A HREF="mailto:grog@lemis.com">grog@lemis.com</A> for PGP public key
See complete headers for address and phone numbers

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
