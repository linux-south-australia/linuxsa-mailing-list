<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: The Impact of Ipchains and/or Ipfilter on Performance" -->
<!-- FromName="'Alan Kennington'" -->
<!-- FromEmail="akenning@topology.org" -->
<!-- ToName="'LinuxSA'" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Sat, 23 Jun 2001 20:34:51 +0930" -->
<!-- Id="20010623203451.B1425@dog.topology.org" -->
<!-- Reference="3B34619B.F73DF290@rebel.net.au" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: The Impact of Ipchains and/or Ipfilter on Performance</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Alan Kennington &lt;<I><A HREF="mailto:akenning@topology.org">akenning@topology.org</A></I>&gt;
  To  : LinuxSA &lt;<I><A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A></I>&gt;
  Date: Sat, 23 Jun 2001 20:34:51 +0930
</PRE>
<H1>Re: The Impact of Ipchains and/or Ipfilter on Performance</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
On Sat, Jun 23, 2001 at 07:00:03PM +0930, David Lloyd wrote:
&gt; 
&gt; Does anyone know of any definitive papers or sites on the impact of
&gt; using ipchains or iptables on performance? I remember one person on an
&gt; IRC channel (noone on LinuxSA that I can recall) commenting that adding
&gt; an ipchains rule would slow one's whole system down where slow, of
&gt; course, is a very relative term...
&gt; 


David,

I asked this question during a tutorial by Rusty last year
(or was it the year before?), and he assured us that even
with heaps of rules, 100 Mbit/sec throughput is not problem at all.

Personally, I doubt that, although I haven't tried it.

Take the example of 100 Mbit/sec continuous throughput of
ping packets - not very realistic, I admit.
But this is the worst case (for a single interface), 
and if you can cope with this,
you can cope with anything.
In this case, you have about 200,000 packets/second.
This gives you on a 400 MHz machine about 2000 cycles
per packet.
If you look at the basic IP code, you'll see that it contains
a big heap of processing per packet already.

If you allow about 10-20 cycles per rule, and a packet has
to go through 10 rules on average, that's about 10% of your CPU
cycles gone in rule processing alone. I'd estimate a 
further 10% to 20% for basic IP layer processing etc.

Hmmm. Well this looks like the worst case
should be feasible just.
But my experience with 155 Mbit/sec ATM has indicated
that the IP layer overhead + device driver overhead together
cause the maximum continuous throughput to be about 30% 
on a 400 MHz CPU with 1000 Byte packets.

That seems to indicate that given the huge overheads in
just the basic packet I/O processing, the estra overhead
of ipchains/iptables rules might not be even noticeable.

Someone should do an experiment!

Cheers,
Alan Kennington.

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
