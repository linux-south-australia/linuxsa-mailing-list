<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: tcsh does not work as root shell in SuSE 7.1??" -->
<!-- FromName="'Alan Kennington'" -->
<!-- FromEmail="akenning@topology.org" -->
<!-- ToName="'LinuxSA'" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Tue, 26 Jun 2001 22:10:35 +0930" -->
<!-- Id="20010626221035.A27872@dog.topology.org" -->
<!-- Reference="Pine.LNX.4.10.10106262128430.474-100000@localhost.localdomain" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: tcsh does not work as root shell in SuSE 7.1??</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Alan Kennington &lt;<I><A HREF="mailto:akenning@topology.org">akenning@topology.org</A></I>&gt;
  To  : LinuxSA &lt;<I><A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A></I>&gt;
  Date: Tue, 26 Jun 2001 22:10:35 +0930
</PRE>
<H1>Re: tcsh does not work as root shell in SuSE 7.1??</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
On Tue, Jun 26, 2001 at 09:35:02PM +0930, David Newall wrote:
&gt; The usual reason why you get "No such file or directory" when the file is
&gt; clearly there, is because some other file, needed to startup the image,
&gt; is missing.  For example:
&gt; 
&gt;   $ cat demo
&gt;   #! /bin/nothere
&gt;   echo "hello world"
&gt;   $ ls -l demo
&gt;   -rwxrwxr-x 1 davidn davidn  34 Jun 26 21:29 demo
&gt;   $ ./demo
&gt;   bash: ./demo: No such file or directory


David,

Thanks for the ideas.
At the time, I was in a terrible panic about it.
But since then, it has been going okay.

My best conjecture about what went wrong is this:

First I set the root shell to "tcsh" with no leading
path components.
That then made it impossible to log in as root.

Then I changed it to /bin/tcsh remotely from a luckily
still open root shell.

Now at this point, there's a very strange phenomenon.
When I change shells, I have very often observed that
the next time I log in, the previous shell is used,
until about 30 seconds later. Thus I get this sort of thing.

1.	root shell is /bin/bash
2.	I change root shell to /bin/tcsh
3.	I log in as root - and I get bash again.
4.	I log out and log back in as root, but
	this time I get tsch.

This has happened on numerous occasions.

So my conjecture is that when I changed the root shell
to /bin/tcsh, the system was still remembering that the
shell was "tcsh". And that's when I panicked, because I
thought that that should have worked.

In these cases, I have not been using vipw or "vi /etc/passwd".
I've been using the standard SuSE system config tools.
It may just be that these tools take a while
to take effect, or else there is some caching of the
passwd file in the getty processes or something.

But I think that something like specifying an invalid
root shell should not have such dire consequences.
Of all the user accounts, root certainly needs to be
protected against this the most, wheres only ordinary
users are actually required to have a shell from /etc shells.

Anyway, I have such a huge backlog of network admin chores,
I can't really devote time/energy to analysing them all after the event.

Cheers,
Alan Kennington.

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
