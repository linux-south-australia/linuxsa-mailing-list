<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: Firewall Accounting" -->
<!-- FromName="'Michael Neuling'" -->
<!-- FromEmail="Michael.Neuling@keyworks.com.au" -->
<!-- ToName="'Sam Silvester'" -->
<!-- ToEmail="ssilvest@bigpond.net.au" -->
<!-- Date="Wed, 27 Jun 2001 21:30:06 +0800" -->
<!-- Id="20010627133007.E9CC4100F1@vodka.keyworks.com.au" -->
<!-- Reference="" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: Firewall Accounting</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Michael Neuling &lt;<I><A HREF="mailto:Michael.Neuling@keyworks.com.au">Michael.Neuling@keyworks.com.au</A></I>&gt;
  To  : Sam Silvester &lt;<I><A HREF="mailto:ssilvest@bigpond.net.au">ssilvest@bigpond.net.au</A></I>&gt;
  Date: Wed, 27 Jun 2001 21:30:06 +0800
</PRE>
<H1>Re: Firewall Accounting</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
&gt; I have a linux box connected to the net that does IP Masquerade for
&gt; 4 machines on my network. Is there any way of keeping track of how
&gt; much data is downloaded on a per machine basis? So far I can only
&gt; work out how to track how much they are sending...
&gt; 
&gt; If you need to know any more details let me know!

You can use the byte counters in the packet filter.  Are you
using IPFWADM, IPChains or IPTables?

If you are using IPChains or IPFWADM then you won't see packets in the
forward chain when they come back.  You can't use the input chain
either as the packets are not demasquraded at this point and therefore
you will not be able to tell where they are going.  Therefore you'll
need to put a rule in the output chain matching packets going _to_
each of the internal machines (you may want to filter out packets
coming from the firewall)

IPtables is much simpler (the idiots who did IPChains wouldn't know
their ass from a firewall).  If you are using IPTables then just put a
rule in the forward chain matching packets going to each of the
internal machines.  

Regards,
Michael
--
  "I don't have to be careful.  I got a gun."
    Homer J. Simpson

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
