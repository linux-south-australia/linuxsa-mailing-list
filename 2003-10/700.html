<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Major NAT headaches" -->
<!-- FromName="'Craig Mead'" -->
<!-- FromEmail="craig@australianwireless.org" -->
<!-- ToName="" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Mon, 27 Oct 2003 14:51:18 +1100" -->
<!-- Id="" -->
<!-- Reference="" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Major NAT headaches</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Craig Mead &lt;<I><A HREF="mailto:craig@australianwireless.org">craig@australianwireless.org</A></I>&gt;
  To  : &lt;<I><A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A></I>&gt;
  Date: Mon, 27 Oct 2003 14:51:18 +1100
</PRE>
<H1>Major NAT headaches</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Hey all,

Was running a Debian box doing NAT and DHCP for the home via my old 256
iinet connection. Time came to upgrade and I signed up for 1.5mb thru
UnitedIP (connect tails). iinet connection was running great guns and had
been for about 5 months thru this exact same gateway box. Swapped over auth.
details on the Debian box and went to use it from a Windows machine which
was being NAT'd. 88 bytes per second download. Theres no QoS on the systems
at all on either end and not even any firewall restrictions while I'm still
debugging. Checked from the machine itself, ~ 180kB/sec, so the connection
was perfect. Tried connecting from a Linux laptop I have and same thing,
~180kB/sec, full speed. Have since done the following....

- reinstalled Debian about 5 times with various changes in config
- changed thru six diff. NiC's in the gateway
- attempted with 3 completelt diff. servers (mobo/ram/nic/proc's the works)
- isntalled FreeBSD 5.1 a few times on each of the different servers
- tried multiple different NiC's in the Windows clients (theres 5 diff.
Windows boxes by the way) including going to wireless cards as well
- Tried two different switches and direct cross over into the LAN if of the
gateway
- Tried changing MTU's on the windows clients, the PPPoE connection and the
if in the gateway (in all possible combinations)
- run apps like Internet optimizer on the windows clients to "optimize"

It appears to be completely Windows' + NAT  + UIP combination fault due to
the following

- all Linux machines I try work fine
- none of the Windows machines work as they should (NAT does work cause I
can connect it's just really damn slow).
- Windows FTP'ing to the Gateway via the LAN runs at full speed ... ~
8MB/sec
- If the Modem is connected directly to any of the Windows machines and
Windows handles the Auth for PPPoE, it runs fine as well

Even tho I troubleshooted the network and counted that out anwyays I
downloaded Knoppix Live and ran it on 3 of the windows machines which were
running slow and as soon as it was running under *nix, not a problem at all,
without changing any hardware configuration.

So this all started 2 weeks ago and I'm still no closer to a result. I'm
actually further away cause I'm outta ideas about what to try next.

If anyone has any thoughts / comments / crazy ideas / ideas for what to
sacrifice to which god in order to get this working correctly it would be
GREATLY appreciated. $20 gift voucher to somewhere for whoever gives me the
first response which gets it working!!!

Also, did some more research yesterday and ethereal on the windows machines
shows the following (non technical summary)

1 - send a request
2 - get a reply packet
3 - send an ack of packet being rx'd
4 - wait about 60 seconds
5 - get the same packet back again
6 - send an ack of packet being rx'd

So, thats my story...I'm stumped.

Thanks in advance.

: )

Cheers, Craig

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A> IRC: #linuxsa on irc.freenode.net
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
