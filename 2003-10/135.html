<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: Setting up a gateway" -->
<!-- FromName="'Chris'" -->
<!-- FromEmail="slackjaw77@iprimus.com.au" -->
<!-- ToName="" -->
<!-- ToEmail="brendan@grossman.id.au, linuxsa@linuxsa.org.au" -->
<!-- Date="Sat, 4 Oct 2003 11:18:29 +0000" -->
<!-- Id="20031004111829.3c142eb0.slackjaw77@iprimus.com.au" -->
<!-- Reference="001501c38a14$d1087fc0$0301a8c0@MINERVA" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: Setting up a gateway</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Chris &lt;<I><A HREF="mailto:slackjaw77@iprimus.com.au">slackjaw77@iprimus.com.au</A></I>&gt;
  To  : &lt;<I><A HREF="mailto:brendan@grossman.id.au">brendan@grossman.id.au</A></I>&gt;<BR>        &lt;<I><A HREF="mailto: linuxsa@linuxsa.org.au"> linuxsa@linuxsa.org.au</A></I>&gt;
  Date: Sat, 4 Oct 2003 11:18:29 +0000
</PRE>
<H1>Re: Setting up a gateway</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
On Sat, 4 Oct 2003 10:58:54 +0000
Chris &lt;<A HREF="mailto:slackjaw77@iprimus.com.au">slackjaw77@iprimus.com.au</A>&gt; wrote:

&gt; On Sat, 4 Oct 2003 10:44:10 +0930
&gt; "Brendan" &lt;<A HREF="mailto:brendan@grossman.id.au">brendan@grossman.id.au</A>&gt; wrote:
&gt; 
&gt; &gt; Hey,
&gt; &gt; 
&gt; &gt; I want to setup a gateway today. I want to do it myself though, not
&gt; &gt; use something like Smoothwall etc. I have the gateway box all ready,
&gt; &gt; just installed Debian and configured the NICs etc. The thing that i
&gt; &gt; have never been able to find is just a simple guide to setting up a
&gt; &gt; gateway, without going into firewall settings and all that etc. Well
&gt; &gt; there was on i was reading the other day for 2.2 kernel but it didn't
&gt; &gt; work, even though i followed the steps correctly.
&gt; &gt; 
&gt; &gt; Basically i just want to get internet connectivity through the gateway
&gt; &gt; for other computers on my LAN as fast as possible. I know how to
&gt; &gt; configure the clients, just not the actual gateway. I will read about
&gt; &gt; iptables and all that later, i just need the internet first, as i
&gt; &gt; don't want to spend 3 days reading a book until i get it all going.
&gt; 
&gt; Seems a bit irresponsible but hey...
&gt; 
&gt; &gt; So yeah, just what steps and stuff do i need to get it working. By the
&gt; &gt; way i want to use DHCP.
&gt; 
&gt; echo 1 &gt; /proc/sys/net/ipv4/ip_forward

whoops forgot to add one important thing...

IF1=computers side interface (eth0, eth1 ... etc)
IF2=internet side interface
NET=Network address range (192.168.1.0/24)

iptables -A FORWARD -i $IF1 -o $IF2 -j ACCEPT
iptables -A FORWARD -i $IF2 -o ! $IF2 -j ACCEPT
iptables -I POSTROUTING -t nat -o $IF2 -s $NET -j MASQUERADE
 
&gt; Then point all of your other computers at that machine for their
&gt; default route.  You'll then be able to get out provided you are
&gt; connected as you say in your first paragraph.

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A> IRC: #linuxsa on irc.freenode.net
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
