<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="dead smb connections" -->
<!-- FromName="'Anthony Symons'" -->
<!-- FromEmail="ant@sa.pracom.com.au" -->
<!-- ToName="" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="31 Jan 2002 11:58:36 +1030" -->
<!-- Id="1012440516.22218.307.camel@ant.internal" -->
<!-- Reference="" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: dead smb connections</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Anthony Symons &lt;<I><A HREF="mailto:ant@sa.pracom.com.au">ant@sa.pracom.com.au</A></I>&gt;
  To  : &lt;<I><A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A></I>&gt;
  Date: 31 Jan 2002 11:58:36 +1030
</PRE>
<H1>dead smb connections</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
What are you supposed to do when you have a samba connection to a
windows box, and you are copying files and playing mp3s off of it, then
the windows box dies, and all the samba stuff stops responding? I can
kill xmms, and the processes that were doing the copying, but I get this
sort of stuff:

[<A HREF="mailto:root@ant">root@ant</A> root]# umount -f /mnt/pharrison
umount2: Device or resource busy
umount: //pharrison/music: not found
umount: /mnt/pharrison: Illegal seek
umount2: Device or resource busy
umount: /mnt/pharrison: device is busy

and if I do:

[<A HREF="mailto:root@ant">root@ant</A> root]# lsof |grep pharrison

then it just hangs there for ages presumably waiting for something to
time out. Same if I hit tab in my mnt directory as it trys to stat the
dud share or something like that.

I cant kill the smbfs mount processes either:

[<A HREF="mailto:root@ant">root@ant</A> root]# ps -ax |grep music
 2081 ?        D      0:00 /sbin/mount.smbfs //pharrison/music
/mnt/pharrison -o
 2276 pts/8    S      0:00 grep music

[<A HREF="mailto:root@ant">root@ant</A> root]# kill -9 2081

[<A HREF="mailto:root@ant">root@ant</A> root]# ps -ax |grep music
 2081 ?        D      0:00 /sbin/mount.smbfs //pharrison/music
/mnt/pharrison -o
 2278 pts/8    S      0:00 grep music

So, the windows box died, I dont care about alerting it of my
disconnection or anything, and I dont care what happens to any processes
that are trying to use that share, but how do I get my box fixed so I
can reconnect the share?

Ant


-- 
Systems Administrator       
Pracom Ltd.             
+61 8 82029074 -=- +61 402 100 671 
<A HREF="mailto:anthony.symons@sa.pracom.com.au">anthony.symons@sa.pracom.com.au</A>

PRIVILEGED - PRIVATE AND CONFIDENTIAL
This electronic mail is solely for the use of the addressee and may
contain information which is confidential or privileged.
If you receive this electronic mail in error, please delete it from
your system immediately and notify the sender by electronic mail or
using any of the above contact details.

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
