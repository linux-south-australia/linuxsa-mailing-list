<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="RE: fscked partition" -->
<!-- FromName="'De Fluiter, Desiree'" -->
<!-- FromEmail="dmdeflui@subcorp.com.au" -->
<!-- ToName="" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Fri, 6 Sep 2002 13:34:17 +0930" -->
<!-- Id="477E84FEC58EC44BB5AA084A18BB11B22D895F@snowball.asc.com.au" -->
<!-- Reference="" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: RE: fscked partition</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: De Fluiter, Desiree &lt;<I><A HREF="mailto:dmdeflui@subcorp.com.au">dmdeflui@subcorp.com.au</A></I>&gt;
  To  : &lt;<I><A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A></I>&gt;
  Date: Fri, 6 Sep 2002 13:34:17 +0930
</PRE>
<H1>RE: fscked partition</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
This message is in MIME format. Since your mail reader does not understand
this format, some or all of this message may not be legible.

------_=_NextPart_001_01C2555A.7822A830
Content-Type: text/plain

Adam,

If a partition has gone to 100% full, a check of the directories that are
the most full can be made from an su enabled logon, eg:
		su
		cd /var     (e.g. change to top directory of the partition)
		du -s * | sort -r -n | head -20

This should show you the top 20 directories.

This should help you work out what is the directory with the biggest files.

Dez

-----Original Message-----
From: Adam Smith [mailto:<A HREF="mailto:adam.smith@sageautomation.com">adam.smith@sageautomation.com</A>] 
Sent: Friday, 6 September 2002 1:26 PM
To: <A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A>
Subject: fscked partition


Hello,

I'm having some difficulty with my var partition.  As you can see from
the results below,

Filesystem    Size   Used  Avail Capacity  Mounted on
/dev/ad0s1a    97M    41M    48M    46%    /
/dev/ad0s1f   9.1G   6.0G   2.4G    72%    /usr
/dev/ad0s1e    48M    48M  -3.4M   108%    /var
procfs        4.0K   4.0K     0B   100%    /proc

df reports /var to be full.  It's not.  According to "du," var only
contains 5.5Mb of data.

I can still write to the var partition if I purge my logs, but I am then
inundated with messages in syslog saying var is full, and within several
seconds it fills up again.

I ran a " fsck -f " and got the follwing results for ad0s1e:


234805 files, 6283920 used, 3259482 free (121714 frags, 392221 blocks,
1.3% fragmentation)
** /dev/ad0s1e (NO WRITE)
** Last Mounted on /var
** Phase 1 - Check Blocks and Sizes
** Phase 2 - Check Pathnames
** Phase 3 - Check Connectivity
** Phase 4 - Check Reference Counts
UNREF FILE I=6282  OWNER=root MODE=100644
SIZE=74505 MTIME=Aug 21 00:44 2002
CLEAR? no

UNREF FILE I=6341  OWNER=root MODE=100644
SIZE=50086 MTIME=Sep  4 04:03 2002
CLEAR? no

UNREF FILE I=6415  OWNER=nobody MODE=100644
SIZE=475057 MTIME=Aug 16 22:41 2002
CLEAR? no

UNREF FILE I=6416  OWNER=root MODE=100644
SIZE=24576 MTIME=Aug  1 18:26 2002
CLEAR? no

UNREF FILE I=6417  OWNER=root MODE=100664
SIZE=106449 MTIME=Sep  6 12:17 2002
CLEAR? no

UNREF FILE I=6418  OWNER=root MODE=100664
SIZE=24725 MTIME=Apr  5 00:29 2002
CLEAR? no

UNREF FILE I=6419  OWNER=root MODE=100664
SIZE=24576 MTIME=Apr  5 00:19 2002
CLEAR? no

UNREF FILE I=6420  OWNER=root MODE=100664
SIZE=24616 MTIME=Jul 30 23:35 2002
CLEAR? no

UNREF FILE I=6501  OWNER=root MODE=100644
SIZE=43663222 MTIME=Sep  6 13:10 2002
CLEAR? no

** Phase 5 - Check Cyl groups
596 files, 49120 used, 463 free (463 frags, 0 blocks, 0.9%
fragmentation)




But I am unclear as to what exactly this means, or what I need to do to
go about fixing the problem.  All those "no" responses were
automatically generated.




Adam Smith
Information Technology Officer
SAGE Automation Ltd

<A HREF="mailto:adam.smith@sageautomation.com">adam.smith@sageautomation.com</A>
<A HREF="http://www.sageautomation.com">http://www.sageautomation.com</A>

Phone:   (08) 8276 0703
Fax:     (08) 8276 0799
Mobile:  0414 895 273


-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject


------_=_NextPart_001_01C2555A.7822A830
Content-Type: text/html
Content-Transfer-Encoding: quoted-printable

&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN"&gt;
&lt;HTML&gt;
&lt;HEAD&gt;
&lt;META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; =
charset=3Dus-ascii"&gt;
&lt;META NAME=3D"Generator" CONTENT=3D"MS Exchange Server version =
5.5.2653.12"&gt;
&lt;TITLE&gt;RE: fscked partition&lt;/TITLE&gt;
&lt;/HEAD&gt;
&lt;BODY&gt;

&lt;P&gt;&lt;FONT SIZE=3D2&gt;Adam,&lt;/FONT&gt;
&lt;/P&gt;

&lt;P&gt;&lt;FONT SIZE=3D2&gt;If a partition has gone to 100% full, a check of the =
directories that are the most full can be made from an su enabled =
logon, eg:&lt;/FONT&gt;&lt;/P&gt;

&lt;P&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;FONT SIZE=3D2&gt;su&lt;/FONT&gt;
&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;FONT SIZE=3D2&gt;cd =
/var&nbsp;&nbsp;&nbsp;&nbsp; (e.g. change to top directory of the =
partition)&lt;/FONT&gt;
&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;FONT SIZE=3D2&gt;du -s * | =
sort -r -n | head -20&lt;/FONT&gt;
&lt;/P&gt;

&lt;P&gt;&lt;FONT SIZE=3D2&gt;This should show you the top 20 directories.&lt;/FONT&gt;
&lt;/P&gt;

&lt;P&gt;&lt;FONT SIZE=3D2&gt;This should help you work out what is the directory =
with the biggest files.&lt;/FONT&gt;
&lt;/P&gt;

&lt;P&gt;&lt;FONT SIZE=3D2&gt;Dez&lt;/FONT&gt;
&lt;/P&gt;

&lt;P&gt;&lt;FONT SIZE=3D2&gt;-----Original Message-----&lt;/FONT&gt;
&lt;BR&gt;&lt;FONT SIZE=3D2&gt;From: Adam Smith [&lt;A =
HREF=3D"mailto:<A HREF="mailto:adam.smith@sageautomation.com">adam.smith@sageautomation.com</A>"&gt;mailto:<A HREF="mailto:adam.smith@sageauto">adam.smith@sageauto</A>=
mation.com&lt;/A&gt;] &lt;/FONT&gt;
&lt;BR&gt;&lt;FONT SIZE=3D2&gt;Sent: Friday, 6 September 2002 1:26 PM&lt;/FONT&gt;
&lt;BR&gt;&lt;FONT SIZE=3D2&gt;To: <A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A>&lt;/FONT&gt;
&lt;BR&gt;&lt;FONT SIZE=3D2&gt;Subject: fscked partition&lt;/FONT&gt;
&lt;/P&gt;
&lt;BR&gt;

&lt;P&gt;&lt;FONT SIZE=3D2&gt;Hello,&lt;/FONT&gt;
&lt;/P&gt;

&lt;P&gt;&lt;FONT SIZE=3D2&gt;I'm having some difficulty with my var =
partition.&nbsp; As you can see from&lt;/FONT&gt;
&lt;BR&gt;&lt;FONT SIZE=3D2&gt;the results below,&lt;/FONT&gt;
&lt;/P&gt;

&lt;P&gt;&lt;FONT SIZE=3D2&gt;Filesystem&nbsp;&nbsp;&nbsp; Size&nbsp;&nbsp; =
Used&nbsp; Avail Capacity&nbsp; Mounted on&lt;/FONT&gt;
&lt;BR&gt;&lt;FONT SIZE=3D2&gt;/dev/ad0s1a&nbsp;&nbsp;&nbsp; 97M&nbsp;&nbsp;&nbsp; =
41M&nbsp;&nbsp;&nbsp; 48M&nbsp;&nbsp;&nbsp; 46%&nbsp;&nbsp;&nbsp; =
/&lt;/FONT&gt;
&lt;BR&gt;&lt;FONT SIZE=3D2&gt;/dev/ad0s1f&nbsp;&nbsp; 9.1G&nbsp;&nbsp; =
6.0G&nbsp;&nbsp; 2.4G&nbsp;&nbsp;&nbsp; 72%&nbsp;&nbsp;&nbsp; =
/usr&lt;/FONT&gt;
&lt;BR&gt;&lt;FONT SIZE=3D2&gt;/dev/ad0s1e&nbsp;&nbsp;&nbsp; 48M&nbsp;&nbsp;&nbsp; =
48M&nbsp; -3.4M&nbsp;&nbsp; 108%&nbsp;&nbsp;&nbsp; /var&lt;/FONT&gt;
&lt;BR&gt;&lt;FONT SIZE=3D2&gt;procfs&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
4.0K&nbsp;&nbsp; 4.0K&nbsp;&nbsp;&nbsp;&nbsp; 0B&nbsp;&nbsp; =
100%&nbsp;&nbsp;&nbsp; /proc&lt;/FONT&gt;
&lt;/P&gt;

&lt;P&gt;&lt;FONT SIZE=3D2&gt;df reports /var to be full.&nbsp; It's not.&nbsp; =
According to &quot;du,&quot; var only&lt;/FONT&gt;
&lt;BR&gt;&lt;FONT SIZE=3D2&gt;contains 5.5Mb of data.&lt;/FONT&gt;
&lt;/P&gt;

&lt;P&gt;&lt;FONT SIZE=3D2&gt;I can still write to the var partition if I purge my =
logs, but I am then&lt;/FONT&gt;
&lt;BR&gt;&lt;FONT SIZE=3D2&gt;inundated with messages in syslog saying var is =
full, and within several&lt;/FONT&gt;
&lt;BR&gt;&lt;FONT SIZE=3D2&gt;seconds it fills up again.&lt;/FONT&gt;
&lt;/P&gt;

&lt;P&gt;&lt;FONT SIZE=3D2&gt;I ran a &quot; fsck -f &quot; and got the follwing =
results for ad0s1e:&lt;/FONT&gt;
&lt;/P&gt;
&lt;BR&gt;

&lt;P&gt;&lt;FONT SIZE=3D2&gt;234805 files, 6283920 used, 3259482 free (121714 =
frags, 392221 blocks,&lt;/FONT&gt;
&lt;BR&gt;&lt;FONT SIZE=3D2&gt;1.3% fragmentation)&lt;/FONT&gt;
&lt;BR&gt;&lt;FONT SIZE=3D2&gt;** /dev/ad0s1e (NO WRITE)&lt;/FONT&gt;
&lt;BR&gt;&lt;FONT SIZE=3D2&gt;** Last Mounted on /var&lt;/FONT&gt;
&lt;BR&gt;&lt;FONT SIZE=3D2&gt;** Phase 1 - Check Blocks and Sizes&lt;/FONT&gt;
&lt;BR&gt;&lt;FONT SIZE=3D2&gt;** Phase 2 - Check Pathnames&lt;/FONT&gt;
&lt;BR&gt;&lt;FONT SIZE=3D2&gt;** Phase 3 - Check Connectivity&lt;/FONT&gt;
&lt;BR&gt;&lt;FONT SIZE=3D2&gt;** Phase 4 - Check Reference Counts&lt;/FONT&gt;
&lt;BR&gt;&lt;FONT SIZE=3D2&gt;UNREF FILE I=3D6282&nbsp; OWNER=3Droot =
MODE=3D100644&lt;/FONT&gt;
&lt;BR&gt;&lt;FONT SIZE=3D2&gt;SIZE=3D74505 MTIME=3DAug 21 00:44 2002&lt;/FONT&gt;
&lt;BR&gt;&lt;FONT SIZE=3D2&gt;CLEAR? no&lt;/FONT&gt;
&lt;/P&gt;

&lt;P&gt;&lt;FONT SIZE=3D2&gt;UNREF FILE I=3D6341&nbsp; OWNER=3Droot =
MODE=3D100644&lt;/FONT&gt;
&lt;BR&gt;&lt;FONT SIZE=3D2&gt;SIZE=3D50086 MTIME=3DSep&nbsp; 4 04:03 2002&lt;/FONT&gt;
&lt;BR&gt;&lt;FONT SIZE=3D2&gt;CLEAR? no&lt;/FONT&gt;
&lt;/P&gt;

&lt;P&gt;&lt;FONT SIZE=3D2&gt;UNREF FILE I=3D6415&nbsp; OWNER=3Dnobody =
MODE=3D100644&lt;/FONT&gt;
&lt;BR&gt;&lt;FONT SIZE=3D2&gt;SIZE=3D475057 MTIME=3DAug 16 22:41 2002&lt;/FONT&gt;
&lt;BR&gt;&lt;FONT SIZE=3D2&gt;CLEAR? no&lt;/FONT&gt;
&lt;/P&gt;

&lt;P&gt;&lt;FONT SIZE=3D2&gt;UNREF FILE I=3D6416&nbsp; OWNER=3Droot =
MODE=3D100644&lt;/FONT&gt;
&lt;BR&gt;&lt;FONT SIZE=3D2&gt;SIZE=3D24576 MTIME=3DAug&nbsp; 1 18:26 2002&lt;/FONT&gt;
&lt;BR&gt;&lt;FONT SIZE=3D2&gt;CLEAR? no&lt;/FONT&gt;
&lt;/P&gt;

&lt;P&gt;&lt;FONT SIZE=3D2&gt;UNREF FILE I=3D6417&nbsp; OWNER=3Droot =
MODE=3D100664&lt;/FONT&gt;
&lt;BR&gt;&lt;FONT SIZE=3D2&gt;SIZE=3D106449 MTIME=3DSep&nbsp; 6 12:17 2002&lt;/FONT&gt;
&lt;BR&gt;&lt;FONT SIZE=3D2&gt;CLEAR? no&lt;/FONT&gt;
&lt;/P&gt;

&lt;P&gt;&lt;FONT SIZE=3D2&gt;UNREF FILE I=3D6418&nbsp; OWNER=3Droot =
MODE=3D100664&lt;/FONT&gt;
&lt;BR&gt;&lt;FONT SIZE=3D2&gt;SIZE=3D24725 MTIME=3DApr&nbsp; 5 00:29 2002&lt;/FONT&gt;
&lt;BR&gt;&lt;FONT SIZE=3D2&gt;CLEAR? no&lt;/FONT&gt;
&lt;/P&gt;

&lt;P&gt;&lt;FONT SIZE=3D2&gt;UNREF FILE I=3D6419&nbsp; OWNER=3Droot =
MODE=3D100664&lt;/FONT&gt;
&lt;BR&gt;&lt;FONT SIZE=3D2&gt;SIZE=3D24576 MTIME=3DApr&nbsp; 5 00:19 2002&lt;/FONT&gt;
&lt;BR&gt;&lt;FONT SIZE=3D2&gt;CLEAR? no&lt;/FONT&gt;
&lt;/P&gt;

&lt;P&gt;&lt;FONT SIZE=3D2&gt;UNREF FILE I=3D6420&nbsp; OWNER=3Droot =
MODE=3D100664&lt;/FONT&gt;
&lt;BR&gt;&lt;FONT SIZE=3D2&gt;SIZE=3D24616 MTIME=3DJul 30 23:35 2002&lt;/FONT&gt;
&lt;BR&gt;&lt;FONT SIZE=3D2&gt;CLEAR? no&lt;/FONT&gt;
&lt;/P&gt;

&lt;P&gt;&lt;FONT SIZE=3D2&gt;UNREF FILE I=3D6501&nbsp; OWNER=3Droot =
MODE=3D100644&lt;/FONT&gt;
&lt;BR&gt;&lt;FONT SIZE=3D2&gt;SIZE=3D43663222 MTIME=3DSep&nbsp; 6 13:10 =
2002&lt;/FONT&gt;
&lt;BR&gt;&lt;FONT SIZE=3D2&gt;CLEAR? no&lt;/FONT&gt;
&lt;/P&gt;

&lt;P&gt;&lt;FONT SIZE=3D2&gt;** Phase 5 - Check Cyl groups&lt;/FONT&gt;
&lt;BR&gt;&lt;FONT SIZE=3D2&gt;596 files, 49120 used, 463 free (463 frags, 0 =
blocks, 0.9%&lt;/FONT&gt;
&lt;BR&gt;&lt;FONT SIZE=3D2&gt;fragmentation)&lt;/FONT&gt;
&lt;/P&gt;
&lt;BR&gt;
&lt;BR&gt;
&lt;BR&gt;

&lt;P&gt;&lt;FONT SIZE=3D2&gt;But I am unclear as to what exactly this means, or =
what I need to do to&lt;/FONT&gt;
&lt;BR&gt;&lt;FONT SIZE=3D2&gt;go about fixing the problem.&nbsp; All those =
&quot;no&quot; responses were&lt;/FONT&gt;
&lt;BR&gt;&lt;FONT SIZE=3D2&gt;automatically generated.&lt;/FONT&gt;
&lt;/P&gt;
&lt;BR&gt;
&lt;BR&gt;
&lt;BR&gt;

&lt;P&gt;&lt;FONT SIZE=3D2&gt;Adam Smith&lt;/FONT&gt;
&lt;BR&gt;&lt;FONT SIZE=3D2&gt;Information Technology Officer&lt;/FONT&gt;
&lt;BR&gt;&lt;FONT SIZE=3D2&gt;SAGE Automation Ltd&lt;/FONT&gt;
&lt;/P&gt;

&lt;P&gt;&lt;FONT SIZE=3D2&gt;<A HREF="mailto:adam.smith@sageautomation.com">adam.smith@sageautomation.com</A>&lt;/FONT&gt;
&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&lt;A HREF=3D"<A HREF="http://www.sageautomation.com">http://www.sageautomation.com</A>" =
TARGET=3D"_blank"&gt;<A HREF="http://www.sageautomation.com&lt">http://www.sageautomation.com&lt</A>;/A&gt;&lt;/FONT&gt;
&lt;/P&gt;

&lt;P&gt;&lt;FONT SIZE=3D2&gt;Phone:&nbsp;&nbsp; (08) 8276 0703&lt;/FONT&gt;
&lt;BR&gt;&lt;FONT SIZE=3D2&gt;Fax:&nbsp;&nbsp;&nbsp;&nbsp; (08) 8276 0799&lt;/FONT&gt;
&lt;BR&gt;&lt;FONT SIZE=3D2&gt;Mobile:&nbsp; 0414 895 273&lt;/FONT&gt;
&lt;/P&gt;
&lt;BR&gt;

&lt;P&gt;&lt;FONT SIZE=3D2&gt;-- &lt;/FONT&gt;
&lt;BR&gt;&lt;FONT SIZE=3D2&gt;LinuxSA WWW: &lt;A HREF=3D"<A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>" =
TARGET=3D"_blank"&gt;<A HREF="http://www.linuxsa.org.au/&lt">http://www.linuxsa.org.au/&lt</A>;/A&gt;&nbsp; IRC: #linuxsa on =
irc.linux.org.au&lt;/FONT&gt;
&lt;BR&gt;&lt;FONT SIZE=3D2&gt;To unsubscribe from the LinuxSA list:&lt;/FONT&gt;
&lt;BR&gt;&lt;FONT SIZE=3D2&gt;&nbsp; mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with =
&quot;unsubscribe&quot; as the subject&lt;/FONT&gt;
&lt;/P&gt;

&lt;/BODY&gt;
&lt;/HTML&gt;
------_=_NextPart_001_01C2555A.7822A830--

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
