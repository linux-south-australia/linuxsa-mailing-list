<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="RE: Caching Name Server Config" -->
<!-- FromName="'Jim O'Halloran'" -->
<!-- FromEmail="jim@kendle.com.au" -->
<!-- ToName="'nik [tm]'" -->
<!-- ToEmail="tmcruisin@sond.com.au" -->
<!-- Date="Fri, 20 Sep 2002 05:36:16 +0930" -->
<!-- Id="C16C7A51BA30D51187EE0000E8D8C9972F88B7@int-gw.kendle.com.au" -->
<!-- Reference="" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: RE: Caching Name Server Config</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Jim O &lt;<I><A HREF="mailto:jim@kendle.com.au">jim@kendle.com.au</A></I>&gt;
  To  : nik [tm] &lt;<I><A HREF="mailto:tmcruisin@sond.com.au">tmcruisin@sond.com.au</A></I>&gt;
  Date: Fri, 20 Sep 2002 05:36:16 +0930
</PRE>
<H1>RE: Caching Name Server Config</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
nik [tm] wrote:
&gt;Jim O'Halloran wrote:
&gt;
&gt;&gt; ... I get the same error if I do the same thing with 127.0.0.1 as well.
I'm
&gt;&gt; stumped, does anyone have any suggestions as to what I've done wrong?
&gt;&gt; 

&gt;&lt;dont know, only a suggestion&gt;
&gt;	// query-source address * port 53;
&gt;
&gt;does this mean uncomment this if rockhopper is a firewall?
&gt;
&gt;&lt;/dont know, only a suggestion&gt;

Hmmm, I thought this would sets both the source port and the destination
port to 53 on outbound packets...  My iptables on rockhopper (the firewall)
for snares (the new name server) are as follows...

[<A HREF="mailto:root@rockhopper">root@rockhopper</A> /root]# iptables -L snares
Chain snares (2 references)
target     prot opt source               destination
ACCEPT     tcp  --  203.38.230.12        anywhere           tcp dpt:http
ACCEPT     tcp  --  anywhere             203.38.230.12      tcp spt:http
ACCEPT     tcp  --  anywhere             anywhere           tcp spt:domain
ACCEPT     tcp  --  anywhere             anywhere           tcp dpt:domain
ACCEPT     udp  --  anywhere             anywhere           udp dpt:domain
ACCEPT     udp  --  anywhere             anywhere           udp spt:domain
LOG        all  --  anywhere             anywhere           LOG level
warning prefix `snares'

Which should allow all DNS traffic through regardless of direction and log
it if any packets are dropped by the chains (nothing is being logged).
These rules work well for another machine I have which doesn't have that
line uncommented in the named.conf, so I don't think its necessary in this
case.  I might try it  later and see what happens.

It would appear though that the named itself on snares is rejecting
connections though, because I can't even telnet port 53 on that machine.

&gt;&gt; Failure is not an option....
&gt;&gt;        ... its included with all Microsoft products.
&gt;
&gt;do you sell microsoft products at Kendle?

Yes :(

&gt;they might'n like the signature..
&gt;non-the-less, I do :)

Its only used for internal stuff, a few selected clients (who're well aware
of my bias anyway) and "friendly" mailing lists like LinuxSA :)  Its part of
my campaign to have every machine in my office running Linux within 12
months :)

Jim.

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
