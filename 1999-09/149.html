<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: Optimising the kernel" -->
<!-- FromName="David Lloyd" -->
<!-- FromEmail="lloy0076@senet.com.au" -->
<!-- ToName="Mark Williams" -->
<!-- ToEmail="hirm@chariot.net.au" -->
<!-- Date="Tue, 07 Sep 1999 00:25:55 +0930" -->
<!-- Id="37D3D5FB.A8A8CBF3@senet.com.au" -->
<!-- Reference="Pine.SOL.4.05.9909062024050.17951-100000@lux.levels.unisa.edu.au" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: Optimising the kernel</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: David Lloyd &lt;<I><A HREF="mailto:lloy0076@senet.com.au">lloy0076@senet.com.au</A></I>&gt;
  To  : Mark Williams &lt;<I><A HREF="mailto:hirm@chariot.net.au">hirm@chariot.net.au</A></I>&gt;
  Date: Tue, 07 Sep 1999 00:25:55 +0930
</PRE>
<H1>Re: Optimising the kernel</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
ALL

&gt; Anything abve this can create major problems (like corrupting your
&gt; partitions).

I currently run on a highly souped up kernel which has been
significantly stable for approximately 2 months now. In fact it was I
who posted the advice in the first place. It is contained underneath.
 

&gt; Using PGCC will optimise your kernel more than changing GCC's optimisation
&gt; level and will be a LOT safer.

It will be safer for your computer but I agree with you. It is a pain to
set up. A *major* pain. I gave up in disgust because my computer was
starting to become an endangered species :-)

The steps are like this:

1) Chuck ANYTHING out that you don't think you need and be totally
ruthless. Kernel's are so easy to rebuild that if you do forget
something then it normally doesn't matter.
  i) it's wise to study ALL the menuconfig help selections. 

2) Make as much modular as you possibly can. Make the internal kernel as
lean as you can.

3) Edit the Makefiles thusly:
  i) consult info gcc (or pgcc) and decide what optimisations you want
  ii) in the Makefile under /usr/src change the TWO cflags sections.
Mine read:

  -ffast-math -ffast-address -funroll-loops -fomit-framepointer
-fstrict-aliasing -O5

  iii) in the Makefile under /usr/src/arch/i386 edit the Makefile to say
-march=pentium OR the appropriate -march option. Whatever you do, make
sure you get it right....pentiumpros are pentiumpros, 686 IIs are
pentium pros, 686s and AMDK6-IIs are pentiums, 486's are 486's and 386's
are 386's. 

4) Do your normal make process. Reboot and cross your fingers.


DAVID L.

-- 
<A HREF="http://users.senet.com.au/~lloy0076/index.html">http://users.senet.com.au/~lloy0076/index.html</A> (personal home page)
Subscribe to the linux c programming list: 
    <A HREF="mailto:linuxCprogramming-subscribe">mailto:linuxCprogramming-subscribe</A>@listbot.com
    <A HREF="http://users.senet.com.au/~lloy0076/linux_c_programming/index.html">http://users.senet.com.au/~lloy0076/linux_c_programming/index.html</A>

-- 
Check out the LinuxSA web pages at <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
