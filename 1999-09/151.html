<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: Optimising the kernel" -->
<!-- FromName="Mark Williams" -->
<!-- FromEmail="hirm@chariot.net.au" -->
<!-- ToName="David Lloyd" -->
<!-- ToEmail="lloy0076@senet.com.au" -->
<!-- Date="Tue, 7 Sep 1999 02:04:26 +0930" -->
<!-- Id="002001bef885$afe8a1f0$0201a8c0@COOL" -->
<!-- Reference="Pine.SOL.4.05.9909062024050.17951-100000@lux.levels.unisa.edu.au" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: Optimising the kernel</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Mark Williams &lt;<I><A HREF="mailto:hirm@chariot.net.au">hirm@chariot.net.au</A></I>&gt;
  To  : David Lloyd &lt;<I><A HREF="mailto:lloy0076@senet.com.au">lloy0076@senet.com.au</A></I>&gt;
  Date: Tue, 7 Sep 1999 02:04:26 +0930
</PRE>
<H1>Re: Optimising the kernel</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
HI....

Using GCC -O5 definatly ISNT a good idea.

Fine.... it might work "okay" for you, but that doesnt say how well it will
work for others.
Ive heard of people having thier HDDs corrupted with a optimisation level of
4.

If you want reliablity (which if you have forgotten is what linux is all
about), then PGCC is the only way to go.
PGCC by default (as in no excessive optimisation levels) will do a much
better job than GCC at a high optimisation level ever will do.
The main reason for this is beacuse PGCC greatly optimises the way in which
the code is structured to maximise the amount of L1 and L2 cache hits. GCC
does this too, but not to such an extent as PGCC.

PGCC is the way to go if you want to really optimise your kernel.

GCC -O3 or above is just too risky (if it wasnt, dont you think higher
levels would be used by default??).

MWP


&gt; ALL
&gt;
&gt; &gt; Anything abve this can create major problems (like corrupting your
&gt; &gt; partitions).
&gt;
&gt; I currently run on a highly souped up kernel which has been
&gt; significantly stable for approximately 2 months now. In fact it was I
&gt; who posted the advice in the first place. It is contained underneath.
&gt;
&gt;
&gt; &gt; Using PGCC will optimise your kernel more than changing GCC's
optimisation
&gt; &gt; level and will be a LOT safer.
&gt;
&gt; It will be safer for your computer but I agree with you. It is a pain to
&gt; set up. A *major* pain. I gave up in disgust because my computer was
&gt; starting to become an endangered species :-)
&gt;
&gt; The steps are like this:
&gt;
&gt; 1) Chuck ANYTHING out that you don't think you need and be totally
&gt; ruthless. Kernel's are so easy to rebuild that if you do forget
&gt; something then it normally doesn't matter.
&gt;   i) it's wise to study ALL the menuconfig help selections.
&gt;
&gt; 2) Make as much modular as you possibly can. Make the internal kernel as
&gt; lean as you can.
&gt;
&gt; 3) Edit the Makefiles thusly:
&gt;   i) consult info gcc (or pgcc) and decide what optimisations you want
&gt;   ii) in the Makefile under /usr/src change the TWO cflags sections.
&gt; Mine read:
&gt;
&gt;   -ffast-math -ffast-address -funroll-loops -fomit-framepointer
&gt; -fstrict-aliasing -O5
&gt;
&gt;   iii) in the Makefile under /usr/src/arch/i386 edit the Makefile to say
&gt; -march=pentium OR the appropriate -march option. Whatever you do, make
&gt; sure you get it right....pentiumpros are pentiumpros, 686 IIs are
&gt; pentium pros, 686s and AMDK6-IIs are pentiums, 486's are 486's and 386's
&gt; are 386's.
&gt;
&gt; 4) Do your normal make process. Reboot and cross your fingers.
&gt;
&gt;
&gt; DAVID L.
&gt;
&gt; --
&gt; <A HREF="http://users.senet.com.au/~lloy0076/index.html">http://users.senet.com.au/~lloy0076/index.html</A> (personal home page)
&gt; Subscribe to the linux c programming list:
&gt;     <A HREF="mailto:linuxCprogramming-subscribe">mailto:linuxCprogramming-subscribe</A>@listbot.com
&gt;     <A HREF="http://users.senet.com.au/~lloy0076/linux_c_programming/index.html">http://users.senet.com.au/~lloy0076/linux_c_programming/index.html</A>
&gt;

-- 
Check out the LinuxSA web pages at <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
