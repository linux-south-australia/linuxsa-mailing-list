<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: Frustrating samba locking" -->
<!-- FromName="'Brad Wilson'" -->
<!-- FromEmail="brad.wilson@mnetcorporation.com" -->
<!-- ToName="'Kirsty Rae'" -->
<!-- ToEmail="junkie@rae.cx" -->
<!-- Date="Tue, 09 Dec 2003 18:14:34 +1030" -->
<!-- Id="1070955873.11845.12.camel@localhost.localdomain" -->
<!-- Reference="Pine.LNX.4.44.0312091818030.10897-100000@cairo.rae.cx" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: Frustrating samba locking</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Brad Wilson &lt;<I><A HREF="mailto:brad.wilson@mnetcorporation.com">brad.wilson@mnetcorporation.com</A></I>&gt;
  To  : Kirsty Rae &lt;<I><A HREF="mailto:junkie@rae.cx">junkie@rae.cx</A></I>&gt;
  Date: Tue, 09 Dec 2003 18:14:34 +1030
</PRE>
<H1>Re: Frustrating samba locking</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Unfortunately, no solution from me, although I'd like to throw in that
I've had similar problems with file locking in Samba.  My environment is
pretty simple, the Samba is serving directly from the filesystem (not
from NFS shares).  Version is 2.6.something.  In my case, it only occurs
with word documents (most of the time with the word temp files which
word creates to say to everyone "this document is being worked on").  

The problem is intermittent, but seems to be worse if the network
connection is interrupted briefly.  This makes  it difficult for users
on wireless cards, since they have a habit of dissappearing off the
network for short moments.  It appears that when this happens, a new
process of smbd is sporned on the server for the user in question,
making me think that the original process somehow turns into a zombie
for some amount of time, retaining the lock on the files that were being
accessed at the time.

- Brad.

On Tue, 2003-12-09 at 18:01, Kirsty Rae wrote:
&gt; Hi all,
&gt; 
&gt; I have an exceptionally frustrating problem with some file locking that 
&gt; I've been banging my head against for a while and just can't quite figure 
&gt; out.
&gt; 
&gt; Firstly, let me explain the actual setup...
&gt; 
&gt; We have a big raid in our computer room used to store a number of home 
&gt; directories.  This raid is served by a Legato Automated Availability 
&gt; Manager Cluster on Solaris and the shares are served via NFS to the samba 
&gt; server (which is a Red Hat 9 install).  Then, our users access their home 
&gt; directories from (generally) Windows XP and their favourite apps).
&gt; 
&gt; To be completely honest, I'm not 100% certain where the locking is 
&gt; happening, but every once in a while, an Adobe product file will get 
&gt; locked and the user will need to rename the file to save it.  They can't 
&gt; delete the original file and obviously this can get really annoying for 
&gt; the poor user that has just spent half an hour working on it.  When they 
&gt; look at the properties for the file from Windows, it's "Read Only", but 
&gt; they can't change it to not being "Read Only".
&gt; 
&gt; Next up, I don't understand what the difference is between Adobe files and 
&gt; other types of binary files when it comes to file locking.  But, I have 
&gt; certainly narrowed it down to a problem with the Adobe file formats, .psd 
&gt; and .ai .  
&gt; 
&gt; If anyone has any suggestions on where to look to diagnose this problem I 
&gt; would really appreciate it.  If you need more information, I'll do my best 
&gt; to get it to you.  If you have enough information to recommend possible 
&gt; fixes, well even better.
&gt; 
&gt; TIA
&gt; 
&gt; -- 
&gt; Kirsty Rae &lt;<A HREF="mailto:junkie@rae.cx">junkie@rae.cx</A>&gt;
Brad Wilson 
Wireless Applications Manager

m.Net Corporation 
Level 13, 99 Gawler Place 
Adelaide SA 5000, Australia 
Tel: +61 8 8210 2029 
Fax: +61 8 8211 9620 
Mobile: 0418 848 275 
mailto:<A HREF="mailto:brad.wilson@mnetcorporation.com">brad.wilson@mnetcorporation.com</A>
<A HREF="http://www.mnetcorporation.com">http://www.mnetcorporation.com</A>
<A HREF="http://www.gallery4.com">http://www.gallery4.com</A>

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A> IRC: #linuxsa on irc.freenode.net
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
