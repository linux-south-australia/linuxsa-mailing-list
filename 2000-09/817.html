<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: Curious results with Linux 2.2.14 and 100Mb/s Ethernet" -->
<!-- FromName="Alan Kennington" -->
<!-- FromEmail="akenning@dog.topology.org" -->
<!-- ToName="Richard Sharpe" -->
<!-- ToEmail="sharpe@ns.aus.com" -->
<!-- Date="Mon, 18 Sep 2000 19:31:42 +0930" -->
<!-- Id="20000918193142.A17688@dog.topology.org" -->
<!-- Reference="3.0.6.32.20000918183544.00a54960@203.16.214.248" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: Curious results with Linux 2.2.14 and 100Mb/s Ethernet</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Alan Kennington &lt;<I><A HREF="mailto:akenning@dog.topology.org">akenning@dog.topology.org</A></I>&gt;
  To  : Richard Sharpe &lt;<I><A HREF="mailto:sharpe@ns.aus.com">sharpe@ns.aus.com</A></I>&gt;
  Date: Mon, 18 Sep 2000 19:31:42 +0930
</PRE>
<H1>Re: Curious results with Linux 2.2.14 and 100Mb/s Ethernet</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
On Mon, Sep 18, 2000 at 06:35:44PM +0900, Richard Sharpe wrote:
&gt; 
&gt; They have a DLINK 10/100 fdx (DEC 21140-based) and 3Com 3c59X 10/100 FDX
&gt; card in them with a cross-over cable between them.
&gt; 
&gt; Using FTP, I get about 1.8MB/s out of this combination on a 500 MB file.
&gt; CPU utilization on the serving machine hits 65% at times, with most of that
&gt; in the system. The client never gets above about 35% utilized.

Richard,

Maybe you're being affected by the infamous delay x bandwidth problem
in TCP.
Do you find the same performance with rcp?
Of course, you should use "scp" instead.
(Use nothing less secure than triple-DES on a cross-over cable,  
I always say.)

If you are delay x BW limited then the dealy would be

delay = (window size) / bandwidth
      = 32 kBytes / (14 Mbits/sec)
      = 18 msec.

So if you have any sort of average 18 msec delay in the total loop,
this would explain it.
Maybe it's some sort of processing time thing, or interrrupts by
the disk drive.
If you could copy from RAM disk, this would eliminate disk overhead
as a cause.

&gt; Looking at the packet to packet times on the wire with Ethereal, there are
&gt; enormous delays at times, like up to 10mS between an ACK and the next TCP
&gt; segment from the server, at other times 6mS or 3mS is not unusual, while at
&gt; other times micro seconds are the differences.

That's getting into the right sort of delay range.

Can you somehow manually change the window size for FTP?
Or on the command line or something?
It's a setsockopt option or something.
Another test possibility would be to do simple
TCP test program to test program tests.
If a simple server/client pair gets the same result, then
probably it's a TCP layer problem, because then you've
eliminated disk access as a cause.
In a test program, you could change the sock option for
TX window and see if that's the problem.

Cheers,
Alan Kennington.

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
