<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="`who` listing from ppp connections" -->
<!-- FromName="Darryl Ross" -->
<!-- FromEmail="dross@syc.asn.au" -->
<!-- ToName="" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Sun, 10 Sep 2000 11:08:49 +0930" -->
<!-- Id="002d01c01ac7$df3ced20$0264a8c0@wulfz.com" -->
<!-- Reference="" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: `who` listing from ppp connections</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Darryl Ross &lt;<I><A HREF="mailto:dross@syc.asn.au">dross@syc.asn.au</A></I>&gt;
  To  : <A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A>
  Date: Sun, 10 Sep 2000 11:08:49 +0930
</PRE>
<H1>`who` listing from ppp connections</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Hey All,

I'm trying to get users who connect to my Mandrake 7.0 system using ppp
(mgetty + autoppp) to show up in the `who` listing. Reading the man page for
pppd, it seems to me that the 'login' option should do this, but it doesn't
seem to be?

man pppd:
       login  Use the system password database for authenticating
              the peer using PAP, and record the user in the system
              wtmp  file.   Note  that the peer must have an
              entry in the /etc/ppp/pap-secrets file as  well  as
              the  system password database to be allowed access.

I thought that `who` used the wtmp file for its listing? Essential files are
set up as follows:

/etc/mgetty+sendfax/login.conf
============================================
/AutoPPP/    -     -     /usr/sbin/pppd file /etc/ppp/options.server
============================================

/etc/ppp/options.server
============================================
-detach
asyncmap 0
modem
crtscts
lock
require-pap
refuse-chap
login
proxyarp
ms-dns 192.168.20.2
============================================

/etc/options.ttyS0
============================================
dial-in:ppp01
============================================
(all the options.ttySx files are the same except the pppXX)

The users calling in do have an entry in /etc/ppp/pap-secrets and also an
entry in /etc/passwd, with the usernames and passwords being the same. I
know that pppd is getting the usernames correct, as 1) they don't get a
password error, and 2) I have my /etc/ppp/ip-up.local file setting up
additional routing, which depends on the username, ie, the value of
$PEERNAME (some of the users dialling in are gateway servers for our
different offices).

Anyone got any idea what I might have overlooked? Or what I'll have to patch
if that's the problem.

System is a P133 with Mandrake 7.0 and ppp-2.3.10-5mdk installed. We are
using an 8 port PCCom serial card for the modem lines, as well as the 2
onboard ports.

Darryl

--

Darryl Ross
Network and Systems Administrator
Service to Youth Council, Inc
<A HREF="mailto:dross@syc.asn.au">dross@syc.asn.au</A>
<A HREF="http://www.syc.asn.au/">http://www.syc.asn.au/</A>


-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
