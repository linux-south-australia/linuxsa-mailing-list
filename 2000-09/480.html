<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="RE: ipfwadm commands for FTP data connections" -->
<!-- FromName="John Davey" -->
<!-- FromEmail="john@davey.netyp.com" -->
<!-- ToName="" -->
<!-- ToEmail="akenning@dog.topology.org" -->
<!-- Date="Tue, 12 Sep 2000 09:46:59 +0930" -->
<!-- Id="006101c01c4e$c463b730$02001eac@davey.netyp.com" -->
<!-- Reference="20000911145739.A29845@dog.topology.org" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: RE: ipfwadm commands for FTP data connections</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: John Davey &lt;<I><A HREF="mailto:john@davey.netyp.com">john@davey.netyp.com</A></I>&gt;
  To  : <A HREF="mailto:akenning@dog.topology.org">akenning@dog.topology.org</A>
  Date: Tue, 12 Sep 2000 09:46:59 +0930
</PRE>
<H1>RE: ipfwadm commands for FTP data connections</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Hi Alex,

Use Passive FTP. This is the reason Passive FTP was developed and its been
around long enough that nearly all FTP servers support it.

You can read all about it in the RFCs on FTP. (Please do not ask me which
one.)

Then block all TCP SYNs above 1024

John Davey


&gt; -----Original Message-----
&gt; From: Alan Kennington [<A HREF="mailto:akenning">mailto:akenning</A>@dog.topology.org]
&gt; Sent: Monday, 11 September 2000 2:58 pm
&gt; To: Mark Newton
&gt; Cc: Alan Kennington; LinuxSA
&gt; Subject: Re: ipfwadm commands for FTP data connections
&gt;
&gt;
&gt; On Mon, Sep 11, 2000 at 02:48:00PM +0930, Mark Newton wrote:
&gt; &gt;  &gt; Doesn't this cast doubt on the idea that the server uses
&gt; port 20 for this?
&gt; &gt;  &gt; Or is this the wrong kind of FTP (active instead of passive etc.)?
&gt; &gt;
&gt; &gt; It's passive.  Try the command line client;  you'll likely get
&gt; a different
&gt; &gt; record out of it.
&gt;
&gt; Okay, it's different.
&gt; This time I tried munnari.oz.au, just for a lark:
&gt;
&gt; Sep 11 14:49:03 dog kernel: IP fw-in deny ppp0 TCP
&gt; 128.250.22.2:20 203.38.148.52:2812 L=48 S=0x00 I=17066 F=0x0000 T=49
&gt; Sep 11 14:49:09 dog kernel: IP fw-in deny ppp0 TCP
&gt; 128.250.22.2:20 203.38.148.52:2812 L=48 S=0x00 I=19603 F=0x0000 T=49
&gt;
&gt; This time, using a command-line FTP call, the server calls _me_ back
&gt; with a SYN to my locally created port, as you described.
&gt;
&gt; So does this mean that I have to allow connections from port 20 to any
&gt; local unprivileged port?
&gt;
&gt; That's also kind of dodgy.
&gt;
&gt; This is all starting to sound like I really need to have
&gt; a truly sacrificial machine between me and the net.
&gt; I.e. I've got to give default-accept privilege to all
&gt; unprivileged ports on the firewall machine, then
&gt; deny all ports that do have something on them - like
&gt; 6000, 2049 etc., and then hope as I did in the beginning
&gt; that there's nothing dodgy that redhat has nicely
&gt; stuck in there for me.
&gt;
&gt; Conclusion:
&gt; I think I'll learn to live without FTP.
&gt; It's too dificult.
&gt;
&gt; Cheers,
&gt; Alan Kennington.
&gt;
&gt; --
&gt; LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
&gt; To unsubscribe from the LinuxSA list:
&gt;   mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject
&gt;

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
