<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: rat was cracked!" -->
<!-- FromName="Alan Kennington" -->
<!-- FromEmail="akenning@dog.topology.org" -->
<!-- ToName="Mark Newton" -->
<!-- ToEmail="newton@atdot.dotat.org" -->
<!-- Date="Sun, 10 Sep 2000 14:00:09 +0930" -->
<!-- Id="20000910140009.B25419@dog.topology.org" -->
<!-- Reference="20000910064540.A19508@atdot.dotat.org" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: rat was cracked!</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Alan Kennington &lt;<I><A HREF="mailto:akenning@dog.topology.org">akenning@dog.topology.org</A></I>&gt;
  To  : Mark Newton &lt;<I><A HREF="mailto:newton@atdot.dotat.org">newton@atdot.dotat.org</A></I>&gt;
  Date: Sun, 10 Sep 2000 14:00:09 +0930
</PRE>
<H1>Re: rat was cracked!</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
On Sun, Sep 10, 2000 at 06:45:40AM +0930, Mark Newton wrote:
&gt; On Sun, Sep 10, 2000 at 01:04:22AM +0930, Alan Kennington wrote:
&gt; 
&gt; Rather topical, eh? :-)

Indeed! I think it's what they call a "cruel irony".
The attack actually happened 2 months ago, but I only just
discovered it because my KDE on my main workstation loacked up,
and I went back to using my ante-diluvian P133 with a messy
install of redhat 5.2 over an earlier redhat OS.

So now I will get stuck into using OpenSSH even locally on all
machines and get rid of all .rhosts files, because the main
firewall failed to stop the bad guys getting in.
By giving trust to that old machine, I was endangering the 
new securer ones.

What this all implies though, is that any linux distribution
you buy now is only going to be secure for a year or two,
and then you have to scrap it and start again.
I.e. linux installation is a continuous process,
like dishwashing or weeding.

==============================================================
&gt;  &gt; Then the Polish user types:
&gt;  &gt; ankdsfnkjdsfjkljkl
&gt;  &gt; "rat" relays this to sword.damocles.com:
&gt;  &gt; USER ankdsfnkjdsfjkljkl
&gt;  &gt; "rat" reponds to the Polish user on the pop2 connection:
&gt;  &gt; Name: (technotronic.com:nobody....
&gt;  
&gt; I suspect you've been missing packets around here somewhere.

Probably not.
I've just been using 68-byte packet logs.
So all the interesting stuff like the exact contents of
the overflow attack and the rootcron.sh file are lost.
Maybe I'll go look for the script etc. some time, just
to see what they actually did.

==============================================================
&gt; Yes, he's loging into the imap server on migux.mig.be.  I hope you obtained
&gt; permission from that system's admin before broadcasting username/password
&gt; details from that machine to a mailing list of 600 people.

Well, I figured that the attack was 2 months ago, and if the crims knew
the passwords 2 months ago, the good guys might as well know them too.
Besides, I had been assuming that these machines were owned by the
bad guys.
Now that you mention it, maybe the machines htye were using were
actually already hacked machines.
But the machines called "shouten"-whatever seem like bad guy machines.
There's a Japanese host called something like that which keeps
attacking me.

==============================================================
&gt;  &gt; ===================================
&gt;  &gt; The Polish user then sends:
&gt;  &gt; RWknnUhqW
&gt;  
&gt; You're sending another password to a public mailing list.  I'd suggest 
&gt; getting in touch with 216.167.96.108 and telling them that their security
&gt; is broken.

Now this is a machine which _is_ probably a bad-guy machine.
It seems to be a machine which they use to announce their exploits.

==============================================================
&gt; It goes further than that -- I'm left wondering if the reason you were 
&gt; targetted for these particular exploits is because of the public discussion
&gt; of your security measures, where it was made fairly clear that you were
&gt; using .rhosts for authentication.

But the attack was 2 months ago.
I only just discovered it by accident - for some reason, I checked out
the /etc/passwd file and found a new user "bob" in there with no
password and / as home directory.
Then the change time of the passwd file told me which log file
to look at.

After working until 4 a.m. trying to work out what had happened
to my machine 2 months ago, I was not in the optimal mood for
notifying all the other people who might have been hacked.

==============================================================
&gt;  &gt; Trouble is, though, that "ssh" lets root read the sh password
&gt;  &gt; in clear from a unix port.
&gt; 
&gt; Eh?  What are you talking about?  ssh doesn't transmit any passwords in the
&gt; clear!

Now is the point I really wanted to reply to.

I've been re-reading the ssh manuals - again!!
They are _not_ well-written.
Not the man-manuals anyway.

The ssh-agent program apparently opens a unix port with address:

/tmp/ssh-XXXXXXXX/agent.&lt;pid&gt;

So as it says in the manual:

----------------------------------------------------------------
The socket is made accessible only to the current user.  This method is
easily abused by root or another instance of the same user. 
----------------------------------------------------------------

As I understand it, the real user loads up an unencrypted copy of the
ssh private key into the ssh-agent process by invoking the ssh-add program.

Then the ssh-agent process feeds the unencrypted private key to
the user's "ssh" client processes for use in accessing the remote
sshd process.

If I've misunderstood this, then I will be very happy to be
corrected. I hope that the OpenSSH modus operandi is not so slack.

Cheers,
Alan Kennington.

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
