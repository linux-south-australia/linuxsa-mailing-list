<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: sshd unreliable" -->
<!-- FromName="Alan Kennington" -->
<!-- FromEmail="akenning@dog.topology.org" -->
<!-- ToName="Darryl Ross" -->
<!-- ToEmail="dross@syc.asn.au" -->
<!-- Date="Tue, 19 Sep 2000 10:21:21 +0930" -->
<!-- Id="20000919102121.A19645@dog.topology.org" -->
<!-- Reference="01C0221F.04D878C0.dross@syc.asn.au" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: sshd unreliable</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Alan Kennington &lt;<I><A HREF="mailto:akenning@dog.topology.org">akenning@dog.topology.org</A></I>&gt;
  To  : Darryl Ross &lt;<I><A HREF="mailto:dross@syc.asn.au">dross@syc.asn.au</A></I>&gt;
  Date: Tue, 19 Sep 2000 10:21:21 +0930
</PRE>
<H1>Re: sshd unreliable</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
On Tue, Sep 19, 2000 at 09:50:15AM +0930, Darryl Ross wrote:
&gt; 
&gt; Not quite sure what you do to your systems Alan, but you do seem to have a 
&gt; lot more problems than most :)

Darryl,

Maybe it's because I have 6 different linux systems, which is asking
for 6 times as much trouble for a start. 

&gt; I've been using sshd 1.2 on an old SuSE machine for about 12 months and 
&gt; have not had it lock up once in that time. Except for the console, which I 
&gt; don't have physical access to, ssh is the only way to log into the system. 
&gt; The uptime on the box was about 240 days (it was shut down to be moved to a 
&gt; different server room).

It just might be that "scp" is different to "ssh".
Maybe some scp connections are just lingering on when they shouldn't.
I run "scp" a lot.
In the last 53 hours, I did 62 ssh or scp sessions.
The daemon was up for a month or two.
But even one month would be 1000 sessions or so.

Although in theory the connections are palmed off to child processes,
the new daemon I started a couple of hours ago already has 20 open
connections, according to the /proc/*/fd/ directory.
Not good!

Request:
Could someone try running a script to just do "scp" 5000 times to a
1.2 or 2.0 ssh daemon, and see if the daemon falls over?
If not, could you take a look at its /proc/*/fd/ directory to 
see home many fds are open?

I should also mention that I usually transfer about 8 files at a time
with scp in any one connection. Maybe that's a factor. 
Not very likely though.


Cheers,
Alan Kennington.

PS. Knowing the right person to blame when a system fails is
poor consolation when you're 15,000 km from your computer
and you just want that system to work.
Therefore I prefer to configure systems for maximum reliability,
not for minimum blame. That's what the suits do.

PPS. At one organisation, I found such a large number of problems
with the dial-up modems that they just put a 24-hour clock
on them to turn them off and on at 3:30 every morning.
That seemed to fix them very well.
The systems _should_ have worked. But they didn't.
So they worked out an effective solution.
Too bad I was almost always using them at that time
of morning....

-----BEGIN PGP SIGNATURE-----
Version: PGPfreeware 5.0i for non-commercial use
MessageID: bnRlhGaC0buI00CBZh/qi9a8/CWuzvkn

iQA/AwUBOca4hn1WEhvTYzKeEQJuSgCg8MAPLVJiHsB85/ZyDClfc0u8Yx8AoIMP
bXDpj8msSys4H4g59Ads5TXH
=oqBm
-----END PGP SIGNATURE-----

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
