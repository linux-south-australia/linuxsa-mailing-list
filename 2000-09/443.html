<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="ipfwadm commands for FTP data connections" -->
<!-- FromName="Alan Kennington" -->
<!-- FromEmail="akenning@dog.topology.org" -->
<!-- ToName="LinuxSA" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Mon, 11 Sep 2000 13:04:12 +0930" -->
<!-- Id="20000911130412.A29261@dog.topology.org" -->
<!-- Reference="" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: ipfwadm commands for FTP data connections</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Alan Kennington &lt;<I><A HREF="mailto:akenning@dog.topology.org">akenning@dog.topology.org</A></I>&gt;
  To  : LinuxSA &lt;<I><A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A></I>&gt;
  Date: Mon, 11 Sep 2000 13:04:12 +0930
</PRE>
<H1>ipfwadm commands for FTP data connections</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
To any remaining ipfwadm experts out there:

On the subject of ipfwadm scripts, which probably
only people over 40 would remember now,
I've been modifying my firewall on a redhat 5.2 machine
(not the one that was hacked), and I've come up against
what I know is a tricky area - FTP data connections.

Does anyone know of a link to info on how to this in
a really safe way?
I've scoured linux-specific sites for this info - they all
just give details on ipchains.
I've also dug around with google, with the same sort of
luck. The best info I found so far was on a Russian site.
(And no, I don't want to wipe the disk and install a more
up to date OS.)

The problem is that I've got a default-deny firewall script now,
following instructions from the illuminati, and that's big trouble
for FTP. If I let FTP through, then pretty much anything goes.
I know this is well-known problem, and Paul Russell's tutorial
on this touched on the problem briefly about a year ago.
But I can't find the tute notes.

Cheers,
Alan Kennington.

---------------------------------------------------------
PS.  I think it's unfortunate that some people take the attitude
that "if you get hacked, you're lazy or an idiot", without
checking out the facts. I won't explain the full context
in my case. But do remember that when _you_ get hacked, people
will call you an idiot or lazy too, and tell you lots of
things that you know already. The ability to understand things
from other people's point of view is a virtue!

---------------------------------------------------------
PPS. I found the full attack scripts finally.
To get into POP2, they used:

<A HREF="http://darknet.securityinfos.com/os/linux/redhat/5.2/SDI-pop2.c">http://darknet.securityinfos.com/os/linux/redhat/5.2/SDI-pop2.c</A>

Then they fetched this file (a copy of it) over FTP:

<A HREF="http://darknet.securityinfos.com/os/linux/redhat/5.2/rootcron.sh">http://darknet.securityinfos.com/os/linux/redhat/5.2/rootcron.sh</A>

Then they just did a few clumsy things while trying to announce
their exploits, and then I noticed the packet warnings from
my relatively liberal firewall saying that something was
going on, and I blocked them.

----------------------------------------------------------
PPPS. I had previously heard that POP and IMAP were security
holes, and I had been blocking ports 110 and 143 for at least
a year. However, I didn't know that 109 was also a problem.
I only spend an average of 10-20 hours a week on computer security.
And sometimes I concentrate fully on real work.

But the vulnerable machine in question was first installed with
slackware, which was pretty horrible - it didn't have the software for
my ethernet card (about mid-1996 era, this is), and a heap of
other things didn't work either. But after a year or two,
I got it connected up to a sparc station, connected from time
to time by 9600 bit/sec modem to a rather safe organisation
hidden behind a rather conservative firewall.
So security was not my concern, even when I put redhat 4.x
of various versions on it. I was just worried that so little
worked - and the free support from RedHat wouldn't work,
because I couldnt' even get my customer registration
through the organisation's firewall.
The firewall stopped me from getting any useful help with the thing.

Later, I installed redhat 5.2 over the top of an earlier version,
and my main concerns were still _functionality_.
It was only 20 months ago that I connected my then 3 machines
to the net, and I firewalled out anything that looked nasty,
not really knowing how to "turn off services".
At that time, Redhat didn't ask you which services you wanted,
as far as I know.
And I really don't have the time to "upgrade" my OSs on 7 machines
now every 6 months. Besides, the "upgrades" usually take the
old configurations unaltered.

etc. etc. etc. etc.

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
