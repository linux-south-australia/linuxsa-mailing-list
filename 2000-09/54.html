<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="OpenFirmare dual boot problem" -->
<!-- FromName="Dan Kortschak" -->
<!-- FromEmail="dan.kortschak@adelaide.edu.au" -->
<!-- ToName="" -->
<!-- ToEmail="yellowdog-general@lists.yellowdoglinux.com, linuxsa@linuxsa.org.au" -->
<!-- Date="Sun, 03 Sep 2000 08:46:55 +0930" -->
<!-- Id="39B18A66.5DE66DEA@adelaide.edu.au" -->
<!-- Reference="" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: OpenFirmare dual boot problem</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Dan Kortschak &lt;<I><A HREF="mailto:dan.kortschak@adelaide.edu.au">dan.kortschak@adelaide.edu.au</A></I>&gt;
  To  : <A HREF="mailto:yellowdog-general@lists.yellowdoglinux.com">yellowdog-general@lists.yellowdoglinux.com</A>, <A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A>
  Date: Sun, 03 Sep 2000 08:46:55 +0930
</PRE>
<H1>OpenFirmare dual boot problem</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Hi Everyone, I've got yaboot working on my Mac with YellowDog Linux
using the information (and a fair bit of imagination) in the back of the
YDL manual, but I can't get the dual boot CHTP script to work:

&lt;CHRP-BOOT&gt;
	&lt;COMPATIBLE&gt;
		iMac,1 PowerMac1,1 PowerBook1,1 PowerMac2,1 PowerMac3,1 PowerBook2,1 PowerBook3,1
	&lt;/COMPATIBLE&gt;

	&lt;DESCRIPTION&gt;
		Boot chooser
	&lt;/DESCRIPTION&gt;

	&lt;BOOT-SCRIPT&gt;
		" get-key-map" " keyboard" open-dev $call-method
		dup 20 dump
		5 + c@ 08 =
		if
			." Booting Yaboot ..." cr " boot hd:5,\\yaboot.tbxi" eval
		else
			." Booting MacOS ..." cr " boot hd:5,\\:tbxi" eval
		then
	&lt;/BOOT-SCRIPT&gt;
&lt;/CHRP-BOOT&gt;

First, by the keyboardis frozen until yaboot or MacOS finish (which one
depends on who I place in the default position in the if else then
part). By Playing around with OF I found out that the line:

" get-key-map" " keyboard" open-dev $call-method

is causing this. I don't know enough about OF to hack this but I seems
to me that a boot chooser shouldn't disable the keyboard. Also, can
anyone tell me what the script is actually checking for with the c@ byte
fetch to make its decision of what to boot. I'm using Mac Open Firmware 3.10.f10.
Any help would be appreciated, havinf to call yabbot from the OF command
line is irritating.

thanks
Dan Kortschak
-- 
_____________________________________________________________   .`.`o
                                                         o| ,\__ `./`r
  Dan Kortschak                                          &lt;\/    \_O&gt; O
  Department of Genetics    phone:+61 8 8303 4863         "|'...'.\
  University of Adelaide    fax  :+61 8 8303 4399          '      :\
  Australia 5005            email:<A HREF="mailto:dan.kortschak@adelaide.edu.au">dan.kortschak@adelaide.edu.au</A>   : \

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
