<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="New RPM (warning)" -->
<!-- FromName="David Lloyd" -->
<!-- FromEmail="lloy0076@rebel.net.au" -->
<!-- ToName="" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Wed, 20 Sep 2000 03:46:01 +0930" -->
<!-- Id="39C7AD61.E7BF3322@rebel.net.au" -->
<!-- Reference="" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: New RPM (warning)</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: David Lloyd &lt;<I><A HREF="mailto:lloy0076@rebel.net.au">lloy0076@rebel.net.au</A></I>&gt;
  To  : <A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A>
  Date: Wed, 20 Sep 2000 03:46:01 +0930
</PRE>
<H1>New RPM (warning)</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
I just thought that I'd give you a warning about the new RPM. Before
installing the new RPM make absolutely certain that you know how to
build the old RPM from source in case the new RPM decides that it is
going to fail. Here's the basic steps to recompiling the new RPM (and in
fact, any source distribution that is based on the GNU coding
standards):

* get the source
 -
<A HREF="ftp://ftp.mirror.aarnet.edu.au/pub/pub/pub/pub/rpm/dist/rpm-3.0.x/rpm-3.0.5.tar.gz">ftp://ftp.mirror.aarnet.edu.au/pub/pub/pub/pub/rpm/dist/rpm-3.0.x/rpm-3.0.5.tar.gz</A>
 - it strikes me that there's too many pubs in that URL; nonetheless
Mozilla seems to think that is the URL
 - the main directory (non-mirror directory) is at <A HREF="ftp://ftp.rpm.org">ftp://ftp.rpm.org</A> -
this appears to get very busy and I'd use the local mirror if I were you

* unpack the source
 - anything with "tar.gz" at the end is a tar'red, gzipped file
 - basic command is:
   [lloy0076] tar -xzvf rpm-3.0.5.tar.gz
   --&gt; naturally you'd specify the full path to rpm-3.0.5.tar.gz, eg
/usr/local/saved/rpm-3.0.5.tar.gz, for your system
 - do this in /tmp or in /usr/src, and do it as root
 - read the output to work out where the tar file has untar'red
  --&gt; an interesting side note: most tar files behave themselves and
unpack into a NEW directory; however some of them don't and unpack into
the CURRENT directory, so if you're ever in doubt make a new
subdirectory and untar from that subdirectory. Note that ZIP files seem
to be the worst offends on this point
  --&gt; also, if the tar file is no zipped (no gz, or tar complains), use
the same command without the "z", i.e. tar -xvf [filename]

* in the source tree (the untar'red stuff), read the README and INSTALL
 - there should be two files, README and INSTALL
 - _READ_ them!

* execute "./configure --prefix=/usr"
 - use ./configure --help | less for a full list of options
 - put RPM into a "prefix" of /usr; generally ./configure defaults to a
base prefix of /usr/local, however RPM is normally installed by the
distribution with a prefix of /usr
 - watch the output and if you get any seeming errors it should complain
loudly
 - if you do, then attempt to fix them [ redundant advice if ever there
was such a thing ]

* execute a "make"
 - again watch the output
 
* execute "make install"
 - this will install RPM

Now, you can add the previous two commands into one by doing a "make
install", however I generally don't go a "make install" straight off.
For one thing, *some* packages you'll download as source don't have an
"uninstall" option. This is very painful....to find out if a package has
an "uninstall" office, do a "grep uninstall Makefile" after you've done
the "./configure". If something appears that has the word "uninstall" in
it then it's likely that a "make uninstall" will "uninstall" a "make
install"...useful if you crash the system, discover it doesn't work,
decide that you don't really want it etc etc....

If there is no uninstall option, just be aware of that.

Now, provided everything behaves itself you will have a new (old)
version of RPM.

In summary the steps are:

* get the source
* unpack the source
* ./configure --prefix=/usr the source
* make install the source

Simple, eh?

[incidentally I think I'll conglomerate a "compiling GNU compliant code
LinuxSA Tip Sheet]

DL
-- 
We are are determined to be people...
...we don't have to live like we are forced to live.
 - Dr Martin Luther King, Jr

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
