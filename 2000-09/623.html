<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: failsafe bootloaders" -->
<!-- FromName="Alan Kennington" -->
<!-- FromEmail="akenning@dog.topology.org" -->
<!-- ToName="LinuxSA" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Thu, 14 Sep 2000 02:02:53 +0930" -->
<!-- Id="20000914020253.A5483@dog.topology.org" -->
<!-- Reference="" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: failsafe bootloaders</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Alan Kennington &lt;<I><A HREF="mailto:akenning@dog.topology.org">akenning@dog.topology.org</A></I>&gt;
  To  : LinuxSA &lt;<I><A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A></I>&gt;
  Date: Thu, 14 Sep 2000 02:02:53 +0930
</PRE>
<H1>Re: failsafe bootloaders</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
On Wed, Sep 13, 2000 at 06:00:04PM +0930, Daryl Tester wrote:
&gt; "Russell, Richard (DEH)" wrote:
&gt; 
&gt; &gt; er.. yes, that's nice, and thankyou for your input, but seeing as I could be
&gt; &gt; a number of Kms away from the machine, I can't select which image to boot...
&gt; 
&gt; Don't know if it will help you, but you can redirect LILO to a
&gt; serial port ...

Now that sounds promising.

I have almost the same situation.
I remotely re-boot one machine over the net after rewriting
a device driver. If I make a mistake, I get to drive 6 km in the
dark to a high crime industrial area with noisy locked gates.
Much better to stay home close to my fridge!

I've installed the appropriate root serial console
on my machines to connect VT320 monitors to them.

But..... I could wire up one machine to the serial
port of the other. Then I log in to machine A,
which has a root serial console (as documented in
/usr/src/linux/Documentation/serial-console.txt),
and then....
Can I do Ctrl-Alt-Del on the remote console to
re-boot the machine? 

The LILO redirection is documented in serial-console.txt as

==================================================
2. LILO can also take input from a serial device. This is a very
   useful option. To tell LILO to use the serial port:
   In lilo.conf (global section):

   serial  = 1,9600n8 (ttyS1, 9600 bd, no parity, 8 bits)
==================================================

There's something called "magic SysRQ key".
Documented in /usr/src/linux/Documentation/sysrq.txt.

There are these commands from this special terminal:

==================================================
*  What are the 'command' keys?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
'r'     - Turns off keyboard raw mode and sets it to XLATE.

'k'     - Secure Access Key (SAK) Kills all programs on the current virtual
          console. NOTE: See important comments below in SAK section.

'b'     - Will immediately reboot the system without syncing or unmounting
          your disks.

'o'     - Will shut your system off (if configured and supported).

's'     - Will attempt to sync all mounted filesystems.

'u'     - Will attempt to remount all mounted filesystems read-only.  
==================================================

Etc. etc.

They also say:

==================================================
*  What is the magic SysRQ key?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
It is a 'magical' key combo you can hit which kernel will respond to
regardless of whatever else it is doing, unless it is completely locked up.
==================================================

Somewhere else, it is said that if there is any possibility at all
of the kernel responding, then it will do so to this
terminal.

the only question remains - will it respond at your stage of
a boot hang?

Cheers,
Alan Kennington.

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
