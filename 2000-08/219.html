<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="RE: comp sci question: fast status mask handling" -->
<!-- FromName="John Bonnett" -->
<!-- FromEmail="jbonnett@camtech.net.au" -->
<!-- ToName="LinuxSA" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Tue, 8 Aug 2000 18:57:13 +0930" -->
<!-- Id="000301c0011a$d5af8040$50f537cb@piii" -->
<!-- Reference="398F7E83.32A13671@aarnet.edu.au" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: RE: comp sci question: fast status mask handling</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: John Bonnett &lt;<I><A HREF="mailto:jbonnett@camtech.net.au">jbonnett@camtech.net.au</A></I>&gt;
  To  : LinuxSA &lt;<I><A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A></I>&gt;
  Date: Tue, 8 Aug 2000 18:57:13 +0930
</PRE>
<H1>RE: comp sci question: fast status mask handling</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
One other thought on finding which bit is set would be as follows...

Make a special set of 32 bit masks.

Mask 1 - 16 1 bits followed by 16 0 bits starting from the high end
Mask 2 - 8 1s, 8 0s, 8 1s, 8 0s
Mask 3 - Alternating blocks of 4 bits 1s and 0s
Mask 4 - Alternating blocks of 2 bits
Mask 5 - Alternating single bits

/* r is the long with the 1 bit */
n = 0;
if (r & Mask1) != 0) n++;
n &lt;&lt; 1;
if (r & Mask2) != 0) n++;
n &lt;&lt; 1;
if (r & Mask3) != 0) n++;
n &lt;&lt; 1;
if (r & Mask4) != 0) n++;
n &lt;&lt; 1;
if (r & Mask5) != 0) n++;
/* n is the number you want */

Could obviously be done very slickly in assembler.

This reminded me of a neat set of number guessing cards I made when I was a
kid.  You asked someone to think of a number between 1 and 16 and then tell
you which of 4 cards it was on.  You then stacked the cards on one another
one way up if the number was on the card and the other way up if it was not
and finally placed the stack on a fifth card.  All except the fifth card had
special cut outs on them following the pattern of the above masks and the
fifth card had the numbers 1 to 16.  When the cards were stacked up only one
number shows through the holes and it's the one to be guessed.

I though it was magic until I figured how it worked.

John Bonnett

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
