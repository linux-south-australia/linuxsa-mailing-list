<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: extract marked infix from filename with bash script?" -->
<!-- FromName="'Dan Kortschak'" -->
<!-- FromEmail="dan.kortschak@adelaide.edu.au" -->
<!-- ToName="'David Lloyd'" -->
<!-- ToEmail="lloy0076@rebel.net.au" -->
<!-- Date="Mon, 6 Nov 2000 11:35:45 +1030 (CST)" -->
<!-- Id="Pine.OSF.4.21.0011061123010.17823-100000@pene.science.adelaide.edu.au" -->
<!-- Reference="3A0515E2.9485DC40@rebel.net.au" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: extract marked infix from filename with bash script?</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Dan Kortschak &lt;<I><A HREF="mailto:dan.kortschak@adelaide.edu.au">dan.kortschak@adelaide.edu.au</A></I>&gt;
  To  : David Lloyd &lt;<I><A HREF="mailto:lloy0076@rebel.net.au">lloy0076@rebel.net.au</A></I>&gt;
  Date: Mon, 6 Nov 2000 11:35:45 +1030 (CST)
</PRE>
<H1>Re: extract marked infix from filename with bash script?</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Hi, I've sorted out the problem using bash's parameter expansion:

(from memory)
HEAD=${INFILE%%.template.rc}
HEAD=${HEAD##*.p}

this leaves just the number following the .p

But I can't figure out how to nest this so I don't have to re-refer to
$HEAD (it seems inelegant, but I'm happy that it works)

On the same project I'd like to know how I can get a script to drop itself
into the background; the script calls some very long running processes
(weeks) in the background, and I'd like it to wait in the background for
them to finish and then email to the user that they have finished. Any
ideas?

On Sun, 5 Nov 2000, David Lloyd wrote:

&gt; Dan:
&gt; 
&gt; &gt;         I'm writing a script to set up batch jobs on a Beowulf at the uni.
&gt; 
&gt; I vaguely remember that you may have been a PHD or masters student at
&gt; the University and this was one of your projects. If you are, how's
&gt; things going with it?

Nope, that's not me, I think you are thinking of Evan Bourlotos who has
posted about bits to do with a masters in CS.

&gt; &gt; Here's the problem: how do I extract a number in an infix from a filename where the infix is of the
&gt; &gt; form '.pN.' (where N is the number)?
&gt; 
&gt; Because I don't have an example of an actual file name (it would be
&gt; useful), a perl regular expression such as:
&gt; 
&gt; s/.*\.D(d)+.*/$1/
&gt; 
&gt; ...reads "match any character, but when you see one single dot, followed
&gt; by a non-digit, followed by one or more digits, save that for later and
&gt; call it $1". I think you need something that will match the pattern and
&gt; then allow you to extract just the digit parts.
&gt; 
&gt; Now, I would have thought that sed would be able to find it given that
&gt; it works with (slightly different) regular expressions but I hope that
&gt; this tip helps.

I had a look through the sed manual too; I need to brush up on my regexps,
but I think that what you have above should work with sed. Thanks.

&gt; &gt; Employer required disclaimer (sorry for the bandwidth):
&gt; 
&gt; If only all employers were nice enough to include the sorry part (or did
&gt; you add it manually)...

The original disclaimer is 12 lines long, I paraphrased (as you'll not
the disclaimer doesn't follow the normal legalese) and apologised.


Dan
-- 
_____________________________________________________________   .`.`o     
                                                         o| ,\__ `./`r
  Dan Kortschak                                          &lt;\/    \_O&gt; O    
  Genetics (DMB)          phone :+61 8 8303 4863          "|`...'.\
  Adelaide University     fax   :+61 8 8303 4399           `      :\ 
  Australia 5005          mailto:<A HREF="mailto:dan.kortschak@adelaide.edu.au">dan.kortschak@adelaide.edu.au</A>    : \

Employer required disclaimer (sorry for the bandwidth):
If you were not sent this message, please delete and forget it. If you
were, be aware that we don't guarantee it free of virus; the health of
your system is your own responsibility, do what you feel is necessary.

Check out the Munchkins: <A HREF="http://www.geocities.com/yellow_cake_road/">http://www.geocities.com/yellow_cake_road/</A>


-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
