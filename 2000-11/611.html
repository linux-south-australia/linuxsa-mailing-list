<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: Socket Sending Problem" -->
<!-- FromName="'Daryl Tester'" -->
<!-- FromEmail="dt@picknowl.com.au" -->
<!-- ToName="'Darren'" -->
<!-- ToEmail="darren@aussino.com" -->
<!-- Date="Thu, 16 Nov 2000 21:14:26 +1030" -->
<!-- Id="3A13BA8A.94B89199@picknowl.com.au" -->
<!-- Reference="003d01c04f78$6ce6aaa0$c801a8c0@aussino.com" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: Socket Sending Problem</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Daryl Tester &lt;<I><A HREF="mailto:dt@picknowl.com.au">dt@picknowl.com.au</A></I>&gt;
  To  : Darren &lt;<I><A HREF="mailto:darren@aussino.com">darren@aussino.com</A></I>&gt;
  Date: Thu, 16 Nov 2000 21:14:26 +1030
</PRE>
<H1>Re: Socket Sending Problem</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Darren wrote:

&gt; I have this code below that can successfully send very small amount of data
&gt; in Linux, but not for larger size. Why?

&gt;   ptmp = pstr;
&gt;   sentlen = 0;
&gt;   leftover = slen;
&gt;   do {
&gt;     sentlen = send ( sockfd, ptmp, slen-sentlen, 0 );
&gt;     ptmp += sentlen;
&gt;   } while ( ptmp &lt; ( pstr + slen ) );

1)  No error checking on send()'s return value (when it starts returning
    -1 due to an error, your code will go west).

2)  What does leftover do (apart from get assigned once)?

3)  The logic is actually broken for multiple send()'s.  Nothing I can
    see is being updated for total size of data remaining to be sent
    ((slen - sentlen) is only relevant to the previous send()).

-- 
Regards,
  Daryl Tester,  Software Wrangler and Bit Herder, IOCANE Pty. Ltd.

"MS Linux is released under the provisions of the Gates Private License, which
 means you can freely use this Software on a single machine without warranty
 after having paid the purchase price and annual renewal fees." -- mslinux.org

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
