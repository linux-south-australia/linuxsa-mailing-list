<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="postgres pg_dump datetime timezone problem" -->
<!-- FromName="'Alan Kennington'" -->
<!-- FromEmail="akenning@dog.topology.org" -->
<!-- ToName="'LinuxSA'" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Fri, 17 Nov 2000 06:25:01 +1030" -->
<!-- Id="20001117062501.A6336@dog.topology.org" -->
<!-- Reference="" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: postgres pg_dump datetime timezone problem</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Alan Kennington &lt;<I><A HREF="mailto:akenning@dog.topology.org">akenning@dog.topology.org</A></I>&gt;
  To  : LinuxSA &lt;<I><A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A></I>&gt;
  Date: Fri, 17 Nov 2000 06:25:01 +1030
</PRE>
<H1>postgres pg_dump datetime timezone problem</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Does anyone happen to know how to force
the Postgres utility pg_dump to dump dates
in GMT?

I'm having a problem with this.
I want to copy a database from one SuSE 6.2 system
to another.
But the format of the "datetime" data type seems to
always be in local time, not matter what I do with the TZ
env variable.

E.g. this is what I get on about version 6.5
INSERT INTO "food_hist" values ('Fri Nov 17 01:25:36 2000 CST',22,542);
INSERT INTO "food_hist" values ('Fri Nov 17 01:53:08 2000 CST',38,46);
INSERT INTO "food_hist" values ('Fri Nov 17 01:57:17 2000 CST',12,570);
INSERT INTO "food_hist" values ('Fri Nov 17 01:59:13 2000 CST',44,216);
INSERT INTO "food_hist" values ('Fri Nov 17 02:48:07 2000 CST',42,452);
INSERT INTO "food_hist" values ('Fri Nov 17 02:50:28 2000 CST',278,90);
INSERT INTO "food_hist" values ('Fri Nov 17 05:37:22 2000 CST',192,254);
INSERT INTO "food_hist" values ('Fri Nov 17 05:38:28 2000 CST',126,12); 

E.g. this is what I get on about version 6.4
68064   Fri Nov 17 01:25:36 2000 CST    22      542
68128   Fri Nov 17 01:53:08 2000 CST    38      46
68160   Fri Nov 17 01:57:17 2000 CST    12      570
68161   Fri Nov 17 01:59:13 2000 CST    44      216
68192   Fri Nov 17 02:48:07 2000 CST    42      452
68193   Fri Nov 17 02:50:28 2000 CST    278     90
68194   Fri Nov 17 05:37:22 2000 CST    192     254
68195   Fri Nov 17 05:38:28 2000 CST    126     12 

In both cases, it seems that the importing machine thinks
that CST means USA CST, and then converts this to GMT,
and then the Australian CST, resulting in a quite a
large error.

I would have updated to PostgreSQL version 7.0, except that
it came out a couple of days after I had updated 3 machines
to the latest version 6.x. 

Question:
Does version 7.0 have this date problem?
It's really a pg_dump problem, I think, not a general
Postgres problem.
If version 7.0 pg_dump has the ability to do UTC or whatever,
I'll update as soon as I get some of that mythical "spare time".

Cheers,
Alan Kennington.

PS. Please redirect any flames to Florida for counting.

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
