<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="[OT] IRIX out of logical swap problem" -->
<!-- FromName="'Richard Russell'" -->
<!-- FromEmail="richard@yellowgoanna.com" -->
<!-- ToName="" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Tue, 03 Jun 2003 12:51:21 +0930" -->
<!-- Id="courier.3EDC1431.000049AF@pogona.yellowgoanna.com" -->
<!-- Reference="" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: [OT] IRIX out of logical swap problem</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Richard Russell &lt;<I><A HREF="mailto:richard@yellowgoanna.com">richard@yellowgoanna.com</A></I>&gt;
  To  : &lt;<I><A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A></I>&gt;
  Date: Tue, 03 Jun 2003 12:51:21 +0930
</PRE>
<H1>[OT] IRIX out of logical swap problem</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Hi all, 

I have a problem on ye olde Irixe boxeth. It complains about running out of 
swap, but whenever I check, it has pantloads of free space (well, I 
exaggerate slightly, but only slightly). 

At present, top says: 

Memory: 128M max, 95M avail, 25M free, 228M swap, 201M free swap 

Which smells like enough to me. 

I'm presently trying to coax sar into doing some monitoring for me, but I 
was wondering if anyone had seen this before? The machine is running IRIX 
6.5 without X, and mostly does NIS, sendmail, squid, pop, imap, NFS and 
SaMBa. IMHO, it's a bit much for this old box and I'd like to replace it. 
However, I can't actually see any evidence that memory is the problem. 

I did consider that it's just running out of memory, but the behaviour seems 
a little odd. Here's some eg lines from /var/adm/SYSLOG -- I've left a LOT 
of repeats out: 

(sorry about the soggy formatting - webmail excuses all!) 

 ----
Jun  3 12:14:44 2E:ch1 sshd[40421]: fatal: Read from socket failed: 
Connection reset by peer
Jun  3 12:15:29 1A:ch1 unix: ALERT: squid [40839] - out of logical swap 
space during brk/sbrk - see swap(1M) [filter /usr/sbin
/klogpp failed: Resource temporarily unavailable]
Jun  3 12:15:29 1A:ch1 unix: ALERT: squid [40839] - out of logical swap 
space during brk/sbrk - see swap(1M)
Jun  3 12:15:29 1A:ch1 unix: ALERT: syslogd [84] - out of logical swap space 
during fork while allocating uarea - see swap(1M)
Jun  3 12:15:29 1A:ch1 unix: ALERT: syslogd [84] - out of logical swap space 
during fork while allocating uarea - see swap(1M)
Jun  3 12:15:29 1A:ch1 unix: ALERT: squid [40839] - out of logical swap 
space during brk/sbrk - see swap(1M)
Jun  3 12:15:29 1A:ch1 unix: ALERT: squid [40839] - out of logical swap 
space during brk/sbrk - see swap(1M)
Jun  3 12:15:29 1B:ch1 syslog: xcalloc: Unable to allocate 1 blocks of 4096 
bytes!
Jun  3 12:15:29 1B:ch1 syslog: xcalloc: Unable to allocate 1 blocks of 4096 
bytes!
Jun  3 12:15:29 5U:ch1 squid[569]: Squid Parent: child process 40839 exited 
with status 1
Jun  3 12:15:32 5U:ch1 squid[569]: Squid Parent: child process 43043 started
Jun  3 12:15:46 1A:ch1 unix: ALERT: sendmail [43490] - out of logical swap 
space during stack growth - see swap(1M)
Jun  3 12:15:46 1A:ch1 unix: ALERT: sendmail [43490] - out of logical swap 
space during stack growth - see swap(1M)
Jun  3 12:15:46 1A:ch1 unix: ALERT: sendmail [43490] - out of logical swap 
space during stack growth - see swap(1M)
Jun  3 12:15:46 1A:ch1 unix: ALERT: sendmail [43490] - out of logical swap 
space during stack growth - see swap(1M)
Jun  3 12:15:46 1A:ch1 unix: |$(0x6dc)ALERT: Process [sendmail] pid 43490 
killed: not enough memory to grow stack
Jun  3 12:15:46 1A:ch1 unix: |$(0x6dc)ALERT: Process [sendmail] pid 43490 
killed: not enough memory to grow stack
Jun  3 12:15:47 1A:ch1 unix: ALERT: inetd[43345] was killed; Dynamic Loader 
cannot add virtual address space
Jun  3 12:15:47 1A:ch1 unix: ALERT: inetd[43345] was killed; Dynamic Loader 
cannot add virtual address space
Jun  3 12:15:47 1A:ch1 unix: ALERT: inetd [43345] - out of logical swap 
space during exec - see swap(1M)
Jun  3 12:15:47 1A:ch1 unix: ALERT: inetd [43345] - out of logical swap 
space during exec - see swap(1M)
Jun  3 12:16:48 1A:ch1 unix: ALERT: sendmail [43358] - out of logical swap 
space during fork/sproc - see swap(1M)
Jun  3 12:16:48 1A:ch1 unix: ALERT: sendmail [43358] - out of logical swap 
space during fork/sproc - see swap(1M)
Jun  3 12:16:58 1A:ch1 last message repeated 4 times
Jun  3 12:16:58 1A:ch1 last message repeated 4 times
Jun  3 12:16:58 2C:ch1 sendmail[43358]: NOQUEUE: SYSERR(root): SMTP-MAIL: 
cannot fork: Resource temporarily unavailable
Jun  3 12:17:01 1A:ch1 unix: ALERT: sendmail [43469] - out of logical swap 
space during fork/sproc - see swap(1M)
Jun  3 12:17:01 1A:ch1 unix: ALERT: sendmail [43469] - out of logical swap 
space during fork/sproc - see swap(1M)
Jun  3 12:17:02 1A:ch1 unix: ALERT: sendmail [43469] - out of logical swap 
space during fork/sproc - see swap(1M)
Jun  3 12:17:02 1A:ch1 unix: ALERT: sendmail [43469] - out of logical swap 
space during fork/sproc - see swap(1M)
...
Jun  3 12:17:02 1A:ch1 unix: ALERT: sh[42992] was killed; Dynamic Loader 
cannot map exe into memory
...
Jun  3 12:17:03 1A:ch1 unix: ALERT: mail[43393] was killed; Dynamic Loader 
cannot get enough memory to map exe
...
Jun  3 12:17:08 1A:ch1 unix: ALERT: smbd [534] - out of logical swap space 
during fork/sproc - see swap(1M)
...
Jun  3 12:17:09 1A:ch1 unix: ALERT: inetd [240] - out of logical swap space 
during fork/sproc - see swap(1M)
...
Jun  3 12:17:11 2C:ch1 sendmail[43469]: NOQUEUE: SYSERR(root): SMTP-MAIL: 
cannot fork: Resource temporarily unavailable
...
Jun  3 12:17:34 1A:ch1 unix: ALERT: syslogd [84] - out of logical swap space 
during fork/sproc - see swap(1M)
 ---- 

And so on... What is confusing me here is that everything seems to fail at 
once. I expected either that everything would grind to a halt, or one would 
fail, the server would reclaim the swap, and everything else would be ok... 
I also expected that I'd actually see some serious swap usage... I don't. 
Anyone got any tips for me? 

Cheers 

rr 

-- 
Richard Russell
Yellow Goanna P/L
m: +61 412 827 805
e: <A HREF="mailto:richard@yellowgoanna.com">richard@yellowgoanna.com</A>
w: <A HREF="http://www.yellowgoanna.com/">http://www.yellowgoanna.com/</A>

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A> IRC: #linuxsa on irc.freenode.net
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
