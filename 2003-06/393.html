<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: linker question: semi-global extern symbols for partial linkage" -->
<!-- FromName="'Alan Kennington'" -->
<!-- FromEmail="ak1.linuxsa@topology.org" -->
<!-- ToName="'LinuxSA'" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Wed, 11 Jun 2003 14:24:12 +0930" -->
<!-- Id="20030611142412.B25725@dog.topology.org" -->
<!-- Reference="3EE679BB.5487B0FC@iocane.com.au" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: linker question: semi-global extern symbols for partial linkage</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Alan Kennington &lt;<I><A HREF="mailto:ak1.linuxsa@topology.org">ak1.linuxsa@topology.org</A></I>&gt;
  To  : LinuxSA &lt;<I><A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A></I>&gt;
  Date: Wed, 11 Jun 2003 14:24:12 +0930
</PRE>
<H1>Re: linker question: semi-global extern symbols for partial linkage</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
On Wed, Jun 11, 2003 at 10:07:15AM +0930, Daryl Tester wrote:
&gt; Alan Kennington wrote:
&gt; 
&gt; &gt; Here I have two modules x1 and x2 which share some symbols and are linked
&gt; &gt; together, but I don't want their shared symbols to be exported to main.o.
&gt; &gt; But I do want _some_ symbols to be exported from x1 and x2 to main.o.
&gt; 
&gt; GNU strip allows selective name removal or retention.


Daryl,

Many thanks for that. That's definitely the solution to my problem.
Now I can't understand why there are no strip commands in any of the 
linux kernel Makefile files that I've grepped.
I guess I'll have to innovate a little and stick a "strip" command in
there and see what happens. Given the number of tools which read the
kernel Makefiles, I'm always reluctant to try anything new there in case
it might "break" some tacit assumptions.

More ideal than removing extern text symbols would be to convert T symbols
to t symbols. And even better would be to read the list of symbols to change
from a file or something. Removing 100 symbols on the "strip" command line
could make a messy Makefile. Hmmm... I'm beginning to see why no one
bothers with partial symbol stripping. What's really needed is a 
C language construct to indicate hierarchical named scopes for symbols
with linker support for this.

Maybe I'd better stick to the traditional methodology of preceding all
extern symbols with a hopefully unique prefix. That's what I was trying
to get away from. It's a bit like trying to think of a unique name for
a rock band.

Anyway....

CHeers,
Alan Kennington.

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A> IRC: #linuxsa on irc.freenode.net
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
