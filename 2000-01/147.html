<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Sendmail config problem" -->
<!-- FromName="Gaelyne Gasson" -->
<!-- FromEmail="gaelyne@videocam.net.au" -->
<!-- ToName="" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Thu, 6 Jan 2000 20:56:45 +1030 (CST)" -->
<!-- Id="14452.28133.764310.748499@videocam.net.au" -->
<!-- Reference="" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Sendmail config problem</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Gaelyne Gasson &lt;<I><A HREF="mailto:gaelyne@videocam.net.au">gaelyne@videocam.net.au</A></I>&gt;
  To  : <A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A>
  Date: Thu, 6 Jan 2000 20:56:45 +1030 (CST)
</PRE>
<H1>Sendmail config problem</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Hi All,

I have a sendmail config problem that I'm hoping someone can help
with.

The problem relates to relaying mail for an entire domain to a
specific user on our system.

We've been doing this in the past with no problems, but in recent days
we've needed to make what I thought was going to be a minor change and
now things don't work as they should.

Anyway, the details are as follows.

Our main server is 'videocam.net.au' we also host other sites, such as
NAME.com.au and vcsweb.com All mail to anyone at NAME.com.au needs to
go to a user on our system called 'joeshmoe'. All mail to vcsweb.com
needs to go to 'rod'

Currently our name server has all of these domains using the same IP
address (203.38.186.193).

The MX records for all domains point to mail.videocam.net.au (also
203.38.186.193).

Our sendmail "access" file has the following entries

NAME.com.au  RELAY
vcsweb.com  RELAY

To compliment this out mailertable file has the following entries

NAME.com.au   local:joeshmoe
vcsweb.com   local:rod

THIS WORKS FINE.  If I send mail to '<A HREF="mailto:test@NAME.com.au">test@NAME.com.au</A>' it is correctly
delivered into the 'joeshmoe' mailspool.

Likewise mail to '<A HREF="mailto:test@vcsweb.com">test@vcsweb.com</A>' find its way into the 'rod'
mailspool.

Now the problem.  For various reasons we need to give 'NAME.com.au'
its own ip address. No problem, we simply changed the "A" record so
that it has the new ip (we left the MX records as they were - ie,
pointing to 'mail.videocam.net.au').

The new IP (for reference) is 203.38.186.199, so naturally we needed
to add this to our interface table.  

/sbin/ifconfig eth0:1 203.38.186.199

So far, all is well - the web and ftp server both work, and mail to a
*known user on our system* is being accepted and delivered (eg
<A HREF="mailto:rod@NAME.com.au">rod@NAME.com.au</A> gets correctly delivered to 'rod (@videocam.net.au) -
BUT when we try to send mail to '<A HREF="mailto:test@NAME.com.au">test@NAME.com.au</A>' we are getting an
'unknown user' error message - In other words, the relay mechanism is
now broken.

In short, as long as NAME.com.au has the same IP address as
videocam.net.au then all is fine, but if we change the IP and nothing
else, the only mail that can be sent to NAME.com.au is if the user is
known to videocam.net.au.

Hopefully I've written this so that it makes sense to someone, and if
anyone can give advise on what else I need to change in order to get
it working correctly again I'd be very very thankful.

Thanks in advance.
Rod


































</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
