<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="squid running to aliased IPs, and user IP accounting" -->
<!-- FromName="'Toby Corkindale'" -->
<!-- FromEmail="tjcorkin@sa.pracom.com.au" -->
<!-- ToName="" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Thu, 5 Jul 2001 10:50:22 +0930 (CST)" -->
<!-- Id="Pine.LNX.4.33.0107051041040.28718-100000@localhost.localdomain" -->
<!-- Reference="" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: squid running to aliased IPs, and user IP accounting</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Toby Corkindale &lt;<I><A HREF="mailto:tjcorkin@sa.pracom.com.au">tjcorkin@sa.pracom.com.au</A></I>&gt;
  To  : &lt;<I><A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A></I>&gt;
  Date: Thu, 5 Jul 2001 10:50:22 +0930 (CST)
</PRE>
<H1>squid running to aliased IPs, and user IP accounting</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Hiya

I never seem to get replies to my questions, but here's another one anyway..

First Q:
I want to do IP accounting on a per-user basis. I was sure there was
something around to do this on linux - can someone point me in the right
direction?

Second Q:
I've also been trying to get squid running on several different IPs. Not for
incoming requests, but using the tcp_outgoing parameter to set the IP it
uses to retreive things itself. The idea being that I can use iptables to
account for the bandwidth to the different IPs.
(and have all the squids peer to a central server and/or each other)

The problem is, I can't even get this to work with a single squid & single
IP address.
Everything works fine, until i set the tcp_outgoing address to be
192.168.0.40, which is an aliased ip on eth0:1.
At this point, squid seems to fail to connect to anything external.
I've failed to figure out why - squid succeeds when it does the initial DNS
tests, btw. Accorrding to tcpdump i don't even see squid attempt to connect
to the destination website though?

Has anyone had something like this going?



If I can get per-user accounting, then I'll just run each squid as a
different user. Easy.
I need the per-user stuff anyway, for the users themselves.
However, I can see myself ending up writing a perl script to rip
cache-misses data per user for a single squid cache, although this isn't so
accurate.
Also, I've considered running one squid, thats only listening on loopback,
and then have a pass-thru proxy (eg. perl script or something) sitting on
multiple aliased IPs, that just pass thru to the main squid proxy, and keep
track of the data flowing both ways.

Thanks,

Toby

np. Snog - The prole song

-- 
 Toby Corkindale
 UNIX Developer, Core Tech R&D
 Technology SA, Pracom Ltd
 288 Glen Osmond Road
 Fullarton,	5063
 South Australia
 Tel: +61 8 8202 9075
 Fax: +61 8 8202 9001
 mailto:<A HREF="mailto:Toby.Corkindale@sa.pracom.com.au">Toby.Corkindale@sa.pracom.com.au</A>
 <A HREF="http://www.sa.pracom.com.au/">http://www.sa.pracom.com.au/</A>

                  PRIVILEGED - PRIVATE AND CONFIDENTIAL

   Privileged/Confidential Information may be contained in this message.
   If you are not the addressee indicated in this message, you may not
   copy or deliver this message to anyone.  In such case, you should
   destroy this message and notify the sender by reply email. Opinions,
   conclusions and other information in this message that do not relate
   to the official business of this organisation shall be understood as
   neither given nor endorsed by it.

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
