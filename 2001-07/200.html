<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: squid running to aliased IPs, and user IP accounting" -->
<!-- FromName="'Phil Hutton'" -->
<!-- FromEmail="phil@hutton.sh" -->
<!-- ToName="'Toby Corkindale'," -->
<!-- ToEmail="tjcorkin@sa.pracom.com.au,linuxsa@linuxsa.org.au" -->
<!-- Date="Thu, 5 Jul 2001 13:43:00 +0930" -->
<!-- Id="20010705134300.A32047@odin.hutton.sh" -->
<!-- Reference="Pine.LNX.4.33.0107051122240.28718-100000@localhost.localdomain" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: squid running to aliased IPs, and user IP accounting</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Phil Hutton &lt;<I><A HREF="mailto:phil@hutton.sh">phil@hutton.sh</A></I>&gt;
  To  : Toby Corkindale &lt;<I><A HREF="mailto:tjcorkin@sa.pracom.com.au">tjcorkin@sa.pracom.com.au</A></I>&gt;<BR>        &lt;<I><A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A></I>&gt;
  Date: Thu, 5 Jul 2001 13:43:00 +0930
</PRE>
<H1>Re: squid running to aliased IPs, and user IP accounting</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Hi...

&gt; &gt; &gt; First Q:
&gt; &gt; &gt; I want to do IP accounting on a per-user basis. I was sure there was
&gt; &gt; &gt; something around to do this on linux - can someone point me in the right
&gt; &gt; &gt; direction?
&gt; &gt;
&gt; &gt; IPTables for Linux. IPFW does it in FreeBSD :-)
&gt; 
&gt;    owner
&gt;        This  module  attempts to match various characteristics of
&gt;        the packet creator, for locally-generated packets.  It  is
&gt;        only valid in the OUTPUT chain, and even this some packets
&gt;        (such as ICMP ping responses) may have no owner, and hence
&gt;        never match.

Note that it's only valid on the output chain though.  I suspect that
this means you can only account for outgoing packets - can anyone
confirm this?  (I've been planning to test this, but haven't had a
chance yet)

If you want to do per-user accounting with squid, I'd suggest using
Squid's user authentication stuff.  That way you don't have to do user
&lt;-&gt; IP address matching, which can be a bit dodgy.  Depending on what
your users are like and what you're using the accounting information
for, you might find that users swap their IP addresses around to avoid
the accounting system.  Authentication makes avoiding the accounting
system more difficult.

And I certainly wouldn't recommend running one Squid for each user -
that could get ugly, and you'd lose many of the benefits of caching.

Phil.

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
