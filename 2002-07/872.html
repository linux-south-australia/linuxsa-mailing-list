<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: Scripting Help" -->
<!-- FromName="" -->
<!-- FromEmail="davidn@rebel.net.au" -->
<!-- ToName="'John Kennison'" -->
<!-- ToEmail="jkenn@hotpop.com" -->
<!-- Date="Wed, 31 Jul 2002 21:50:54 +0930 (CST)" -->
<!-- Id="Pine.LNX.4.21.0207312141060.12291-100000@huachuca.tellurian.com.au" -->
<!-- Reference="003101c23882$b5bcfa00$0100a8c0@powerbox" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: Scripting Help</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: &lt;<I><A HREF="mailto:davidn@rebel.net.au">davidn@rebel.net.au</A></I>&gt;
  To  : John Kennison &lt;<I><A HREF="mailto:jkenn@hotpop.com">jkenn@hotpop.com</A></I>&gt;
  Date: Wed, 31 Jul 2002 21:50:54 +0930 (CST)
</PRE>
<H1>Re: Scripting Help</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
John Kennison &lt;<A HREF="mailto:jkenn@hotpop.com">jkenn@hotpop.com</A>&gt; wrote:
&gt; The main thing I need to determine in regards to scripting, is how do
&gt; I determine if I am online or not using only the ping command??

The ping man page says, "If ping does not receive any reply packets at
all it will exit with code 1.  On error it exits with code 2. Otherwise
it exits with code 0. This makes it possible to use the exit code to
see if a host is alive or not."

Use ping's -c parameter to specify how many packets you want to send.
For example, use "ping -c 1" to send a packet.  If it comes back, the link
is up.  Sometimes packets are dropped, for example when router buffers
fill up, so even if the packet doesn't come back your link might still
be up.  You don't need to send a lot of packets to be fairly confident
of the result (namely no returned packets meaning the link is down.)
Probably two or three is plenty, but your milage may vary.

You are not interested in the output of ping, so use the -q parameter
and redirect stdout to /dev/null.  Thus:

ping -q -c 2 $IPADDRESS &gt;/dev/null && echo link is up || echo link is down

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
