<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: Scripting Help" -->
<!-- FromName="'John Kennison'" -->
<!-- FromEmail="jkenn@hotpop.com" -->
<!-- ToName="" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Wed, 31 Jul 2002 21:58:29 +0930" -->
<!-- Id="004101c2388d$ca9c72b0$0100a8c0@powerbox" -->
<!-- Reference="Pine.LNX.4.21.0207312141060.12291-100000@huachuca.tellurian.com.au" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: Scripting Help</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: John Kennison &lt;<I><A HREF="mailto:jkenn@hotpop.com">jkenn@hotpop.com</A></I>&gt;
  To  : &lt;<I><A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A></I>&gt;
  Date: Wed, 31 Jul 2002 21:58:29 +0930
</PRE>
<H1>Re: Scripting Help</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Thankyou David,

I knew that I should have done a bit more research before asking the list,
but its' been a long day and I don't have much experience with scripting at
the moment; it worked like a charm and now I can have my proxy without my
significant other having to know or worry about it not working when the link
is down :)

--
Regards,

John Kennison

----- Original Message -----
From: &lt;<A HREF="mailto:davidn@rebel.net.au">davidn@rebel.net.au</A>&gt;
To: "John Kennison" &lt;<A HREF="mailto:jkenn@hotpop.com">jkenn@hotpop.com</A>&gt;
Cc: &lt;<A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A>&gt;
Sent: Wednesday, July 31, 2002 9:50 PM
Subject: Re: Scripting Help


John Kennison &lt;<A HREF="mailto:jkenn@hotpop.com">jkenn@hotpop.com</A>&gt; wrote:
&gt; The main thing I need to determine in regards to scripting, is how do
&gt; I determine if I am online or not using only the ping command??

The ping man page says, "If ping does not receive any reply packets at
all it will exit with code 1.  On error it exits with code 2. Otherwise
it exits with code 0. This makes it possible to use the exit code to
see if a host is alive or not."

Use ping's -c parameter to specify how many packets you want to send.
For example, use "ping -c 1" to send a packet.  If it comes back, the link
is up.  Sometimes packets are dropped, for example when router buffers
fill up, so even if the packet doesn't come back your link might still
be up.  You don't need to send a lot of packets to be fairly confident
of the result (namely no returned packets meaning the link is down.)
Probably two or three is plenty, but your milage may vary.

You are not interested in the output of ping, so use the -q parameter
and redirect stdout to /dev/null.  Thus:

ping -q -c 2 $IPADDRESS &gt;/dev/null && echo link is up || echo link is down



---
Outgoing mail is certified Virus Free.
Checked by AVG anti-virus system (<A HREF="http://www.grisoft.com">http://www.grisoft.com</A>).
Version: 6.0.377 / Virus Database: 211 - Release Date: 15/07/2002

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
