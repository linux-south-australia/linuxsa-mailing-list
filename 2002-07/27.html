<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Samba Tuning" -->
<!-- FromName="" -->
<!-- FromEmail="Matthew.Cook@tekelek.com.au" -->
<!-- ToName="" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Tue, 2 Jul 2002 08:44:29 +0930" -->
<!-- Id="OFA2447C13.E9FEF771-ONE9256BE9.007DB23E-E9256BE9.007F7252@LocalDomain" -->
<!-- Reference="" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Samba Tuning</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: &lt;<I><A HREF="mailto:Matthew.Cook@tekelek.com.au">Matthew.Cook@tekelek.com.au</A></I>&gt;
  To  : &lt;<I><A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A></I>&gt;
  Date: Tue, 2 Jul 2002 08:44:29 +0930
</PRE>
<H1>Samba Tuning</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Hi All,

I have some unexplained Samba questions I was hoping someone might be able
to point out what I have missed.

- What would be the typical sustained download speed on a 100Mbit LAN ?
- Why does smbd only grab 50% cpu if the machine is essentially idle ?
- What priority level does smbd run at ?
- How does one squeeze more speed out of it.

The basic senario is I have a small SOHO consisting of a linux file server
(Slackware 8.0+samba) which serves  2 desktops and a laptop
(Win98se&Win2K).   The sustained file download speed from the linux box on
any machine is 1.5-5.5M byte per second, but it changes depending
day/time/orientation of the moon, there is no consistancy.   I have
verified that the network layer is 100%, there are no IP errors and the
timing is consistant across all boxes.   I have read James doco and fixed
the slow browsing problems under win2k (see James we are using it !)   I am
not running samba as a PDC (yet) so it is configured as the master browser
and to "win" browser elections.

The linux box is a Celleron 600 on a VIA motherboard (no body laugh) with
3Com Ethernet card (3C905B), there are a couple of big ATA100 drives on a
measly ATA66 controller (fixed next pay cheque).   I cannot see why the
performance of samba varies so much from day to day.   It should be noted
that I have never seen smbd take more than 50% of the cpu (via top) which
roughly equates to my 5Mbytes per second peak, but it is fustrating to see
the smbd load requirement drop to 11% (1Mbyte/s out) with 80%+ of idle time
when transfering 2Gb files !

I am sure it is a samba/os/config problem and not a network hardware
problem (those I can fix !).   I can email config files if required.

Regards

Matthew



-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
