<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Iptables Nat Woes" -->
<!-- FromName="'David Lloyd'" -->
<!-- FromEmail="lloy0076@rebel.net.au" -->
<!-- ToName="" -->
<!-- ToEmail="linuxsa@linuxsa.org.au" -->
<!-- Date="Sat, 17 Aug 2002 18:39:43 +0930" -->
<!-- Id="3D5E12D7.85D84441@rebel.net.au" -->
<!-- Reference="" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Iptables Nat Woes</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: David Lloyd &lt;<I><A HREF="mailto:lloy0076@rebel.net.au">lloy0076@rebel.net.au</A></I>&gt;
  To  : &lt;<I><A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A></I>&gt;
  Date: Sat, 17 Aug 2002 18:39:43 +0930
</PRE>
<H1>Iptables Nat Woes</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Hmmmm...

I think I've encountered a bug in my kernel or setup.

If I do this:

[<A HREF="mailto:root@linux">root@linux</A> netfilter]# iptables -A POSTROUTING -t nat -s 10.0.0.0/24 -j
MASQUERADE
[<A HREF="mailto:root@linux">root@linux</A> netfilter]# iptables -L -n -v
Chain INPUT (policy ACCEPT 46 packets, 3629 bytes)
 pkts bytes target     prot opt in     out     source              
destination         

Chain FORWARD (policy ACCEPT 0 packets, 0 bytes)
 pkts bytes target     prot opt in     out     source              
destination         

Chain OUTPUT (policy ACCEPT 46 packets, 3622 bytes)
 pkts bytes target     prot opt in     out     source              
destinatio

...where the world did the chain get added?

When I do this:



[<A HREF="mailto:root@linux">root@linux</A> netfilter]# service iptables start
Flushing all current rules and user defined chains:        [  OK  ]
Clearing all current rules and user defined chains:        [  OK  ]
iptables: libiptc/libip4tc.c:384: do_check: Assertion
`h-&gt;info.valid_hooks == (1
/etc/init.d/iptables: line -241: 27619 Aborted                 (core
dumped) ipt
iptables: libiptc/libip4tc.c:384: do_check: Assertion
`h-&gt;info.valid_hooks == (1
/etc/init.d/iptables: line -249: 27623 Aborted                 (core
dumped) ipt
iptables: libiptc/libip4tc.c:384: do_check: Assertion
`h-&gt;info.valid_hooks == (1
/etc/init.d/iptables: line -245: 27627 Aborted                 (core
dumped) ipt
Applying iptables firewall rules: 
                                                           [  OK  ]

Somehow and somewhere my MANGLE, POSTROUTING etc tables just aren't
behaving themselves. Any idea where they may be falling over though?

DSL
- -
We are not the United States' ally
  We are the 53rd sovereign state
  of the Federation

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
