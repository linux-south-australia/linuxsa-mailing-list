<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: Iptables Nat Woes" -->
<!-- FromName="'David Lloyd'" -->
<!-- FromEmail="lloy0076@rebel.net.au" -->
<!-- ToName="'Toby Corkindale'," -->
<!-- ToEmail="toby@netcraft.com.au,linuxsa@linuxsa.org.au" -->
<!-- Date="Mon, 19 Aug 2002 12:27:52 +0930" -->
<!-- Id="3D605EB0.E0749CE0@rebel.net.au" -->
<!-- Reference="20020819101223.E5098@april.netcraft.com.au" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: Iptables Nat Woes</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: David Lloyd &lt;<I><A HREF="mailto:lloy0076@rebel.net.au">lloy0076@rebel.net.au</A></I>&gt;
  To  : Toby Corkindale &lt;<I><A HREF="mailto:toby@netcraft.com.au">toby@netcraft.com.au</A></I>&gt;<BR>        &lt;<I><A HREF="mailto:linuxsa@linuxsa.org.au">linuxsa@linuxsa.org.au</A></I>&gt;
  Date: Mon, 19 Aug 2002 12:27:52 +0930
</PRE>
<H1>Re: Iptables Nat Woes</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
Hmmm...

[<A HREF="mailto:root@linux">root@linux</A> /root]# iptables -t nat -L
Chain PREROUTING (policy ACCEPT)
target     prot opt source               destination         

Chain POSTROUTING (policy ACCEPT)
target     prot opt source               destination         
MASQUERADE  all  --  10.0.0.102           anywhere           

Chain OUTPUT (policy ACCEPT)
target     prot opt source               destination

...but my packets from 10.0.0.102 don't appear to be masqueraded (I
can't use ping to the internet from there and a direct http request
doesn't work)...

I've done:

[<A HREF="mailto:root@linux">root@linux</A> /root]# iptables -A POSTROUTING -t nat -s 10.0.0.102 -j
MASQUERADE

...I tried adding -i but apparently you can't specify the interface in
POSTROUTING.

[<A HREF="mailto:root@linux">root@linux</A> /root]# lsmod | grep ip
ipt_MASQUERADE          1248   0  (autoclean)
iptable_nat            13456   0  (autoclean) [ipt_MASQUERADE]
ip_conntrack           13584   1  (autoclean) [ipt_MASQUERADE
iptable_nat]
iptable_filter          1760   0  (autoclean) (unused)
iptable_mangle          2144   0  (autoclean) (unused)
ip_tables              10880   6  [ipt_MASQUERADE iptable_nat
iptable_filter iptable_mangle]

...clearly shows the iptables modules are there.

Any idea why this mighn't work?

DSL
-- 
We are not the United States' ally
  We are the 53rd sovereign state
  of the Federation

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
