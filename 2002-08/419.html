<HTML>
<!-- EmailData="Start" -->
<!-- Version="1.1" -->
<!-- Subject="Re: Iptables Nat Woes" -->
<!-- FromName="'Anthony Symons'" -->
<!-- FromEmail="ant@sa.pracom.com.au" -->
<!-- ToName="'David Lloyd'" -->
<!-- ToEmail="lloy0076@rebel.net.au" -->
<!-- Date="19 Aug 2002 09:45:29 +0930" -->
<!-- Id="1029716130.17094.133.camel@ant.internal" -->
<!-- Reference="3D5E12D7.85D84441@rebel.net.au" -->
<!-- X-Face="" -->
<!-- X-URL="" -->
<!-- EmailData="End" -->
<HEAD>
<TITLE>LinuxSA Mailing List: Re: Iptables Nat Woes</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF><H1>LinuxSA Mailing list archives</H1>
<!-- IndexControl1="Start" -->
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<HR>
<!-- IndexControl1="End" -->
<!-- Header="Start" -->
<PRE>
  From: Anthony Symons &lt;<I><A HREF="mailto:ant@sa.pracom.com.au">ant@sa.pracom.com.au</A></I>&gt;
  To  : David Lloyd &lt;<I><A HREF="mailto:lloy0076@rebel.net.au">lloy0076@rebel.net.au</A></I>&gt;
  Date: 19 Aug 2002 09:45:29 +0930
</PRE>
<H1>Re: Iptables Nat Woes</H1>
<!-- Header="End" -->
<!-- Body="Start" -->
<PRE>
On Sat, 2002-08-17 at 18:39, David Lloyd wrote:
&gt; 
&gt; Hmmmm...
&gt; 
&gt; I think I've encountered a bug in my kernel or setup.
&gt; 
&gt; If I do this:
&gt; 
&gt; [<A HREF="mailto:root@linux">root@linux</A> netfilter]# iptables -A POSTROUTING -t nat -s 10.0.0.0/24 -j
&gt; MASQUERADE
&gt; [<A HREF="mailto:root@linux">root@linux</A> netfilter]# iptables -L -n -v
&gt; Chain INPUT (policy ACCEPT 46 packets, 3629 bytes)
&gt;  pkts bytes target     prot opt in     out     source              
&gt; destination         
&gt; 
&gt; Chain FORWARD (policy ACCEPT 0 packets, 0 bytes)
&gt;  pkts bytes target     prot opt in     out     source              
&gt; destination         
&gt; 
&gt; Chain OUTPUT (policy ACCEPT 46 packets, 3622 bytes)
&gt;  pkts bytes target     prot opt in     out     source              
&gt; destinatio
&gt; 
&gt; ...where the world did the chain get added?

iptables -L -n -v -t nat

Should show you. You need to specify the nat table to see it.

Im not sure about the problems below.

Ant
 
&gt; When I do this:
&gt; 
&gt; 
&gt; 
&gt; [<A HREF="mailto:root@linux">root@linux</A> netfilter]# service iptables start
&gt; Flushing all current rules and user defined chains:        [  OK  ]
&gt; Clearing all current rules and user defined chains:        [  OK  ]
&gt; iptables: libiptc/libip4tc.c:384: do_check: Assertion
&gt; `h-&gt;info.valid_hooks == (1
&gt; /etc/init.d/iptables: line -241: 27619 Aborted                 (core
&gt; dumped) ipt
&gt; iptables: libiptc/libip4tc.c:384: do_check: Assertion
&gt; `h-&gt;info.valid_hooks == (1
&gt; /etc/init.d/iptables: line -249: 27623 Aborted                 (core
&gt; dumped) ipt
&gt; iptables: libiptc/libip4tc.c:384: do_check: Assertion
&gt; `h-&gt;info.valid_hooks == (1
&gt; /etc/init.d/iptables: line -245: 27627 Aborted                 (core
&gt; dumped) ipt
&gt; Applying iptables firewall rules: 
&gt;                                                            [  OK  ]
&gt; 
&gt; Somehow and somewhere my MANGLE, POSTROUTING etc tables just aren't
&gt; behaving themselves. Any idea where they may be falling over though?
&gt; 
&gt; DSL
&gt; - -
&gt; We are not the United States' ally
&gt;   We are the 53rd sovereign state
&gt;   of the Federation
&gt; 
&gt; -- 
&gt; LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
&gt; To unsubscribe from the LinuxSA list:
&gt;   mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject
&gt; 
-- 
Systems Administrator       
Pracom Ltd.             
+61 8 82029074 -=- +61 402 100 671 
<A HREF="mailto:anthony.symons@sa.pracom.com.au">anthony.symons@sa.pracom.com.au</A>

PRIVILEGED - PRIVATE AND CONFIDENTIAL
This electronic mail is solely for the use of the addressee and may
contain information which is confidential or privileged.
If you receive this electronic mail in error, please delete it from
your system immediately and notify the sender by electronic mail or
using any of the above contact details.

-- 
LinuxSA WWW: <A HREF="http://www.linuxsa.org.au/">http://www.linuxsa.org.au/</A>  IRC: #linuxsa on irc.linux.org.au
To unsubscribe from the LinuxSA list:
  mail <A HREF="mailto:linuxsa-request@linuxsa.org.au">linuxsa-request@linuxsa.org.au</A> with "unsubscribe" as the subject

</PRE>
<!-- Body="End" -->
<!-- IndexControl2="Start" -->
<HR>
Index:
[<A HREF="thread.html">thread</A>]
[<A HREF="date.html">date</A>]
[<A HREF="subject.html">subject</A>]
[<A HREF="author.html">author</A>]
[<A HREF="stats.html">stats</A>]
<!-- IndexControl2="End" -->
<HR><FONT SIZE=+1>Return to the <A HREF=/mailing-list/>LinuxSA Mailing List Information</A> Page</FONT></BODY>
</HTML>
